/* -----------------------
 * Seed CSS - Forms
 * @version 1.2.2
 * @author Rogerio Taques (hello@abtz.co)
 * @see https://github.com/AbtzLabs/seed-css
 * @license MIT (https://opensource.org/licenses/MIT)
 * ----------------------- */

.field {
  margin-bottom: $margin * 2;
  position: relative;

  &.seed-select {
    &::after {
      font-family: 'Ionicons';
      -webkit-speak: none;
      -moz-speak: none;
      -ms-speak: none;
      -o-speak: none;
      speak: none;
      content: '\f123';
      display: block;
      position: absolute;
      bottom: $margin;
      right: $margin;
      color: $darken-grey;
      pointer-events: none;
    } // .seed-select::after

    select {
      @include appearance(none);
      background-color: transparent;
      padding-right: 30px;

      &::-ms-expand {
        display: none;
      } // select::-ms-expand
    } // select
  } // .seed-select

  & > label {
    display: block;
    width: 100%;
    color: $darken-grey;

    & > input[type='radio'],
    & > input[type='checkbox'] {
      margin-right: $margin;
    }
  } // label

  & > span {
    &.info {
      color: $grey;
    }
  } // span

  input[type='text'],
  input[type='password'],
  input[type='search'],
  input[type='tel'],
  input[type='email'],
  input[type='url'],
  textarea,
  select {
    width: 100%;
    box-sizing: border-box;
    @include rem(padding, 0 $padding);
    @include rem(font-size, 16px);
    @include rem(height, 40px);
    @include rem(line-height, 40px);
    border: $border solid $grey;
    border-radius: 0;
    margin: 5px 0;

    @include box-shadow(0 0 0 1000px white inset);
    @include appearance(none);

    &:focus,
    &:active {
      // this removes the yellow background from autofil features
      @include box-shadow(0 0 0 1000px white inset);
      // outline: $border solid $primary;
      border-color: $primary;
      outline: none;
    }

    & > option {
      border: 0;
      outline: none;
      @include appearance(none);
    }
  } // input[...]

  textarea {
    resize: none;
    @include rem(height, 85px);
    @include rem(max-height, 85px);
    @include rem(line-height, 25px);
    @include rem(padding, 10px);
  } // textarea

  select {
    background-color: rgba(255, 255, 255, 0.9);
    @include rem(height, 40px);
  } // select

  input[type='radio'],
  input[type='checkbox'] {
    position: absolute;
    margin-left: -99999px;
    display: none;

    & + label {
      cursor: pointer;

      &::before {
        content: '';
        display: inline-block;
        vertical-align: middle;
        border: 1px solid grey;
        background-color: #fff;
        @include rem(width, 16px);
        @include rem(height, 16px);
        @include rem(margin-right, 10px);
      }
    }

    &:checked {
      & + label {
        &::before {
          border-color: $primary;
        }
      }
    }
  } // radio, checkbox

  input[type='checkbox'] {
    &:checked {
      & + label {
        &::after {
          content: '';
          display: block;
          position: absolute;
          top: 0;
          left: 2px;
          border: 3px solid $primary;
          border-top-color: transparent;
          border-right-color: transparent;
          @include rem(width, 16px);
          @include rem(height, 8px);
          @include transform(rotate(-45deg));
        }
      }
    }
  } // checkbox

  input[type='radio'] {
    & + label {
      &::before {
        border-radius: 20px;
      }
    }

    &:checked {
      & + label {
        &::before {
          background-color: $primary;
        }

        &::after {
          content: '';
          display: block;
          position: absolute;
          top: 9px; // fix bullet position
          left: 4px;
          border: 5px solid #fff;
          border-radius: 20px;
          @include rem(width, 0);
          @include rem(height, 0);
        }
      }
    }
  } // radiobutton

  &.has-feedback {
    & > span {
      &.error {
        color: $red;
      }

      &.success {
        color: $green;
      }

      &.info {
        color: $grey;
      }
    } // span

    input[type='text'],
    input[type='password'],
    input[type='search'],
    input[type='tel'],
    input[type='email'],
    input[type='url'],
    textarea,
    select {
      &.error {
        border-color: $red;
      }

      &.success {
        border-color: $green;
      }
    } // input[type="*"], textarea, select

    input[type='radio'],
    input[type='checkbox'] {
      &.error:not(:checked) + label {
        color: $red;

        &::before {
          border-color: $red;
        }
      }
    } // input[type="radio"], input[type="checkbox"]

    &.seed-select {
      &::after {
        transform: translateY(-100%);
      }
    } // .seed-select
  } // .has-feedback

  &.group {
    display: -webkit-flex;
    display: -moz-flex;
    display: -ms-flex;
    display: -o-flex;
    display: flex;

    & > .field {
      margin: 0;
      width: 100%;

      & > input[type='text'],
      & > input[type='password'],
      & > input[type='search'],
      & > input[type='tel'],
      & > input[type='email'],
      & > input[type='url'] {
        position: relative;

        &:focus,
        &:active {
          z-index: 5;
        }
      } // input[...]

      & > button {
        margin: 5px 0;
        max-height: 4rem;
        line-height: 3rem;
      } // button

      &:last-child {
        margin-left: -1px;
      } // :last-child
    } // > .field
  } // .group

  &.seed-file {
    & > [type='file'] {
      width: 0.1px;
      height: 0.1px;
      opacity: 0;
      overflow: hidden;
      position: absolute;
      z-index: -1;

      & + label {
        font-size: 1.5rem;
        border: 1px solid #ccc;
        background-color: #fff;
        padding: 0;
        cursor: pointer;
        box-sizing: content-box;
        height: 4rem;
        display: -moz-flex;
        display: -webkit-flex;
        display: flex;

        & > span {
          display: inline-block;
          line-height: 4rem;
          height: 100%;
          padding: 0 5px;
          text-align: center;
        } // span

        & > span.input {
          text-overflow: ellipsis;
          white-space: nowrap;
          overflow: hidden;
          vertical-align: top;
          flex: 2;
        } // span.input

        & > span.button,
        & > span.cancel {
          position: relative;
          color: #fff;
          background-color: $primary;
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
          flex: 1;
        } // span.button, span.cancel

        & > span.button {
          & > .icon {
            position: absolute;
            font-size: 3rem;
            margin-left: 20px;
            left: 0;
          }
        } // span.button

        // & > span.cancel {
        //   position: relative;
        //   width: calc(5% - 10px);
        //   background-color: #bf0000;
        //   visibility: hidden;
        //   z-index: -1;
        // } // span.cancel

        & * {
          pointer-events: none;
        }
      } // input + label

      &:focus + label,
      & + label:hover {
        // background-color: #e2e2e2;

        & > .button {
          background-color: darken($primary, 20%);
        }
      } // input:focus + label, input + label

      &:focus + label {
        outline: 1px dotted #000;
        outline: -webkit-focus-ring-color auto 5px;
      } // input:focus + label
    } // [type="file"]

    // &.chosen {
    //   [type="file"] + label {
    //     & > span.cancel {
    //       visibility: visible;
    //       z-index: 20;
    //     }
    //   }
    // }
  } // .seed-file
} // .field
