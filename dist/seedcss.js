/** 
 * Seed CSS (seed-css) 
 * A light-weight, mobile first and responsive CSS boilerplate. 
 * @author Rogerio Taques (hello@abtz.co) 
 * @copyright 2016-2018, Rogerio Taques (hello@abtz.co) 
 * @license MIT 
 * @version 2.0.0 
 */ 

 "use strict";!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}return"function"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,void(window.CustomEvent=t))}();
"use strict";var seedFileUpload=function(){var e=function(e){e&&e.preventDefault();var t,i=!1,n=this,l=n.nextElementSibling;n.files&&n.files.length>1?i=(n.getAttribute("data-multiple")||"{count} files").replace("{count}",n.files.length):n.value.trim().length>0&&(i=n.value.split("\\").pop()),i&&(l.querySelector(".input").innerHTML=i),""!==n.value&&(t=new CustomEvent("file.chosen"),n.parentNode.classList.add("chosen"),n.dispatchEvent(t))},t=document.querySelectorAll('.seed-file > [type="file"]');null!==t&&t.forEach(function(t,i){var n=t.nextElementSibling,l=n.querySelector(".cancel"),o=t.getAttribute("data-empty")||"No file chosen";n&&(t.getAttribute("id")&&t.getAttribute("id")!==n.getAttribute("for")?n.setAttribute("for",t.getAttribute("id")):n.getAttribute("for")&&!t.getAttribute("id")?t.setAttribute("id",n.getAttribute("for")):(t.setAttribute("id","file-input-"+i),n.setAttribute("for","file-input-"+i)),l&&l.addEventListener("click",function(e){e&&e.preventDefault();var i=t.getAttribute("data-empty")||"No file chosen";t.value="",t.parentNode.classList.remove("chosen"),n.querySelector(".input").innerHTML=i,seedCustomEvent=new CustomEvent("file.removed"),t.dispatchEvent(seedCustomEvent)}),n.querySelector(".input").innerHTML=o,t.addEventListener("change",e))})};"undefined"!=typeof module?("undefined"==typeof module.exports.SeedCSS&&(module.exports.SeedCSS={}),module.exports.SeedCSS.fileUpload=seedFileUpload):("undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.fileUpload=seedFileUpload);
"use strict";var fnOpen,fnClose,fnEsc,seedModal=function(e){var n={trigger:'[role="modal"]',classAnimation:{open:"flipInX",close:"flipOutX"}};e=Object.assign({},n,e);var t=document.querySelectorAll(".modal"),o=document.querySelectorAll(e.trigger);return fnClose=function(n){if(n){var t,o=document.querySelector("html"),d=n.querySelector(".modal-window");d&&(document.removeEventListener("keydown",fnEsc),d.classList.replace(e.classAnimation.open,e.classAnimation.close),n.classList.add("delay-1s"),n.classList.replace("fadeIn","fadeOut"),setTimeout(function(){t=new CustomEvent("modal.closed"),n.dispatchEvent(t),n.classList.add("hide"),o.style.overflow="",n.classList.remove("delay-1s","fadeOut"),d.classList.replace(e.classAnimation.close,e.classAnimation.open)},1500))}},fnOpen=function(n){if(n){var t,o=document.querySelector("html"),d=n.querySelector(".modal-window");fnEsc=function(e){var t=e.keyCode||e.which;27===t&&fnClose(n)},d&&(document.addEventListener("keydown",fnEsc),n.style.display="",n.classList.add("animated","fadeIn","fast"),d.classList.add("animated",e.classAnimation.open),n.classList.remove("hide"),o.style.overflow="hidden",setTimeout(function(){t=new CustomEvent("modal.opened"),n.dispatchEvent(t)},1e3))}},null!==t&&t.forEach(function(e,n){var t=e.querySelectorAll('[role="modal-dismiss"]');e.addEventListener("click",function(){fnClose(e)}),e.show=function(){fnOpen(e)},e.hide=function(){fnClose(e)},null!==t&&t.forEach(function(n,t){n.addEventListener("click",function(n){n&&(n.preventDefault(),n.stopPropagation()),fnClose(e)})})}),null!==o&&o.forEach(function(e,n){e.addEventListener("click",function(n){n&&n.preventDefault();var t=e.getAttribute("data-modal-id");if(null!==t){var o=document.querySelector("#".concat(t));fnOpen(o)}})}),o=void 0,{get:function(e){if("string"==typeof e){var n=!1;return t.forEach(function(t){if(t.id===e.replace(/^#/,""))return void(n=t)}),n}return"undefined"!=typeof t[e]&&t[e]}}};"undefined"!=typeof module?("undefined"==typeof module.exports.SeedCSS&&(module.exports.SeedCSS={}),module.exports.SeedCSS.modal=seedModal):("undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.modal=seedModal);
"use strict";var seedOffCanvas=function(){var e=function(e,n){var t,o=document.querySelector("#".concat(e.replace(/^#/,""))),a=n||document.querySelector('[role="offcanvas"][data-id="'.concat(e.replace(/^#/,""),'"]'));null!==o&&(o.classList.toggle("open"),o.classList.contains("open")?(null!==a&&a.classList.add("triggered"),document.querySelector("html").style.overflow="hidden"):(document.querySelectorAll('[role="offcanvas"][data-id="'.concat(e.replace(/^#/,""),'"]')).forEach(function(e){e.classList.remove("triggered")}),document.querySelector("html").style.overflow=""),setTimeout(function(){t=o.classList.contains("open")?new CustomEvent("canvas.opened"):new CustomEvent("canvas.closed"),o.dispatchEvent(t)},300))},n=function(n){n&&n.preventDefault(),e(n.currentTarget.getAttribute("data-id")||"offcanvas",n.currentTarget)},t=document.querySelectorAll('[role="offcanvas"]'),o=document.querySelectorAll(".offcanvas");return null!==t&&t.forEach(function(e,t){e.addEventListener("click",n)}),null!==o&&o.forEach(function(n,t){n.open=function(){e(n.getAttribute("id")||"offcanvas")},n.close=function(){}}),{get:function(e){if("string"==typeof e){var n=!1;return o.forEach(function(t){if(t.id===e.replace(/^#/,""))return void(n=t)}),n}return"undefined"!=typeof canvas[e]&&canvas[e]}}};"undefined"!=typeof module?("undefined"==typeof module.exports.SeedCSS&&(module.exports.SeedCSS={}),module.exports.SeedCSS.offCanvas=seedOffCanvas):("undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.offCanvas=seedOffCanvas);
"use strict";var seedTextarea=function(){var e=document.querySelectorAll(".field > textarea");null!==e&&e.forEach(function(e,t){var a=0,r=e.parentNode,n=r.querySelector('[role="counter"]'),d=n.getAttribute("data-template")||"Typed %a out of %b. Remaining %c.",o=function(){var t=e.value.replace(/[\n\r]/g,"").length,r=a-t,o=Math.floor(.1*a);n.innerHTML=d.replace("%a",t).replace("%b",a).replace("%c",r<=o?'<span class="red" >'.concat(r,"</span>"):r)};a=e.getAttribute("maxlength"),a&&(a=parseInt(a),"keypress keydown keyup".split(" ").forEach(function(t){e.addEventListener(t,o,!0)}),o())})};"undefined"!=typeof module?("undefined"==typeof module.exports.SeedCSS&&(module.exports.SeedCSS={}),module.exports.SeedCSS.textArea=seedTextarea):("undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.textArea=seedTextarea);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbUV2ZW50UG9seWZpbGwuanMiLCJzZWVkRmlsZVVwbG9hZC5qcyIsInNlZWRNb2RhbC5qcyIsInNlZWRPZmZDYW52YXMuanMiLCJzZWVkVGV4dGFyZWEuanMiXSwibmFtZXMiOlsiQ3VzdG9tRXZlbnQiLCJldmVudCIsInBhcmFtcyIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwiZGV0YWlsIiwidW5kZWZpbmVkIiwiZXZ0IiwiZG9jdW1lbnQiLCJjcmVhdGVFdmVudCIsImluaXRDdXN0b21FdmVudCIsIndpbmRvdyIsInByb3RvdHlwZSIsIkV2ZW50Iiwic2VlZEZpbGVVcGxvYWQiLCJmbkNoYW5nZSIsInByZXZlbnREZWZhdWx0Iiwic2VlZEN1c3RvbUV2ZW50IiwiZmlsZU5hbWUiLCJpbnB1dCIsInRoaXMiLCJsYWJlbCIsIm5leHRFbGVtZW50U2libGluZyIsImZpbGVzIiwibGVuZ3RoIiwiZ2V0QXR0cmlidXRlIiwicmVwbGFjZSIsInZhbHVlIiwidHJpbSIsInNwbGl0IiwicG9wIiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsInBhcmVudE5vZGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJkaXNwYXRjaEV2ZW50IiwiaW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpIiwiY2FuY2VsIiwiZW1wdHlUZXh0Iiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJTZWVkQ1NTIiwiZmlsZVVwbG9hZCIsImZuT3BlbiIsImZuQ2xvc2UiLCJmbkVzYyIsInNlZWRNb2RhbCIsIm9wdGlvbnMiLCJkZWZhdWx0T3B0aW9ucyIsInRyaWdnZXIiLCJjbGFzc0FuaW1hdGlvbiIsIm9wZW4iLCJjbG9zZSIsIk9iamVjdCIsImFzc2lnbiIsIm1vZGFscyIsIm1vZGFsVHJpZ2dlcnMiLCJtb2RhbE9iamVjdCIsImN1c3RvbUV2ZW50IiwiaHRtbCIsIm1XaW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0VGltZW91dCIsInN0eWxlIiwib3ZlcmZsb3ciLCJlIiwia2V5Iiwia2V5Q29kZSIsIndoaWNoIiwiZGlzcGxheSIsIm1vZGFsIiwiZGlzbWlzc2FscyIsInNob3ciLCJoaWRlIiwiZGlzbWlzcyIsImoiLCJzdG9wUHJvcGFnYXRpb24iLCJyZWYiLCJjb25jYXQiLCJnZXQiLCJpZHgiLCJub2RlIiwiaWQiLCJzZWVkT2ZmQ2FudmFzIiwiZm5Ub2dnbGUiLCJjYW52YXNJRCIsInRyaWdnZXJFbGVtZW50IiwiY2FudmFzIiwidG9nZ2xlIiwiY29udGFpbnMiLCJ0Z3IiLCJmblRyaWdnZXJDbGljayIsImN1cnJlbnRUYXJnZXQiLCJ0cmlnZ2VycyIsImNhbnZhc2VzIiwib2ZmQ2FudmFzIiwic2VlZFRleHRhcmVhIiwibWF4TGVuZ3RoIiwicGFyZW50IiwiY291bnRlckxhYmVsIiwidGVtcGxhdGUiLCJmbkNhbGMiLCJ0eXBlZCIsInJlbWFpbmluZyIsIm1pbkxlbmd0aCIsIk1hdGgiLCJmbG9vciIsInBhcnNlSW50IiwidGV4dEFyZWEiXSwibWFwcGluZ3MiOiJBQUFBLGNBSUEsV0FHRSxRQUFTQSxHQUFZQyxFQUFPQyxHQUMxQkEsRUFBU0EsSUFBWUMsU0FBUyxFQUFPQyxZQUFZLEVBQU9DLE9BQVFDLE9BQ2hFLElBQUlDLEdBQU1DLFNBQVNDLFlBQVksY0FPL0IsT0FOQUYsR0FBSUcsZ0JBQ0ZULEVBQ0FDLEVBQU9DLFFBQ1BELEVBQU9FLFdBQ1BGLEVBQU9HLFFBRUZFLEVBWFQsTUFBa0Msa0JBQXZCSSxRQUFPWCxjQWNsQkEsRUFBWVksVUFBWUQsT0FBT0UsTUFBTUQsZUFFckNELE9BQU9YLFlBQWNBO0FDckJ2QixZQVFBLElBQU1jLGdCQUFpQixXQUdyQixHQUFNQyxHQUFXLFNBQWtCUixHQUM3QkEsR0FDRkEsRUFBSVMsZ0JBR04sSUFBSUMsR0FDQUMsR0FBVyxFQUVUQyxFQUFRQyxLQUNSQyxFQUFRRixFQUFNRyxrQkFHaEJILEdBQU1JLE9BQVNKLEVBQU1JLE1BQU1D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NEUsRUFDSkQsRUFBYWpGLGFBQWEsa0JBQzFCLG9DQUVJbUYsRUFBUyxXQUNiLEdBQU1DLEdBQVExRixFQUFNUSxNQUFNRCxRQUFRLFVBQVcsSUFBSUYsT0FDM0NzRixFQUFZTixFQUFZSyxFQUN4QkUsRUFBWUMsS0FBS0MsTUFBa0IsR0FBWlQsRUFFN0JFLEdBQWExRSxVQUFZMkUsRUFDdEJqRixRQUFRLEtBQU1tRixHQUNkbkYsUUFBUSxLQUFNOEUsR0FDZDlFLFFBQ0MsS0FDQW9GLEdBQWFDLEVBQWIsc0JBQUExQixPQUMwQnlCLEVBRDFCLFdBRUlBLEdBSVZOLEdBQVlyRixFQUFNTSxhQUFhLGFBRzFCK0UsSUFLTEEsRUFBWVUsU0FBU1YsR0FHckIseUJBQXlCM0UsTUFBTSxLQUFLVSxRQUFRLFNBQUNoQyxHQUMzQ1ksRUFBTXlCLGlCQUFpQnJDLEVBQUtxRyxHQUFRLEtBSXRDQSxPQUtnQixvQkFBWDlELFNBQzZCLG1CQUEzQkEsUUFBT0MsUUFBUUMsVUFDeEJGLE9BQU9DLFFBQVFDLFlBR2pCRixPQUFPQyxRQUFRQyxRQUFRbUUsU0FBV1osZUFFSixtQkFBbkI1RixRQUFPcUMsVUFDaEJyQyxPQUFPcUMsWUFHVHJDLE9BQU9xQyxRQUFRbUUsU0FBV1oiLCJmaWxlIjoic2VlZGNzcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiFcbiAqIEEgc2ltcGxlIHBvbHlmaWxsIGZvciBDdXN0b21FdmVudFxuICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ3VzdG9tRXZlbnQvQ3VzdG9tRXZlbnQjUG9seWZpbGxcbiAqL1xuKGZ1bmN0aW9uKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGZhbHNlO1xuXG4gIGZ1bmN0aW9uIEN1c3RvbUV2ZW50KGV2ZW50LCBwYXJhbXMpIHtcbiAgICBwYXJhbXMgPSBwYXJhbXMgfHwgeyBidWJibGVzOiBmYWxzZSwgY2FuY2VsYWJsZTogZmFsc2UsIGRldGFpbDogdW5kZWZpbmVkIH07XG4gICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgIGV2dC5pbml0Q3VzdG9tRXZlbnQoXG4gICAgICBldmVudCxcbiAgICAgIHBhcmFtcy5idWJibGVzLFxuICAgICAgcGFyYW1zLmNhbmNlbGFibGUsXG4gICAgICBwYXJhbXMuZGV0YWlsXG4gICAgKTtcbiAgICByZXR1cm4gZXZ0O1xuICB9XG5cbiAgQ3VzdG9tRXZlbnQucHJvdG90eXBlID0gd2luZG93LkV2ZW50LnByb3RvdHlwZTtcblxuICB3aW5kb3cuQ3VzdG9tRXZlbnQgPSBDdXN0b21FdmVudDtcbn0pKCk7XG4iLCIvKiohXG4gKiBTZWVkLUNTUyAtIEN1c3RvbSBIVE1MIElucHV0IEZpbGUuXG4gKiBAYXV0aG9yIFJvZ2VyaW8gVGFxdWVzIChoZWxsb0BhYnR6LmNvKVxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vQWJ0ekxhYnMvc2VlZC1jc3NcbiAqIEB2ZXJzaW9uIDIuMC4wXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5jb25zdCBzZWVkRmlsZVVwbG9hZCA9IGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgY29uc3QgZm5DaGFuZ2UgPSBmdW5jdGlvbiBmbkNoYW5nZShldnQpIHtcbiAgICBpZiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICBsZXQgc2VlZEN1c3RvbUV2ZW50O1xuICAgIGxldCBmaWxlTmFtZSA9IGZhbHNlO1xuXG4gICAgY29uc3QgaW5wdXQgPSB0aGlzO1xuICAgIGNvbnN0IGxhYmVsID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgLy8gV2hlbiBtdWx0aXBsZSBmaWxlcyBhcmUgc2VsZWN0ZWRcbiAgICBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXMubGVuZ3RoID4gMSkge1xuICAgICAgZmlsZU5hbWUgPSAoXG4gICAgICAgIGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS1tdWx0aXBsZScpIHx8ICd7Y291bnR9IGZpbGVzJ1xuICAgICAgKS5yZXBsYWNlKCd7Y291bnR9JywgaW5wdXQuZmlsZXMubGVuZ3RoKTtcbiAgICB9XG5cbiAgICAvLyBXaGVuIG9ubHkgb25lIGZpbGUgaXMgc2VsZWN0ZWRcbiAgICBlbHNlIGlmIChpbnB1dC52YWx1ZS50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgZmlsZU5hbWUgPSBpbnB1dC52YWx1ZS5zcGxpdCgnXFxcXCcpLnBvcCgpO1xuICAgIH1cblxuICAgIGlmIChmaWxlTmFtZSkge1xuICAgICAgbGFiZWwucXVlcnlTZWxlY3RvcignLmlucHV0JykuaW5uZXJIVE1MID0gZmlsZU5hbWU7XG4gICAgfVxuXG4gICAgaWYgKGlucHV0LnZhbHVlICE9PSAnJykge1xuICAgICAgc2VlZEN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdmaWxlLmNob3NlbicpO1xuICAgICAgaW5wdXQucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdjaG9zZW4nKTtcbiAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQoc2VlZEN1c3RvbUV2ZW50KTtcbiAgICB9XG4gIH07IC8vIGZuQ2hhbmdlXG5cbiAgLy8gRmluZCBhbGwgc2VlZC1maWxlIGlucHV0cy5cbiAgY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlZWQtZmlsZSA+IFt0eXBlPVwiZmlsZVwiXScpO1xuXG4gIGlmIChpbnB1dHMgIT09IG51bGwpIHtcbiAgICBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpbnB1dCwgaSkge1xuICAgICAgLy8gRmluZCB0aGUgZmllbGQgbGFiZWxcbiAgICAgIGNvbnN0IGxhYmVsID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgY29uc3QgY2FuY2VsID0gbGFiZWwucXVlcnlTZWxlY3RvcignLmNhbmNlbCcpO1xuICAgICAgY29uc3QgZW1wdHlUZXh0ID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdkYXRhLWVtcHR5JykgfHwgJ05vIGZpbGUgY2hvc2VuJztcblxuICAgICAgLy8gSWYgbGFiZWwgZG9lcyBub3QgZXhpc3RzLCBzaW1wbHkgZG8gbm90IHNldCBpdCB1cFxuICAgICAgaWYgKCFsYWJlbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSBpbnB1dCBhbmQgbGFiZWwgbWF0Y2hlcyBhbmQgd29ya3MuXG4gICAgICBpZiAoXG4gICAgICAgIGlucHV0LmdldEF0dHJpYnV0ZSgnaWQnKSAmJlxuICAgICAgICBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09IGxhYmVsLmdldEF0dHJpYnV0ZSgnZm9yJylcbiAgICAgICkge1xuICAgICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIGlucHV0LmdldEF0dHJpYnV0ZSgnaWQnKSk7XG4gICAgICB9IGVsc2UgaWYgKGxhYmVsLmdldEF0dHJpYnV0ZSgnZm9yJykgJiYgIWlucHV0LmdldEF0dHJpYnV0ZSgnaWQnKSkge1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgbGFiZWwuZ2V0QXR0cmlidXRlKCdmb3InKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2ZpbGUtaW5wdXQtJyArIGkpO1xuICAgICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsICdmaWxlLWlucHV0LScgKyBpKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWx3YXlzIHRoZSBjYW5jZWwgYnV0dG9uIGV4aXN0cywgYWRkcyBhIGhhbmRsZXJcbiAgICAgIGlmIChjYW5jZWwpIHtcbiAgICAgICAgY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICAgIGlmIChldnQpIHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGVtcHR5VGV4dCA9XG4gICAgICAgICAgICBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZW1wdHknKSB8fCAnTm8gZmlsZSBjaG9zZW4nO1xuXG4gICAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgICBpbnB1dC5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2Nob3NlbicpO1xuICAgICAgICAgIGxhYmVsLnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dCcpLmlubmVySFRNTCA9IGVtcHR5VGV4dDtcblxuICAgICAgICAgIHNlZWRDdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnZmlsZS5yZW1vdmVkJyk7XG4gICAgICAgICAgaW5wdXQuZGlzcGF0Y2hFdmVudChzZWVkQ3VzdG9tRXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgbGFiZWwucXVlcnlTZWxlY3RvcignLmlucHV0JykuaW5uZXJIVE1MID0gZW1wdHlUZXh0O1xuXG4gICAgICAvLyBTdGFydCBsaXN0ZW5pbmcgdGhlIGZpZWxkIGZvciBjaGFuZ2VzXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmbkNoYW5nZSk7XG4gICAgfSk7IC8vIGlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0LCBpKVxuICB9IC8vIGlmIChpbnB1dHMgIT09IG51bGwpXG59OyAvLyBzZWVkRmlsZVVwbG9hZFxuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgaWYgKHR5cGVvZiBtb2R1bGUuZXhwb3J0cy5TZWVkQ1NTID09PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzLlNlZWRDU1MgPSB7fTtcbiAgfVxuXG4gIG1vZHVsZS5leHBvcnRzLlNlZWRDU1MuZmlsZVVwbG9hZCA9IHNlZWRGaWxlVXBsb2FkO1xufSBlbHNlIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cuU2VlZENTUyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB3aW5kb3cuU2VlZENTUyA9IHt9O1xuICB9XG5cbiAgd2luZG93LlNlZWRDU1MuZmlsZVVwbG9hZCA9IHNlZWRGaWxlVXBsb2FkO1xufVxuIiwiLyoqIVxuICogU2VlZC1DU1MgLSBNb2RhbFxuICogQGF1dGhvciBSb2dlcmlvIFRhcXVlcyAoaGVsbG9AYWJ0ei5jbylcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL0FidHpMYWJzL3NlZWQtY3NzXG4gKiBAdmVyc2lvbiAyLjAuMFxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxubGV0IGZuT3BlbjtcblxubGV0IGZuQ2xvc2U7XG5cbmxldCBmbkVzYztcblxuY29uc3Qgc2VlZE1vZGFsID0gKG9wdGlvbnMpID0+IHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIERlZmF1bHQgc2V0dGluZ3NcbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgLy8gdGhlIGVsZW1lbnQgdGhhdCB0cmlnZ2VycyB0aGUgbW9kYWxcbiAgICB0cmlnZ2VyOiAnW3JvbGU9XCJtb2RhbFwiXScsXG5cbiAgICAvLyBAc2VlOiBodHRwczovL2RhbmVkZW4uZ2l0aHViLmlvL2FuaW1hdGUuY3NzL1xuICAgIC8vIGFuaW1hdGUuY3NzIGNsYXNzZXMgdG8gYmUgdXNlZFxuICAgIGNsYXNzQW5pbWF0aW9uOiB7XG4gICAgICBvcGVuOiAnZmxpcEluWCcsXG4gICAgICBjbG9zZTogJ2ZsaXBPdXRYJ1xuICAgIH1cbiAgfTtcblxuICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gIC8vIEdldCBlbGVtZW50c1xuICBsZXQgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsJyk7XG4gIGxldCBtb2RhbFRyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChvcHRpb25zLnRyaWdnZXIpO1xuXG4gIGZuQ2xvc2UgPSAobW9kYWxPYmplY3QpID0+IHtcbiAgICBpZiAoIW1vZGFsT2JqZWN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGN1c3RvbUV2ZW50O1xuICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJyk7XG4gICAgY29uc3QgbVdpbiA9IG1vZGFsT2JqZWN0LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC13aW5kb3cnKTtcblxuICAgIGlmICghbVdpbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZXMgdGhlIEVTQyBsaXN0ZW5lclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmbkVzYyk7XG5cbiAgICAvLyBSZXBsYWNlIG9wZW4gYW5pbWF0aW9uIHRvIGNsb3NlIHRoZSBtb2RhbCB3aW5kb3dcbiAgICBtV2luLmNsYXNzTGlzdC5yZXBsYWNlKFxuICAgICAgb3B0aW9ucy5jbGFzc0FuaW1hdGlvbi5vcGVuLFxuICAgICAgb3B0aW9ucy5jbGFzc0FuaW1hdGlvbi5jbG9zZVxuICAgICk7XG5cbiAgICAvLyBBZGQgYW5pbWF0aW9uIHRvIHRoZSBvdmVybGF5XG4gICAgbW9kYWxPYmplY3QuY2xhc3NMaXN0LmFkZCgnZGVsYXktMXMnKTtcbiAgICBtb2RhbE9iamVjdC5jbGFzc0xpc3QucmVwbGFjZSgnZmFkZUluJywgJ2ZhZGVPdXQnKTtcblxuICAgIC8vIFdhaXQgMiBzZWNvbmRzIGJlZm9yZSBjb21wbGV0ZSBkZSBwcm9jZXNzLlxuICAgIC8vIFRoaXMgaXMgdGhlIHRpbWUgdG8gZmluaXNoaW5nIGFsbCBhbmltYXRlLmNzcyBhbmltYXRpb25zXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBEaXNwYXRjaCB0aGUgJ21vZGFsLmNsb3NlZCcgZXZlbnRcbiAgICAgIGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdtb2RhbC5jbG9zZWQnKTtcbiAgICAgIG1vZGFsT2JqZWN0LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpO1xuXG4gICAgICAvLyBDb21wbGV0ZWx5IGhpZGUgdGhlIGNvbXBvbmVudFxuICAgICAgbW9kYWxPYmplY3QuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgICAgLy8gUmVlbmFibGUgc2Nyb2xsaW5nIGZyb20gdGhlIEhUTUxcbiAgICAgIGh0bWwuc3R5bGUub3ZlcmZsb3cgPSAnJztcbiAgICAgIC8vIFJlbW92ZSBjbG9zaW5nIGNsYXNzZXMgZnJvbSBvdmVybGF5XG4gICAgICBtb2RhbE9iamVjdC5jbGFzc0xpc3QucmVtb3ZlKCdkZWxheS0xcycsICdmYWRlT3V0Jyk7XG4gICAgICAvLyBSZW1vdmUgY2xvc2luZyBjbGFzc2VzIGZyb20gbW9kYWwgd2luZG93XG4gICAgICBtV2luLmNsYXNzTGlzdC5yZXBsYWNlKFxuICAgICAgICBvcHRpb25zLmNsYXNzQW5pbWF0aW9uLmNsb3NlLFxuICAgICAgICBvcHRpb25zLmNsYXNzQW5pbWF0aW9uLm9wZW5cbiAgICAgICk7XG4gICAgfSwgMTUwMCk7XG4gIH07IC8vIGZuQ2xvc2VcblxuICBmbk9wZW4gPSAobW9kYWxPYmplY3QpID0+IHtcbiAgICBpZiAoIW1vZGFsT2JqZWN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGN1c3RvbUV2ZW50O1xuICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJyk7XG4gICAgY29uc3QgbVdpbiA9IG1vZGFsT2JqZWN0LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC13aW5kb3cnKTtcblxuICAgIC8vIEhhbmRsZSB0aGUgRVNDIGRpc21pc3NcbiAgICBmbkVzYyA9IGZ1bmN0aW9uIGVzY0hhbmRsZXIoZSkge1xuICAgICAgY29uc3Qga2V5ID0gZS5rZXlDb2RlIHx8IGUud2hpY2g7XG5cbiAgICAgIC8vIFdoZW4gdGhlIEVTQyBrZXkgaXMgcHJlc3NlZFxuICAgICAgaWYgKGtleSA9PT0gMjcpIHtcbiAgICAgICAgZm5DbG9zZShtb2RhbE9iamVjdCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmICghbVdpbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFkZCAoYW5kIHJlbW92ZSkgYW4gRVNDIGhhbmRsZXIgZm9yIHRoZSBvdmVybGF5XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZuRXNjKTtcblxuICAgIC8vIENsZWFyIGlubGluZSBkaXNwbGF5IHN0eWxlLCBpZiBhbnlcbiAgICBtb2RhbE9iamVjdC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgLy8gQWRkIGFuaW1hdGlvbiB0byB0aGUgb3ZlcmxheVxuICAgIG1vZGFsT2JqZWN0LmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGVkJywgJ2ZhZGVJbicsICdmYXN0Jyk7XG4gICAgLy8gQWRkIGFuaW1hdGlvbiB0byB0aGUgbW9kYWwgd2luZG93XG4gICAgbVdpbi5jbGFzc0xpc3QuYWRkKCdhbmltYXRlZCcsIG9wdGlvbnMuY2xhc3NBbmltYXRpb24ub3Blbik7XG4gICAgLy8gU2hvdyB0aGUgY29tcG9uZW50XG4gICAgbW9kYWxPYmplY3QuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgIC8vIEZpbmFsbHkgcHJldmVudCBzY3JvbGxpbmdcbiAgICBodG1sLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICAvLyBXYWl0IHRoZSBhbmltYXRpb24gY29tcGxldGUgdG8gZGlzcGF0Y2ggdGhlIGV2ZW50XG4gICAgLy8gRWFjaCBhbmltYXRlLmNzcyBhbmltYXRpb24gdGFrZXMgMXNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIERpc3BhdGNoIHRoZSAnbW9kYWwub3BlbmVkJyBldmVudFxuICAgICAgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ21vZGFsLm9wZW5lZCcpO1xuICAgICAgbW9kYWxPYmplY3QuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudCk7XG4gICAgfSwgMTAwMCk7XG4gIH07IC8vIGZuT3BlblxuXG4gIGlmIChtb2RhbHMgIT09IG51bGwpIHtcbiAgICBtb2RhbHMuZm9yRWFjaCgobW9kYWwsIGkpID0+IHtcbiAgICAgIC8vIEhhbmRsZSB0aGUgZGlzbWlzcyBidXR0b25zXG4gICAgICBjb25zdCBkaXNtaXNzYWxzID0gbW9kYWwucXVlcnlTZWxlY3RvckFsbCgnW3JvbGU9XCJtb2RhbC1kaXNtaXNzXCJdJyk7XG5cbiAgICAgIC8vIEFkZCAoYW5kIHJlbW92ZSkgYSBjbGljayBoYW5kbGVyIG9uIHRoZSBvdmVybGF5XG4gICAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgZm5DbG9zZShtb2RhbCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQWRkIHByb3RvdHlwZSBmb3Igc2hvdyAob3BlbilcbiAgICAgIG1vZGFsLnNob3cgPSAoKSA9PiB7XG4gICAgICAgIGZuT3Blbihtb2RhbCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBBZGQgcHJvdG90eXBlIGZvciBoaWRlIChjbG9kZSlcbiAgICAgIG1vZGFsLmhpZGUgPSAoKSA9PiB7XG4gICAgICAgIGZuQ2xvc2UobW9kYWwpO1xuICAgICAgfTtcblxuICAgICAgaWYgKGRpc21pc3NhbHMgIT09IG51bGwpIHtcbiAgICAgICAgZGlzbWlzc2Fscy5mb3JFYWNoKChkaXNtaXNzLCBqKSA9PiB7XG4gICAgICAgICAgZGlzbWlzcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldnQpIHtcbiAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm5DbG9zZShtb2RhbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyBpZiAoZGlzbWlzc2FscyAhPT0gbnVsbClcbiAgICB9KTtcbiAgfSAvLyBpZiAobW9kYWxzICE9PSBudWxsKVxuXG4gIGlmIChtb2RhbFRyaWdnZXJzICE9PSBudWxsKSB7XG4gICAgbW9kYWxUcmlnZ2Vycy5mb3JFYWNoKCh0cmlnZ2VyLCBpKSA9PiB7XG4gICAgICB0cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICBpZiAoZXZ0KSB7XG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZWYgPSB0cmlnZ2VyLmdldEF0dHJpYnV0ZSgnZGF0YS1tb2RhbC1pZCcpO1xuXG4gICAgICAgIGlmIChyZWYgIT09IG51bGwpIHtcbiAgICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3JlZn1gKTtcbiAgICAgICAgICBmbk9wZW4obW9kYWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSAvLyBpZiAobW9kYWxUcmlnZ2VycyAhPT0gbnVsbClcblxuICBtb2RhbFRyaWdnZXJzID0gdW5kZWZpbmVkO1xuXG4gIHJldHVybiB7XG4gICAgZ2V0OiAoaWR4KSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGlkeCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgbGV0IG1vZGFsID0gZmFsc2U7XG5cbiAgICAgICAgbW9kYWxzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICBpZiAobm9kZS5pZCA9PT0gaWR4LnJlcGxhY2UoL14jLywgJycpKSB7XG4gICAgICAgICAgICBtb2RhbCA9IG5vZGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbW9kYWw7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgbW9kYWxzW2lkeF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBtb2RhbHNbaWR4XTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbn07IC8vIHNlZWRNb2RhbFxuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgaWYgKHR5cGVvZiBtb2R1bGUuZXhwb3J0cy5TZWVkQ1NTID09PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzLlNlZWRDU1MgPSB7fTtcbiAgfVxuXG4gIG1vZHVsZS5leHBvcnRzLlNlZWRDU1MubW9kYWwgPSBzZWVkTW9kYWw7XG59IGVsc2Uge1xuICBpZiAodHlwZW9mIHdpbmRvdy5TZWVkQ1NTID09PSAndW5kZWZpbmVkJykge1xuICAgIHdpbmRvdy5TZWVkQ1NTID0ge307XG4gIH1cblxuICB3aW5kb3cuU2VlZENTUy5tb2RhbCA9IHNlZWRNb2RhbDtcbn1cbiIsIi8qKiFcbiAqIFNlZWQtQ1NTIC0gT2ZmLUNhbnZhcy5cbiAqIEBhdXRob3IgUm9nZXJpbyBUYXF1ZXMgKGhlbGxvQGFidHouY28pXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9BYnR6TGFicy9zZWVkLWNzc1xuICogQHZlcnNpb24gMi4wLjBcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmNvbnN0IHNlZWRPZmZDYW52YXMgPSBmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGNvbnN0IGZuVG9nZ2xlID0gKGNhbnZhc0lELCB0cmlnZ2VyRWxlbWVudCkgPT4ge1xuICAgIGxldCBjdXN0b21FdmVudDtcblxuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2NhbnZhc0lELnJlcGxhY2UoL14jLywgJycpfWApO1xuXG4gICAgY29uc3QgdHJpZ2dlciA9XG4gICAgICB0cmlnZ2VyRWxlbWVudCB8fFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYFtyb2xlPVwib2ZmY2FudmFzXCJdW2RhdGEtaWQ9XCIke2NhbnZhc0lELnJlcGxhY2UoL14jLywgJycpfVwiXWBcbiAgICAgICk7XG5cbiAgICBpZiAoY2FudmFzICE9PSBudWxsKSB7XG4gICAgICBjYW52YXMuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuXG4gICAgICAvLyBQcmV2ZW50cyBzY3JvbGxpbmcgdGhlIEhUTUxcbiAgICAgIGlmIChjYW52YXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykpIHtcbiAgICAgICAgaWYgKHRyaWdnZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAvLyBBZGQgdGhlICd0cmlnZ2VyZWQnIGNsYXNzIHRvIHRoZSBlbGVtZW50IHdoaWNoIGhhcyB0cmlnZ2VyZWQgdGhlIG9mZmNhbnZhcy5cbiAgICAgICAgICB0cmlnZ2VyLmNsYXNzTGlzdC5hZGQoJ3RyaWdnZXJlZCcpO1xuICAgICAgICB9IC8vIGlmICh0cmlnZ2VyICE9PSBudWxsKVxuXG4gICAgICAgIC8vIFByZXZlbnRzIG1haW4gdG8gc2Nyb2xsXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSAndHJpZ2dlcmVkJyBjbGFzcyBmb3IgYW55IGV4aXN0aW5nIHRyaWdnZXIgd2hpY2ggcmVmZXJzIGdpdmVuIG9mZmNhbnZhcy5cbiAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICAgICAgIGBbcm9sZT1cIm9mZmNhbnZhc1wiXVtkYXRhLWlkPVwiJHtjYW52YXNJRC5yZXBsYWNlKC9eIy8sICcnKX1cIl1gXG4gICAgICAgICAgKVxuICAgICAgICAgIC5mb3JFYWNoKCh0Z3IpID0+IHtcbiAgICAgICAgICAgIHRnci5jbGFzc0xpc3QucmVtb3ZlKCd0cmlnZ2VyZWQnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZS1lbmFibGVzIG1haW4gc2Nyb2xsaW5nXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKS5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuICAgICAgfVxuXG4gICAgICAvLyBXYWl0IHVudGlsIGFuaW1hdGlvbiBpcyBjb21wbGV0ZSB0byBkaXNwYXRjaCB0aGUgZXZlbnRcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoY2FudmFzLmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpKSB7XG4gICAgICAgICAgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NhbnZhcy5vcGVuZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2FudmFzLmNsb3NlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGlzcGF0Y2ggdGhlICdjYW52YXMub3BlbmVkJy8gJ2NhbnZhcy5jbG9zZWQnIGV2ZW50c1xuICAgICAgICBjYW52YXMuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudCk7XG4gICAgICB9LCAzMDApO1xuICAgIH0gLy8gaWYgKGNhbnZhcyAhPT0gbnVsbClcbiAgfTsgLy8gZm5Ub2dnbGVcblxuICBjb25zdCBmblRyaWdnZXJDbGljayA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICBmblRvZ2dsZShcbiAgICAgIGV2dC5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpIHx8ICdvZmZjYW52YXMnLFxuICAgICAgZXZ0LmN1cnJlbnRUYXJnZXRcbiAgICApO1xuICB9OyAvLyBmblRyaWdnZXJDbGlja1xuXG4gIC8vIEZpbmQgYWxsIGV4aXN0aW5nIHRyaWdnZXJzXG4gIGNvbnN0IHRyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3JvbGU9XCJvZmZjYW52YXNcIl0nKTtcblxuICAvLyBGaW5kIGFsbCBleGlzdGluZyBvZmZjYW52YXNcbiAgY29uc3QgY2FudmFzZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub2ZmY2FudmFzJyk7XG5cbiAgaWYgKHRyaWdnZXJzICE9PSBudWxsKSB7XG4gICAgdHJpZ2dlcnMuZm9yRWFjaChmdW5jdGlvbih0cmlnZ2VyLCBpKSB7XG4gICAgICB0cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZm5UcmlnZ2VyQ2xpY2spO1xuICAgIH0pOyAvLyB0cmlnZ2Vycy5mb3JFYWNoKGZ1bmN0aW9uKHRyaWdnZXIsIGkpXG4gIH0gLy8gaWYgKHRyaWdnZXJzICE9PSBudWxsKVxuXG4gIGlmIChjYW52YXNlcyAhPT0gbnVsbCkge1xuICAgIGNhbnZhc2VzLmZvckVhY2goKGNhbnZhcywgaSkgPT4ge1xuICAgICAgLy8gQXR0YWNoIG1ldGhvZCBmb3Igb3BlbmluZ1xuICAgICAgY2FudmFzLm9wZW4gPSAoKSA9PiB7XG4gICAgICAgIGZuVG9nZ2xlKGNhbnZhcy5nZXRBdHRyaWJ1dGUoJ2lkJykgfHwgJ29mZmNhbnZhcycpO1xuICAgICAgfTsgLy8gb3BlblxuXG4gICAgICAvLyBBdHRhY2ggbWV0aG9kIGZvciBjbG9zaW5nXG4gICAgICBjYW52YXMuY2xvc2UgPSAoKSA9PiB7fTsgLy8gY2xvc2VcbiAgICB9KTsgLy8gY2FudmFzZXMuZm9yRWFjaCgoY2FudmFzLCBpKVxuICB9IC8vIGlmIChjYW52YXNlcyAhPT0gbnVsbClcblxuICByZXR1cm4ge1xuICAgIGdldDogKGlkeCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBpZHggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGxldCBjYW52YXMgPSBmYWxzZTtcblxuICAgICAgICBjYW52YXNlcy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgaWYgKG5vZGUuaWQgPT09IGlkeC5yZXBsYWNlKC9eIy8sICcnKSkge1xuICAgICAgICAgICAgY2FudmFzID0gbm9kZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgY2FudmFzW2lkeF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBjYW52YXNbaWR4XTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbn07IC8vIHNlZWRPZmZDYW52YXNcblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gIGlmICh0eXBlb2YgbW9kdWxlLmV4cG9ydHMuU2VlZENTUyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cy5TZWVkQ1NTID0ge307XG4gIH1cblxuICBtb2R1bGUuZXhwb3J0cy5TZWVkQ1NTLm9mZkNhbnZhcyA9IHNlZWRPZmZDYW52YXM7XG59IGVsc2Uge1xuICBpZiAodHlwZW9mIHdpbmRvdy5TZWVkQ1NTID09PSAndW5kZWZpbmVkJykge1xuICAgIHdpbmRvdy5TZWVkQ1NTID0ge307XG4gIH1cblxuICB3aW5kb3cuU2VlZENTUy5vZmZDYW52YXMgPSBzZWVkT2ZmQ2FudmFzO1xufVxuIiwiLyoqIVxuICogU2VlZC1DU1MgLSBBZGRpdGlvbmFsIGZlYXR1cmVzIGZvciBIVE1MIFRleHRhcmVhcy5cbiAqIEBhdXRob3IgUm9nZXJpbyBUYXF1ZXMgKGhlbGxvQGFidHouY28pXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9BYnR6TGFicy9zZWVkLWNzc1xuICogQHZlcnNpb24gMi4wLjBcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmNvbnN0IHNlZWRUZXh0YXJlYSA9IGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gRmluZCBhbGwgc2VlZC1maWxlIGlucHV0cy5cbiAgY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpZWxkID4gdGV4dGFyZWEnKTtcblxuICBpZiAoaW5wdXRzICE9PSBudWxsKSB7XG4gICAgaW5wdXRzLmZvckVhY2goZnVuY3Rpb24oaW5wdXQsIGkpIHtcbiAgICAgIGxldCBtYXhMZW5ndGggPSAwO1xuXG4gICAgICBjb25zdCBwYXJlbnQgPSBpbnB1dC5wYXJlbnROb2RlO1xuICAgICAgY29uc3QgY291bnRlckxhYmVsID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPVwiY291bnRlclwiXScpO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPVxuICAgICAgICBjb3VudGVyTGFiZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXRlbXBsYXRlJykgfHxcbiAgICAgICAgJ1R5cGVkICVhIG91dCBvZiAlYi4gUmVtYWluaW5nICVjLic7XG5cbiAgICAgIGNvbnN0IGZuQ2FsYyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdHlwZWQgPSBpbnB1dC52YWx1ZS5yZXBsYWNlKC9bXFxuXFxyXS9nLCAnJykubGVuZ3RoO1xuICAgICAgICBjb25zdCByZW1haW5pbmcgPSBtYXhMZW5ndGggLSB0eXBlZDtcbiAgICAgICAgY29uc3QgbWluTGVuZ3RoID0gTWF0aC5mbG9vcihtYXhMZW5ndGggKiAwLjEpO1xuXG4gICAgICAgIGNvdW50ZXJMYWJlbC5pbm5lckhUTUwgPSB0ZW1wbGF0ZVxuICAgICAgICAgIC5yZXBsYWNlKCclYScsIHR5cGVkKVxuICAgICAgICAgIC5yZXBsYWNlKCclYicsIG1heExlbmd0aClcbiAgICAgICAgICAucmVwbGFjZShcbiAgICAgICAgICAgICclYycsXG4gICAgICAgICAgICByZW1haW5pbmcgPD0gbWluTGVuZ3RoXG4gICAgICAgICAgICAgID8gYDxzcGFuIGNsYXNzPVwicmVkXCIgPiR7cmVtYWluaW5nfTwvc3Bhbj5gXG4gICAgICAgICAgICAgIDogcmVtYWluaW5nXG4gICAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIG1heExlbmd0aCA9IGlucHV0LmdldEF0dHJpYnV0ZSgnbWF4bGVuZ3RoJyk7XG5cbiAgICAgIC8vIElnbm9yZSBpZiBtYXhsZW5ndGggaXMgbm90IGdpdmVuXG4gICAgICBpZiAoIW1heExlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgbGltaXQgaXMgYW4gaW50ZWdlclxuICAgICAgbWF4TGVuZ3RoID0gcGFyc2VJbnQobWF4TGVuZ3RoKTtcblxuICAgICAgLy8gQXR0YWNoIHRoZSBoYW5kbGVyc1xuICAgICAgJ2tleXByZXNzIGtleWRvd24ga2V5dXAnLnNwbGl0KCcgJykuZm9yRWFjaCgoZXZ0KSA9PiB7XG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoZXZ0LCBmbkNhbGMsIHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEluaXRpYWxpemUgdGhlIHV0aWxpdHkgbGFiZWxcbiAgICAgIGZuQ2FsYygpO1xuICAgIH0pOyAvLyBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpbnB1dCwgaSlcbiAgfSAvLyBpZiAoaW5wdXRzICE9PSBudWxsKVxufTsgLy8gc2VlZFRleHRhcmVhXG5cbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICBpZiAodHlwZW9mIG1vZHVsZS5leHBvcnRzLlNlZWRDU1MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMuU2VlZENTUyA9IHt9O1xuICB9XG5cbiAgbW9kdWxlLmV4cG9ydHMuU2VlZENTUy50ZXh0QXJlYSA9IHNlZWRUZXh0YXJlYTtcbn0gZWxzZSB7XG4gIGlmICh0eXBlb2Ygd2luZG93LlNlZWRDU1MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgd2luZG93LlNlZWRDU1MgPSB7fTtcbiAgfVxuXG4gIHdpbmRvdy5TZWVkQ1NTLnRleHRBcmVhID0gc2VlZFRleHRhcmVhO1xufVxuIl19
