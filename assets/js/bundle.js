"use strict";!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}return"function"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,void(window.CustomEvent=t))}();
"use strict";var seedFileUpload=function(){var e,t=function(t){t&&t.preventDefault();var i=!1,n=this,r=n.nextElementSibling;n.files&&n.files.length>1?i=(n.getAttribute("data-multiple")||"{count} files").replace("{count}",n.files.length):n.value.trim().length>0&&(i=n.value.split("\\").pop()),i&&(r.querySelector(".input").innerHTML=i),""!==n.value&&(e=new CustomEvent("file.chosen"),n.parentNode.classList.add("chosen"),n.dispatchEvent(e))},i=document.querySelectorAll('.seed-file > [type="file"]');return null!==i&&i.forEach(function(i,n){var r=i.nextElementSibling,l=r.querySelector(".cancel"),u=i.getAttribute("data-empty")||"No file chosen";r&&(i.getAttribute("id")&&i.getAttribute("id")!==r.getAttribute("for")?r.setAttribute("for",i.getAttribute("id")):r.getAttribute("for")&&!i.getAttribute("id")?i.setAttribute("id",r.getAttribute("for")):r.getAttribute("for")||i.getAttribute("id")||(i.setAttribute("id","file-input-"+n),r.setAttribute("for","file-input-"+n)),l&&l.addEventListener("click",function(t){t&&t.preventDefault();var n=i.getAttribute("data-empty")||"No file chosen";i.value="",i.parentNode.classList.remove("chosen"),r.querySelector(".input").innerHTML=n,e=new CustomEvent("file.removed"),i.dispatchEvent(e)}),r.querySelector(".input").innerHTML=u,i.addEventListener("change",t))}),{get:function(e){if("string"==typeof e){var t=!1;return i.forEach(function(i){if(i.id===e.replace(/^#/,""))return void(t=i)}),t}return"undefined"!=typeof i[e]&&i[e]}}};"undefined"!=typeof module&&(module.exports.fileUpload=fileUpload),"undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.fileUpload=seedFileUpload;
"use strict";var fnOpen,fnClose,fnEsc,seedModal=function(e){var n={trigger:'[role="modal"]',classAnimation:{open:"bounceInDown",close:"bounceOutUp"}};e=Object.assign({},n,e);var o=document.querySelectorAll(".modal"),t=document.querySelectorAll(e.trigger);return fnClose=function(n){if(n){var o,t=document.querySelector("html"),a=n.querySelector(".modal-window");a&&(document.removeEventListener("keydown",fnEsc),a.classList.replace(e.classAnimation.open,e.classAnimation.close),n.classList.add("delay-1s"),n.classList.replace("fadeIn","fadeOut"),setTimeout(function(){o=new CustomEvent("modal.closed"),n.dispatchEvent(o),n.classList.add("hide"),t.style.overflow="",n.classList.remove("delay-1s","fadeOut"),a.classList.replace(e.classAnimation.close,e.classAnimation.open)},600))}},fnOpen=function(n){if(n){var o,t=document.querySelector("html"),a=n.querySelector(".modal-window");fnEsc=function(e){var o=e.keyCode||e.which;27===o&&fnClose(n)},a&&(document.addEventListener("keydown",fnEsc),n.style.display="",n.classList.add("animated","fadeIn","fast"),a.classList.add("animated",e.classAnimation.open),n.classList.remove("hide"),t.style.overflow="hidden",setTimeout(function(){o=new CustomEvent("modal.opened"),n.dispatchEvent(o)},100))}},null!==o&&o.forEach(function(e,n){var o=e.querySelectorAll('[role="modal-dismiss"]');e.addEventListener("click",function(n){for(var o=n.target,t=!1;"html"!==o.nodeName.toLowerCase();){if(o.classList.contains("modal-window")){t=!0;break}o=o.parentNode}t||fnClose(e)}),e.show=function(){fnOpen(e)},e.hide=function(){fnClose(e)},null!==o&&o.forEach(function(n,o){n.addEventListener("click",function(n){n&&(n.preventDefault(),n.stopPropagation()),fnClose(e)})})}),null!==t&&t.forEach(function(e,n){e.addEventListener("click",function(n){n&&n.preventDefault();var o=e.getAttribute("data-modal-id");if(null!==o){var t=document.querySelector("#".concat(o));fnOpen(t)}})}),t=void 0,{get:function(e){if("string"==typeof e){var n=!1;return o.forEach(function(o){if(o.id===e.replace(/^#/,""))return void(n=o)}),n}return"undefined"!=typeof o[e]&&o[e]}}};"undefined"!=typeof module&&(module.exports.seedModal=seedModal),"undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.modal=seedModal;
"use strict";var seedOffCanvas=function(){var e="canvas-opened",t=function(t){for(var a=t.target,c=!1,o=document.querySelector("html");!c&&a&&a.parentNode;)a.classList&&!a.classList.contains("offcanvas")?a=a.parentNode:a.classList&&(c=!0);!c&&o.classList.contains(e)&&n(o.getAttribute("data-canvas-id"))},n=function(n,a){var c,o=document.querySelector("#".concat(n.replace(/^#/,""))),s=a||document.querySelector('[role="offcanvas"][data-id="'.concat(n.replace(/^#/,""),'"]'));if(null!==o){var r=document.querySelector("html");r.classList.contains(e)?(o.classList.remove("open"),document.querySelectorAll('[role="offcanvas"][data-id="'.concat(n.replace(/^#/,""),'"]')).forEach(function(e){e.classList.remove("triggered")}),r.removeEventListener("click",t),r.style.overflow=""):(o.classList.add("open"),null!==s&&s.classList.add("triggered"),r.addEventListener("click",t),r.style.overflow="hidden"),setTimeout(function(){o.classList.contains("open")?(r.classList.add(e),r.setAttribute("data-canvas-id",n.replace(/^#/,"")),c=new CustomEvent("canvas.opened")):(r.classList.remove(e),c=new CustomEvent("canvas.closed")),o.dispatchEvent(c)},300)}},a=function(e){e&&e.preventDefault(),n(e.currentTarget.getAttribute("data-id")||"offcanvas",e.currentTarget)},c=document.querySelectorAll('[role="offcanvas"]'),o=document.querySelectorAll(".offcanvas");return null!==c&&c.forEach(function(e,t){e.addEventListener("click",a,!1)}),null!==o&&o.forEach(function(e,t){e.open=function(){n(e.getAttribute("id")||"offcanvas")},e.close=function(){}}),{get:function(e){if("string"==typeof e){var t=!1;return o.forEach(function(n){if(n.id===e.replace(/^#/,""))return void(t=n)}),t}return"undefined"!=typeof canvas[e]&&canvas[e]}}};"undefined"!=typeof module&&(module.exports.seedOffCanvas=seedOffCanvas),"undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.offCanvas=seedOffCanvas;
"use strict";var seedScroll=function(e){var t=null,n=null,o=0,i={spyScrollSelector:"nav a.smooth",revealElementSelector:".reveal",revealSpaceOffset:.2,revealWhenVisible:"visible",revealSingleAnimation:"visible-once",revealWhenHidden:"hidden",gutter:50},l=function(e){t.forEach(function(e){e.classList.remove("active")}),e&&e.classList.add("active")},r=function(e){var t=document.body.getBoundingClientRect(),n=e?e.getBoundingClientRect():0;return{top:Math.ceil(n.top-t.top),left:Math.ceil(n.left-t.left)}},c=function(n){if(window.scrollY===o){var i=new CustomEvent("scroll.complete");document.dispatchEvent(i)}if(t){var c=r(t[0]);window.scrollY<c.top&&l(),t.forEach(function(t,n){try{var o=t.getAttribute("href")||t.getAttribute("data-target"),i=document.querySelector(o),c=r(i);if(c.top-e.gutter<=window.scrollY)return void l(t)}catch(d){}})}"function"==typeof window.oldOnscroll&&window.oldOnscroll(n)},d=function(t){t&&t.preventDefault();var n=t.currentTarget.getAttribute("href")||t.currentTarget.getAttribute("data-target");if(n){var i=document.querySelector(n);o=r(i).top-e.gutter,window.scrollTo({behavior:"smooth",left:0,top:o})}},a=function(){var t=function(){return{width:window.document.documentElement.clientWidth,height:window.document.documentElement.clientHeight}},o=function(){return{x:window.pageXOffset,y:window.pageYOffset}},i=function(e){var t=e,n=0,o=0,i=t.offsetWidth,l=t.offsetHeight;do isNaN(t.offsetTop)||(n+=t.offsetTop),isNaN(t.offsetLeft)||(o+=t.offsetLeft);while(null!==(t=t.offsetParent));return{top:n,left:o,height:l,width:i}},l=function(n){var l=t(),r=o(),c=i(n),d=e.revealSpaceOffset,a=function(){var e=c.top+c.height*d,t=c.left+c.width*d,n=c.left+c.width-c.width*d,o=c.top+c.height-c.height*d,i=r.y+0,a=r.x+0,s=r.y-0+l.height,f=r.x-0+l.width;return e<s&&o>i&&t>a&&n<f};return a()},r=function(){if(n)for(var t=0;t<n.length;t+=1)l(n[t])?(e.revealWhenVisible&&n[t].classList.add(e.revealWhenVisible),e.revealWhenHidden&&n[t].classList.remove(e.revealWhenHidden)):n[t].classList.contains(e.revealSingleAnimation)===!1&&(e.revealWhenHidden&&n[t].classList.add(e.revealWhenHidden),e.revealWhenVisible&&n[t].classList.remove(e.revealWhenVisible))},c=function(e){r()};window.addEventListener("scroll",c,!1),window.addEventListener("resize",c,!1)};return window.oldOnscroll=window.onscroll,window.onscroll=c,e=Object.assign({},i,e),t=document.querySelectorAll(e.spyScrollSelector),n=document.querySelectorAll(e.revealElementSelector),null!==t&&t.forEach(function(e,t){e.addEventListener("click",d,!1)}),n&&a(),{}};"undefined"!=typeof module&&(module.exports.seedScroll=seedScroll),"undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.scroll=seedScroll;
"use strict";var seedTextarea=function(){var e=document.querySelectorAll(".field > textarea");null!==e&&e.forEach(function(e,t){var a=0,r=e.parentNode,n=r.querySelector('[role="counter"]'),o=n.getAttribute("data-template")||"Typed %a out of %b. Remaining %c.",d=function(){var t=e.value.replace(/[\n\r]/g,"").length,r=a-t,d=Math.floor(.1*a);n.innerHTML=o.replace("%a",t).replace("%b",a).replace("%c",r<=d?'<span class="red" >'.concat(r,"</span>"):r)};a=e.getAttribute("maxlength"),a&&(a=parseInt(a),"keypress keydown keyup".split(" ").forEach(function(t){e.addEventListener(t,d,!0)}),d())})};"undefined"!=typeof module&&(module.exports.seedTextarea=seedTextarea),"undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.textArea=seedTextarea;
"use strict";!function(){var e=function(){$("#add-col").off("click").on("click",function(e){e&&e.preventDefault();var s=$("#flexible-cols"),l=s.find(".col");if(l.length<12){var n=l.length,t=12-n,a="sm-"+t;s.find(".col").removeClass("sm-1 sm-2 sm-3 sm-4 sm-5 sm-6 sm-7 sm-8 sm-9 sm-10 sm-11 sm-12"),s.find(".col:last").after($("<div />",{"class":"col align-center"}).html(n+1)),s.find(".col").each(function(){$(this).addClass("sm-1")}),s.find(".col:last").toggleClass("sm-1 "+a),$("#rem-col").attr("disabled",!1)}l.length>=11&&$(this).attr("disabled",!0)}),$("#rem-col").off("click").on("click",function(e){e&&e.preventDefault();var s=$("#flexible-cols"),l=s.find(".col");if(l.length>1){var n=l.length-1,t="sm-"+(12-n+1);s.find(".col:last").remove(),s.find(".col:last").removeClass("sm-1 sm-2 sm-3 sm-4 sm-5 sm-6 sm-7 sm-8 sm-9 sm-10 sm-11 sm-12").addClass(t),$("#add-col").attr("disabled",!1)}l.length<=2&&$(this).attr("disabled",!0)})};if(e(),"undefined"!=typeof SeedCSS){var s=SeedCSS.modal(),l=s.get("#modal"),n=SeedCSS.offCanvas(),t=n.get("#sidenav"),a=SeedCSS.fileUpload(),o=a.get("#file"),r={spyScrollSelector:"a.smooth",revealElementSelector:".reveal.animated",revealSingleAnimation:"animated-once",revealWhenVisible:"bounceIn",revealWhenHidden:"bounceOut",revealSpaceOffset:2.5,gutter:150};if(SeedCSS.textArea(),SeedCSS.scroll(r),l&&(l.addEventListener("modal.opened",function(){console.log("Modal Opened")}),l.addEventListener("modal.closed",function(){console.log("Modal Closed")})),t){var d=document.querySelector("#offcanvas-style");d&&d.addEventListener("change",function(){"overlay"===d.value?t.classList.add("overlay"):t.classList.remove("overlay")}),t.addEventListener("canvas.opened",function(){console.log("Side Menu Opened")}),t.addEventListener("canvas.closed",function(){console.log("Side Menu Closed")}),document.addEventListener("scroll.complete",function(){console.log("Finished smooth scrolling")})}o&&(o.addEventListener("file.chosen",function(e){console.log("File(s) added to FileUpload.");var s=e.currentTarget.parentNode.querySelector("span.error");e.currentTarget.parentNode.classList.add("has-feedback"),e.currentTarget.classList.add("success"),e.currentTarget.classList.remove("error"),s&&s.remove()}),o.addEventListener("file.removed",function(e){console.log("File(s) removed from FileUpload.");var s=document.createElement("span"),l=e.currentTarget.parentNode.querySelector("span.error");s.classList.add("error"),s.innerHTML="Select at least one file.",e.currentTarget.parentNode.classList.add("has-feedback"),e.currentTarget.classList.add("error"),e.currentTarget.classList.remove("success"),l||e.currentTarget.parentNode.appendChild(s)}))}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbUV2ZW50UG9seWZpbGwuanMiLCJzZWVkRmlsZVVwbG9hZC5qcyIsInNlZWRNb2RhbC5qcyIsInNlZWRPZmZDYW52YXMuanMiLCJzZWVkU2Nyb2xsLmpzIiwic2VlZFRleHRhcmVhLmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJDdXN0b21FdmVudCIsImV2ZW50IiwicGFyYW1zIiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJkZXRhaWwiLCJ1bmRlZmluZWQiLCJldnQiLCJkb2N1bWVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50Iiwid2luZG93IiwicHJvdG90eXBlIiwiRXZlbnQiLCJzZWVkRmlsZVVwbG9hZCIsInNlZWRDdXN0b21FdmVudCIsImZuQ2hhbmdlIiwicHJldmVudERlZmF1bHQiLCJmaWxlTmFtZSIsImlucHV0IiwidGhpcyIsImxhYmVsIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiZmlsZXMiLCJsZW5ndGgiLCJnZXRBdHRyaWJ1dGUiLCJyZXBsYWNlIiwidmFsdWUiLCJ0cmltIiwic3BsaXQiLCJwb3AiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwicGFyZW50Tm9kZSIsImNsYXNzTGlzdCIsImFkZCIsImRpc3BhdGNoRXZlbnQiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImkiLCJjYW5jZWwiLCJlbXB0eVRleHQiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwiZ2V0IiwiaWR4IiwiZmlsZVVwbG9hZCIsIm5vZGUiLCJpZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJTZWVkQ1NTIiwiZm5PcGVuIiwiZm5DbG9zZSIsImZuRXNjIiwic2VlZE1vZGFsIiwib3B0aW9ucyIsImRlZmF1bHRPcHRpb25zIiwidHJpZ2dlciIsImNsYXNzQW5pbWF0aW9uIiwib3BlbiIsImNsb3NlIiwiT2JqZWN0IiwiYXNzaWduIiwibW9kYWxzIiwibW9kYWxUcmlnZ2VycyIsIm1vZGFsT2JqZWN0IiwiY3VzdG9tRXZlbnQiLCJodG1sIiwibVdpbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRUaW1lb3V0Iiwic3R5bGUiLCJvdmVyZmxvdyIsImUiLCJrZXkiLCJrZXlDb2RlIiwid2hpY2giLCJkaXNwbGF5IiwibW9kYWwiLCJkaXNtaXNzYWxzIiwidGFyZ2V0IiwiYWJvcnQiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwiY29udGFpbnMiLCJzaG93IiwiaGlkZSIsImRpc21pc3MiLCJqIiwic3RvcFByb3BhZ2F0aW9uIiwicmVmIiwiY29uY2F0Iiwic2VlZE9mZkNhbnZhcyIsIm9wZW5lZE9mZmNhbnZhc0NsYXNzIiwiZm5PdXRzaWRlQ2xpY2tIYW5kbGVyIiwiZXYiLCJhIiwiZm91bmQiLCJmblRvZ2dsZSIsImNhbnZhc0lEIiwidHJpZ2dlckVsZW1lbnQiLCJjYW52YXMiLCJ0Z3IiLCJmblRyaWdnZXJDbGljayIsImN1cnJlbnRUYXJnZXQiLCJ0cmlnZ2VycyIsImNhbnZhc2VzIiwib2ZmQ2FudmFzIiwic2VlZFNjcm9sbCIsInJldmVhbGVycyIsInNjcm9sbFRhcmdldCIsInNweVNjcm9sbFNlbGVjdG9yIiwicmV2ZWFsRWxlbWVudFNlbGVjdG9yIiwicmV2ZWFsU3BhY2VPZmZzZXQiLCJyZXZlYWxXaGVuVmlzaWJsZSIsInJldmVhbFNpbmdsZUFuaW1hdGlvbiIsInJldmVhbFdoZW5IaWRkZW4iLCJndXR0ZXIiLCJmblVwZGF0ZUFjdGl2ZVRyaWdnZXIiLCJlbGVtIiwiZWwiLCJmbkdldE9mZnNldCIsImJvZHlPZmZzZXQiLCJib2R5IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwib2Zmc2V0IiwidG9wIiwiTWF0aCIsImNlaWwiLCJsZWZ0IiwiZm5TY3JvbGxDb21wbGV0ZSIsInNjcm9sbFkiLCJmaXJzdEVsZW1lbnRPZmZzZXQiLCJ0YXJnZXRJRCIsIm9sZE9uc2Nyb2xsIiwic2Nyb2xsVG8iLCJiZWhhdmlvciIsImZuV2F0Y2hFbGVtZW50cyIsImdldFZpZXdwb3J0U2l6ZSIsIndpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJnZXRDdXJyZW50U2Nyb2xsIiwieCIsInBhZ2VYT2Zmc2V0IiwieSIsInBhZ2VZT2Zmc2V0IiwiZ2V0RWxlbUluZm8iLCJvZmZzZXRUb3AiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJpc05hTiIsIm9mZnNldFBhcmVudCIsImlzRWxlbWVudFZpc2libGUiLCJ2aWV3cG9ydFNpemUiLCJjdXJyZW50U2Nyb2xsIiwiZUluZiIsInNwYWNlT2Zmc2V0IiwiY2hlY2tCb3VuZGFyaWVzIiwiZVRvcCIsImVMZWZ0IiwiZVJpZ2h0IiwiZUJvdHRvbSIsIndUb3AiLCJ3TGVmdCIsIndCb3R0b20iLCJ3UmlnaHQiLCJ0b2dnbGVFbGVtZW50Iiwic2Nyb2xsUmVzaXplSGFuZGxlciIsIm9uc2Nyb2xsIiwic2Nyb2xsIiwic2VlZFRleHRhcmVhIiwibWF4TGVuZ3RoIiwicGFyZW50IiwiY291bnRlckxhYmVsIiwidGVtcGxhdGUiLCJmbkNhbGMiLCJ0eXBlZCIsInJlbWFpbmluZyIsIm1pbkxlbmd0aCIsImZsb29yIiwicGFyc2VJbnQiLCJ0ZXh0QXJlYSIsImVuYWJsZUdyaWRQbGF5Z3JvdW5kIiwiJCIsIm9mZiIsIm9uIiwicm93IiwiY29scyIsImZpbmQiLCJjb3VudCIsInJlbWFpbiIsImxhc3RDbGFzcyIsInJlbW92ZUNsYXNzIiwiYWZ0ZXIiLCJjbGFzcyIsImVhY2giLCJhZGRDbGFzcyIsInRvZ2dsZUNsYXNzIiwiYXR0ciIsIm0iLCJjIiwiZnUiLCJ1cGxvYWQiLCJzY3JvbGxPcHRpb25zIiwiY29uc29sZSIsImxvZyIsImNhbnZhc1N0eWxlU3dpdGNoZXIiLCJlcnJvciIsImxibCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCJdLCJtYXBwaW5ncyI6IkFBQUEsY0FLQSxXQUdFLFFBQVNBLEdBQVlDLEVBQU9DLEdBQzFCQSxFQUFTQSxJ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QUFpQixlQUFnQixTQUFDckMsR0FDdkM0TSxRQUFRQyxJQUFJLG1DQUVaLElBQU1HLEdBQU0vTSxTQUFTZ04sY0FBYyxRQUM3QkYsRUFBUS9NLEVBQUlvRyxjQUFjMUUsV0FBV0YsY0FBYyxhQUV6RHdMLEdBQUlyTCxVQUFVQyxJQUFJLFNBQ2xCb0wsRUFBSXZMLFVBQVksNEJBR2hCekIsRUFBSW9HLGNBQWMxRSxXQUFXQyxVQUFVQyxJQUFJLGdCQUMzQzVCLEVBQUlvRyxjQUFjekUsVUFBVUMsSUFBSSxTQUdoQzVCLEVBQUlvRyxjQUFjekUsVUFBVVcsT0FBTyxXQUU5QnlLLEdBQ0gvTSxFQUFJb0csY0FBYzFFLFdBQVd3TCxZQUFZRiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiohXG4gKiBBIHNpbXBsZSBwb2x5ZmlsbCBmb3IgQ3VzdG9tRXZlbnRcbiAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0N1c3RvbUV2ZW50L0N1c3RvbUV2ZW50I1BvbHlmaWxsXG4gKi9cblxuKGZ1bmN0aW9uICgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQgPT09ICdmdW5jdGlvbicpIHJldHVybiBmYWxzZTtcblxuICBmdW5jdGlvbiBDdXN0b21FdmVudChldmVudCwgcGFyYW1zKSB7XG4gICAgcGFyYW1zID0gcGFyYW1zIHx8IHsgYnViYmxlczogZmFsc2UsIGNhbmNlbGFibGU6IGZhbHNlLCBkZXRhaWw6IHVuZGVmaW5lZCB9O1xuICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICBldnQuaW5pdEN1c3RvbUV2ZW50KFxuICAgICAgZXZlbnQsXG4gICAgICBwYXJhbXMuYnViYmxlcyxcbiAgICAgIHBhcmFtcy5jYW5jZWxhYmxlLFxuICAgICAgcGFyYW1zLmRldGFpbFxuICAgICk7XG4gICAgcmV0dXJuIGV2dDtcbiAgfVxuXG4gIEN1c3RvbUV2ZW50LnByb3RvdHlwZSA9IHdpbmRvdy5FdmVudC5wcm90b3R5cGU7XG5cbiAgd2luZG93LkN1c3RvbUV2ZW50ID0gQ3VzdG9tRXZlbnQ7XG59KSgpO1xuIiwiLyoqIVxuICogU2VlZC1DU1MgLSBDdXN0b20gSFRNTCBJbnB1dCBGaWxlLlxuICogQGNvcHlyaWdodCAyMDE5LCBBYnR6IExhYnNcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmNvbnN0IHNlZWRGaWxlVXBsb2FkID0gZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBsZXQgc2VlZEN1c3RvbUV2ZW50O1xuXG4gIGNvbnN0IGZuQ2hhbmdlID0gZnVuY3Rpb24gZm5DaGFuZ2UoZXZ0KSB7XG4gICAgaWYgKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgbGV0IGZpbGVOYW1lID0gZmFsc2U7XG5cbiAgICBjb25zdCBpbnB1dCA9IHRoaXM7XG4gICAgY29uc3QgbGFiZWwgPSBpbnB1dC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICAvLyBXaGVuIG11bHRpcGxlIGZpbGVzIGFyZSBzZWxlY3RlZFxuICAgIGlmIChpbnB1dC5maWxlcyAmJiBpbnB1dC5maWxlcy5sZW5ndGggPiAxKSB7XG4gICAgICBmaWxlTmFtZSA9IChpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbXVsdGlwbGUnKSB8fCAne2NvdW50fSBmaWxlcycpLnJlcGxhY2UoJ3tjb3VudH0nLCBpbnB1dC5maWxlcy5sZW5ndGgpO1xuICAgIH1cblxuICAgIC8vIFdoZW4gb25seSBvbmUgZmlsZSBpcyBzZWxlY3RlZFxuICAgIGVsc2UgaWYgKGlucHV0LnZhbHVlLnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgICBmaWxlTmFtZSA9IGlucHV0LnZhbHVlLnNwbGl0KCdcXFxcJykucG9wKCk7XG4gICAgfVxuXG4gICAgaWYgKGZpbGVOYW1lKSB7XG4gICAgICBsYWJlbC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQnKS5pbm5lckhUTUwgPSBmaWxlTmFtZTtcbiAgICB9XG5cbiAgICBpZiAoaW5wdXQudmFsdWUgIT09ICcnKSB7XG4gICAgICBzZWVkQ3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2ZpbGUuY2hvc2VuJyk7XG4gICAgICBpbnB1dC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2Nob3NlbicpO1xuICAgICAgaW5wdXQuZGlzcGF0Y2hFdmVudChzZWVkQ3VzdG9tRXZlbnQpO1xuICAgIH1cbiAgfTsgLy8gZm5DaGFuZ2VcblxuICAvLyBGaW5kIGFsbCBzZWVkLWZpbGUgaW5wdXRzLlxuICBjb25zdCBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VlZC1maWxlID4gW3R5cGU9XCJmaWxlXCJdJyk7XG5cbiAgaWYgKGlucHV0cyAhPT0gbnVsbCkge1xuICAgIGlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0LCBpKSB7XG4gICAgICAvLyBGaW5kIHRoZSBmaWVsZCBsYWJlbFxuICAgICAgY29uc3QgbGFiZWwgPSBpbnB1dC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBjb25zdCBjYW5jZWwgPSBsYWJlbC5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsJyk7XG4gICAgICBjb25zdCBlbXB0eVRleHQgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZW1wdHknKSB8fCAnTm8gZmlsZSBjaG9zZW4nO1xuXG4gICAgICAvLyBJZiBsYWJlbCBkb2VzIG5vdCBleGlzdHMsIHNpbXBseSBkbyBub3Qgc2V0IGl0IHVwXG4gICAgICBpZiAoIWxhYmVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIGlucHV0IGFuZCBsYWJlbCBtYXRjaGVzIGFuZCB3b3Jrcy5cbiAgICAgIGlmIChpbnB1dC5nZXRBdHRyaWJ1dGUoJ2lkJykgJiYgaW5wdXQuZ2V0QXR0cmlidXRlKCdpZCcpICE9PSBsYWJlbC5nZXRBdHRyaWJ1dGUoJ2ZvcicpKSB7XG4gICAgICAgIGxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgaW5wdXQuZ2V0QXR0cmlidXRlKCdpZCcpKTtcbiAgICAgIH0gZWxzZSBpZiAobGFiZWwuZ2V0QXR0cmlidXRlKCdmb3InKSAmJiAhaW5wdXQuZ2V0QXR0cmlidXRlKCdpZCcpKSB7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSgnaWQnLCBsYWJlbC5nZXRBdHRyaWJ1dGUoJ2ZvcicpKTtcbiAgICAgIH0gZWxzZSBpZiAoIWxhYmVsLmdldEF0dHJpYnV0ZSgnZm9yJykgJiYgIWlucHV0LmdldEF0dHJpYnV0ZSgnaWQnKSkge1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2ZpbGUtaW5wdXQtJyArIGkpO1xuICAgICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsICdmaWxlLWlucHV0LScgKyBpKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWx3YXlzIHRoZSBjYW5jZWwgYnV0dG9uIGV4aXN0cywgYWRkcyBhIGhhbmRsZXJcbiAgICAgIGlmIChjYW5jZWwpIHtcbiAgICAgICAgY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICAgIGlmIChldnQpIHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGVtcHR5VGV4dCA9IGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS1lbXB0eScpIHx8ICdObyBmaWxlIGNob3Nlbic7XG5cbiAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgIGlucHV0LnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnY2hvc2VuJyk7XG4gICAgICAgICAgbGFiZWwucXVlcnlTZWxlY3RvcignLmlucHV0JykuaW5uZXJIVE1MID0gZW1wdHlUZXh0O1xuXG4gICAgICAgICAgc2VlZEN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdmaWxlLnJlbW92ZWQnKTtcbiAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KHNlZWRDdXN0b21FdmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBsYWJlbC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQnKS5pbm5lckhUTUwgPSBlbXB0eVRleHQ7XG5cbiAgICAgIC8vIFN0YXJ0IGxpc3RlbmluZyB0aGUgZmllbGQgZm9yIGNoYW5nZXNcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZuQ2hhbmdlKTtcbiAgICB9KTsgLy8gaW5wdXRzLmZvckVhY2goZnVuY3Rpb24oaW5wdXQsIGkpXG4gIH0gLy8gaWYgKGlucHV0cyAhPT0gbnVsbClcblxuICByZXR1cm4ge1xuICAgIGdldDogKGlkeCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBpZHggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGxldCBmaWxlVXBsb2FkID0gZmFsc2U7XG5cbiAgICAgICAgaW5wdXRzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICBpZiAobm9kZS5pZCA9PT0gaWR4LnJlcGxhY2UoL14jLywgJycpKSB7XG4gICAgICAgICAgICBmaWxlVXBsb2FkID0gbm9kZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBmaWxlVXBsb2FkO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGlucHV0c1tpZHhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gaW5wdXRzW2lkeF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG59OyAvLyBzZWVkRmlsZVVwbG9hZFxuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMuZmlsZVVwbG9hZCA9IGZpbGVVcGxvYWQ7XG59XG5cbi8vIEV4cG9zZSBTZWVkQ1NTIGluIHRoZSBnbG9iYWwgc2NvcGVcbmlmICh0eXBlb2Ygd2luZG93LlNlZWRDU1MgPT09ICd1bmRlZmluZWQnKSB7XG4gIHdpbmRvdy5TZWVkQ1NTID0ge307XG59XG5cbi8vIEV4cG9zZSBmaWxlVXBsb2FkIG1lbnUgaW4gdGhlIGdsb2JhbCBzY29wZVxud2luZG93LlNlZWRDU1MuZmlsZVVwbG9hZCA9IHNlZWRGaWxlVXBsb2FkO1xuIiwiLyoqIVxuICogU2VlZC1DU1MgLSBNb2RhbFxuICogQGNvcHlyaWdodCAyMDE5LCBBYnR6IExhYnNcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmxldCBmbk9wZW47XG5cbmxldCBmbkNsb3NlO1xuXG5sZXQgZm5Fc2M7XG5cbmNvbnN0IHNlZWRNb2RhbCA9IChvcHRpb25zKSA9PiB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBEZWZhdWx0IHNldHRpbmdzXG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgIC8vIHRoZSBlbGVtZW50IHRoYXQgdHJpZ2dlcnMgdGhlIG1vZGFsXG4gICAgdHJpZ2dlcjogJ1tyb2xlPVwibW9kYWxcIl0nLFxuXG4gICAgLy8gQHNlZTogaHR0cHM6Ly9kYW5lZGVuLmdpdGh1Yi5pby9hbmltYXRlLmNzcy9cbiAgICAvLyBhbmltYXRlLmNzcyBjbGFzc2VzIHRvIGJlIHVzZWRcbiAgICBjbGFzc0FuaW1hdGlvbjoge1xuICAgICAgb3BlbjogJ2JvdW5jZUluRG93bicsXG4gICAgICBjbG9zZTogJ2JvdW5jZU91dFVwJ1xuICAgIH1cbiAgfTtcblxuICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gIC8vIEdldCBlbGVtZW50c1xuICBsZXQgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsJyk7XG4gIGxldCBtb2RhbFRyaWdnZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChvcHRpb25zLnRyaWdnZXIpO1xuXG4gIGZuQ2xvc2UgPSAobW9kYWxPYmplY3QpID0+IHtcbiAgICBpZiAoIW1vZGFsT2JqZWN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGN1c3RvbUV2ZW50O1xuICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJyk7XG4gICAgY29uc3QgbVdpbiA9IG1vZGFsT2JqZWN0LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC13aW5kb3cnKTtcblxuICAgIGlmICghbVdpbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZXMgdGhlIEVTQyBsaXN0ZW5lclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmbkVzYyk7XG5cbiAgICAvLyBSZXBsYWNlIG9wZW4gYW5pbWF0aW9uIHRvIGNsb3NlIHRoZSBtb2RhbCB3aW5kb3dcbiAgICBtV2luLmNsYXNzTGlzdC5yZXBsYWNlKG9wdGlvbnMuY2xhc3NBbmltYXRpb24ub3Blbiwgb3B0aW9ucy5jbGFzc0FuaW1hdGlvbi5jbG9zZSk7XG5cbiAgICAvLyBBZGQgYW5pbWF0aW9uIHRvIHRoZSBvdmVybGF5XG4gICAgbW9kYWxPYmplY3QuY2xhc3NMaXN0LmFkZCgnZGVsYXktMXMnKTtcbiAgICBtb2RhbE9iamVjdC5jbGFzc0xpc3QucmVwbGFjZSgnZmFkZUluJywgJ2ZhZGVPdXQnKTtcblxuICAgIC8vIFdhaXQgMiBzZWNvbmRzIGJlZm9yZSBjb21wbGV0ZSBkZSBwcm9jZXNzLlxuICAgIC8vIFRoaXMgaXMgdGhlIHRpbWUgdG8gZmluaXNoaW5nIGFsbCBhbmltYXRlLmNzcyBhbmltYXRpb25zXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBEaXNwYXRjaCB0aGUgJ21vZGFsLmNsb3NlZCcgZXZlbnRcbiAgICAgIGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdtb2RhbC5jbG9zZWQnKTtcbiAgICAgIG1vZGFsT2JqZWN0LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpO1xuXG4gICAgICAvLyBDb21wbGV0ZWx5IGhpZGUgdGhlIGNvbXBvbmVudFxuICAgICAgbW9kYWxPYmplY3QuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgICAgLy8gUmVlbmFibGUgc2Nyb2xsaW5nIGZyb20gdGhlIEhUTUxcbiAgICAgIGh0bWwuc3R5bGUub3ZlcmZsb3cgPSAnJztcbiAgICAgIC8vIFJlbW92ZSBjbG9zaW5nIGNsYXNzZXMgZnJvbSBvdmVybGF5XG4gICAgICBtb2RhbE9iamVjdC5jbGFzc0xpc3QucmVtb3ZlKCdkZWxheS0xcycsICdmYWRlT3V0Jyk7XG4gICAgICAvLyBSZW1vdmUgY2xvc2luZyBjbGFzc2VzIGZyb20gbW9kYWwgd2luZG93XG4gICAgICBtV2luLmNsYXNzTGlzdC5yZXBsYWNlKG9wdGlvbnMuY2xhc3NBbmltYXRpb24uY2xvc2UsIG9wdGlvbnMuY2xhc3NBbmltYXRpb24ub3Blbik7XG4gICAgfSwgNjAwKTtcbiAgfTsgLy8gZm5DbG9zZVxuXG4gIGZuT3BlbiA9IChtb2RhbE9iamVjdCkgPT4ge1xuICAgIGlmICghbW9kYWxPYmplY3QpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgY3VzdG9tRXZlbnQ7XG4gICAgY29uc3QgaHRtbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKTtcbiAgICBjb25zdCBtV2luID0gbW9kYWxPYmplY3QucXVlcnlTZWxlY3RvcignLm1vZGFsLXdpbmRvdycpO1xuXG4gICAgLy8gSGFuZGxlIHRoZSBFU0MgZGlzbWlzc1xuICAgIGZuRXNjID0gZnVuY3Rpb24gZXNjSGFuZGxlcihlKSB7XG4gICAgICBjb25zdCBrZXkgPSBlLmtleUNvZGUgfHwgZS53aGljaDtcblxuICAgICAgLy8gV2hlbiB0aGUgRVNDIGtleSBpcyBwcmVzc2VkXG4gICAgICBpZiAoa2V5ID09PSAyNykge1xuICAgICAgICBmbkNsb3NlKG1vZGFsT2JqZWN0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKCFtV2luKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQWRkIChhbmQgcmVtb3ZlKSBhbiBFU0MgaGFuZGxlciBmb3IgdGhlIG92ZXJsYXlcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZm5Fc2MpO1xuXG4gICAgLy8gQ2xlYXIgaW5saW5lIGRpc3BsYXkgc3R5bGUsIGlmIGFueVxuICAgIG1vZGFsT2JqZWN0LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAvLyBBZGQgYW5pbWF0aW9uIHRvIHRoZSBvdmVybGF5XG4gICAgbW9kYWxPYmplY3QuY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZWQnLCAnZmFkZUluJywgJ2Zhc3QnKTtcbiAgICAvLyBBZGQgYW5pbWF0aW9uIHRvIHRoZSBtb2RhbCB3aW5kb3dcbiAgICBtV2luLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGVkJywgb3B0aW9ucy5jbGFzc0FuaW1hdGlvbi5vcGVuKTtcbiAgICAvLyBTaG93IHRoZSBjb21wb25lbnRcbiAgICBtb2RhbE9iamVjdC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgLy8gRmluYWxseSBwcmV2ZW50IHNjcm9sbGluZ1xuICAgIGh0bWwuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcblxuICAgIC8vIFdhaXQgdGhlIGFuaW1hdGlvbiBjb21wbGV0ZSB0byBkaXNwYXRjaCB0aGUgZXZlbnRcbiAgICAvLyBFYWNoIGFuaW1hdGUuY3NzIGFuaW1hdGlvbiB0YWtlcyAxc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgLy8gRGlzcGF0Y2ggdGhlICdtb2RhbC5vcGVuZWQnIGV2ZW50XG4gICAgICBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnbW9kYWwub3BlbmVkJyk7XG4gICAgICBtb2RhbE9iamVjdC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcbiAgICB9LCAxMDApO1xuICB9OyAvLyBmbk9wZW5cblxuICBpZiAobW9kYWxzICE9PSBudWxsKSB7XG4gICAgbW9kYWxzLmZvckVhY2goKG1vZGFsLCBpKSA9PiB7XG4gICAgICAvLyBIYW5kbGUgdGhlIGRpc21pc3MgYnV0dG9uc1xuICAgICAgY29uc3QgZGlzbWlzc2FscyA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyb2xlPVwibW9kYWwtZGlzbWlzc1wiXScpO1xuXG4gICAgICAvLyBBZGQgKGFuZCByZW1vdmUpIGEgY2xpY2sgaGFuZGxlciBvbiB0aGUgb3ZlcmxheVxuICAgICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICAgIGxldCB7IHRhcmdldCB9ID0gZXZ0O1xuICAgICAgICBsZXQgYWJvcnQgPSBmYWxzZTtcblxuICAgICAgICAvLyBEbyBub3QgY2xvc2UgdGhlIG1vZGFsIHdoZW4gdGhlIGNsaWNrIGlzIGluc2lkZSBtb2RhbC13aW5kb3dcbiAgICAgICAgd2hpbGUgKHRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnaHRtbCcpIHtcbiAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWwtd2luZG93JykpIHtcbiAgICAgICAgICAgIGFib3J0ID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFhYm9ydCkge1xuICAgICAgICAgIGZuQ2xvc2UobW9kYWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQWRkIHByb3RvdHlwZSBmb3Igc2hvdyAob3BlbilcbiAgICAgIG1vZGFsLnNob3cgPSAoKSA9PiB7XG4gICAgICAgIGZuT3Blbihtb2RhbCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBBZGQgcHJvdG90eXBlIGZvciBoaWRlIChjbG9kZSlcbiAgICAgIG1vZGFsLmhpZGUgPSAoKSA9PiB7XG4gICAgICAgIGZuQ2xvc2UobW9kYWwpO1xuICAgICAgfTtcblxuICAgICAgaWYgKGRpc21pc3NhbHMgIT09IG51bGwpIHtcbiAgICAgICAgZGlzbWlzc2Fscy5mb3JFYWNoKChkaXNtaXNzLCBqKSA9PiB7XG4gICAgICAgICAgZGlzbWlzcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldnQpIHtcbiAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm5DbG9zZShtb2RhbCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSAvLyBpZiAoZGlzbWlzc2FscyAhPT0gbnVsbClcbiAgICB9KTtcbiAgfSAvLyBpZiAobW9kYWxzICE9PSBudWxsKVxuXG4gIGlmIChtb2RhbFRyaWdnZXJzICE9PSBudWxsKSB7XG4gICAgbW9kYWxUcmlnZ2Vycy5mb3JFYWNoKCh0cmlnZ2VyLCBpKSA9PiB7XG4gICAgICB0cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICBpZiAoZXZ0KSB7XG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZWYgPSB0cmlnZ2VyLmdldEF0dHJpYnV0ZSgnZGF0YS1tb2RhbC1pZCcpO1xuXG4gICAgICAgIGlmIChyZWYgIT09IG51bGwpIHtcbiAgICAgICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3JlZn1gKTtcbiAgICAgICAgICBmbk9wZW4obW9kYWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSAvLyBpZiAobW9kYWxUcmlnZ2VycyAhPT0gbnVsbClcblxuICBtb2RhbFRyaWdnZXJzID0gdW5kZWZpbmVkO1xuXG4gIHJldHVybiB7XG4gICAgZ2V0OiAoaWR4KSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGlkeCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgbGV0IG1vZGFsID0gZmFsc2U7XG5cbiAgICAgICAgbW9kYWxzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICBpZiAobm9kZS5pZCA9PT0gaWR4LnJlcGxhY2UoL14jLywgJycpKSB7XG4gICAgICAgICAgICBtb2RhbCA9IG5vZGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbW9kYWw7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgbW9kYWxzW2lkeF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBtb2RhbHNbaWR4XTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcbn07IC8vIHNlZWRNb2RhbFxuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMuc2VlZE1vZGFsID0gc2VlZE1vZGFsO1xufVxuXG4vLyBFeHBvc2UgU2VlZENTUyBpbiB0aGUgZ2xvYmFsIHNjb3BlXG5pZiAodHlwZW9mIHdpbmRvdy5TZWVkQ1NTID09PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3cuU2VlZENTUyA9IHt9O1xufVxuXG4vLyBFeHBvc2UgbW9kYWwgbWVudSBpbiB0aGUgZ2xvYmFsIHNjb3BlXG53aW5kb3cuU2VlZENTUy5tb2RhbCA9IHNlZWRNb2RhbDtcbiIsIi8qKiFcbiAqIFNlZWQtQ1NTIC0gT2ZmLUNhbnZhcy5cbiAqIEBjb3B5cmlnaHQgMjAxOSwgQWJ0eiBMYWJzXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5jb25zdCBzZWVkT2ZmQ2FudmFzID0gZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgY29uc3Qgb3BlbmVkT2ZmY2FudmFzQ2xhc3MgPSAnY2FudmFzLW9wZW5lZCc7XG5cbiAgY29uc3QgZm5PdXRzaWRlQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICBsZXQgYSA9IGV2LnRhcmdldDtcbiAgICBsZXQgZm91bmQgPSBmYWxzZTtcblxuICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJyk7XG5cbiAgICB3aGlsZSAoIWZvdW5kKSB7XG4gICAgICBpZiAoIWEgfHwgIWEucGFyZW50Tm9kZSkge1xuICAgICAgICAvLyBJdCBzZWVtcyB3ZSd2ZSByZWFjaGVkIHRoZSByb290IChodG1sKVxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKGEuY2xhc3NMaXN0ICYmICFhLmNsYXNzTGlzdC5jb250YWlucygnb2ZmY2FudmFzJykpIHtcbiAgICAgICAgLy8gTmVpdGhlciBmb3VuZCAuY2FudmFzIG5vciB0aGUgcm9vdCBsZXZlbFxuICAgICAgICBhID0gYS5wYXJlbnROb2RlO1xuICAgICAgfSBlbHNlIGlmIChhLmNsYXNzTGlzdCkge1xuICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFmb3VuZCAmJiBodG1sLmNsYXNzTGlzdC5jb250YWlucyhvcGVuZWRPZmZjYW52YXNDbGFzcykpIHtcbiAgICAgIC8vIEl0IHNlZW1zIGhhcyBoYXBwZW5lZCBhbiBvdXRzaWRlciBjbGlja1xuICAgICAgZm5Ub2dnbGUoaHRtbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FudmFzLWlkJykpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBmblRvZ2dsZSA9IChjYW52YXNJRCwgdHJpZ2dlckVsZW1lbnQpID0+IHtcbiAgICBsZXQgY3VzdG9tRXZlbnQ7XG5cbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtjYW52YXNJRC5yZXBsYWNlKC9eIy8sICcnKX1gKTtcblxuICAgIGNvbnN0IHRyaWdnZXIgPVxuICAgICAgdHJpZ2dlckVsZW1lbnQgfHxcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGBbcm9sZT1cIm9mZmNhbnZhc1wiXVtkYXRhLWlkPVwiJHtjYW52YXNJRC5yZXBsYWNlKC9eIy8sICcnKX1cIl1gXG4gICAgICApO1xuXG4gICAgaWYgKGNhbnZhcyAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgaHRtbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKTtcblxuICAgICAgaWYgKCFodG1sLmNsYXNzTGlzdC5jb250YWlucyhvcGVuZWRPZmZjYW52YXNDbGFzcykpIHtcbiAgICAgICAgY2FudmFzLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcblxuICAgICAgICBpZiAodHJpZ2dlciAhPT0gbnVsbCkge1xuICAgICAgICAgIC8vIEFkZCB0aGUgJ3RyaWdnZXJlZCcgY2xhc3MgdG8gdGhlIGVsZW1lbnQgd2hpY2ggaGFzIHRyaWdnZXJlZCB0aGUgb2ZmY2FudmFzLlxuICAgICAgICAgIHRyaWdnZXIuY2xhc3NMaXN0LmFkZCgndHJpZ2dlcmVkJyk7XG4gICAgICAgIH0gLy8gaWYgKHRyaWdnZXIgIT09IG51bGwpXG5cbiAgICAgICAgLy8gUHJldmVudHMgbWFpbiB0byBzY3JvbGxcbiAgICAgICAgaHRtbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZuT3V0c2lkZUNsaWNrSGFuZGxlcik7XG4gICAgICAgIGh0bWwuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbnZhcy5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSAndHJpZ2dlcmVkJyBjbGFzcyBmb3IgYW55IGV4aXN0aW5nIHRyaWdnZXIgd2hpY2ggcmVmZXJzIGdpdmVuIG9mZmNhbnZhcy5cbiAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAucXVlcnlTZWxlY3RvckFsbChcbiAgICAgICAgICAgIGBbcm9sZT1cIm9mZmNhbnZhc1wiXVtkYXRhLWlkPVwiJHtjYW52YXNJRC5yZXBsYWNlKC9eIy8sICcnKX1cIl1gXG4gICAgICAgICAgKVxuICAgICAgICAgIC5mb3JFYWNoKCh0Z3IpID0+IHtcbiAgICAgICAgICAgIHRnci5jbGFzc0xpc3QucmVtb3ZlKCd0cmlnZ2VyZWQnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZS1lbmFibGVzIG1haW4gc2Nyb2xsaW5nXG4gICAgICAgIGh0bWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmbk91dHNpZGVDbGlja0hhbmRsZXIpO1xuICAgICAgICBodG1sLnN0eWxlLm92ZXJmbG93ID0gJyc7XG4gICAgICB9XG5cbiAgICAgIC8vIFdhaXQgdW50aWwgYW5pbWF0aW9uIGlzIGNvbXBsZXRlIHRvIGRpc3BhdGNoIHRoZSBldmVudFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChjYW52YXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykpIHtcbiAgICAgICAgICBodG1sLmNsYXNzTGlzdC5hZGQob3BlbmVkT2ZmY2FudmFzQ2xhc3MpO1xuICAgICAgICAgIGh0bWwuc2V0QXR0cmlidXRlKCdkYXRhLWNhbnZhcy1pZCcsIGNhbnZhc0lELnJlcGxhY2UoL14jLywgJycpKTtcbiAgICAgICAgICBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2FudmFzLm9wZW5lZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGh0bWwuY2xhc3NMaXN0LnJlbW92ZShvcGVuZWRPZmZjYW52YXNDbGFzcyk7XG4gICAgICAgICAgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NhbnZhcy5jbG9zZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERpc3BhdGNoIHRoZSAnY2FudmFzLm9wZW5lZCcvICdjYW52YXMuY2xvc2VkJyBldmVudHNcbiAgICAgICAgY2FudmFzLmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpO1xuICAgICAgfSwgMzAwKTtcbiAgICB9IC8vIGlmIChjYW52YXMgIT09IG51bGwpXG4gIH07IC8vIGZuVG9nZ2xlXG5cbiAgY29uc3QgZm5UcmlnZ2VyQ2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgZm5Ub2dnbGUoXG4gICAgICBldnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSB8fCAnb2ZmY2FudmFzJyxcbiAgICAgIGV2dC5jdXJyZW50VGFyZ2V0XG4gICAgKTtcbiAgfTsgLy8gZm5UcmlnZ2VyQ2xpY2tcblxuICAvLyBGaW5kIGFsbCBleGlzdGluZyB0cmlnZ2Vyc1xuICBjb25zdCB0cmlnZ2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyb2xlPVwib2ZmY2FudmFzXCJdJyk7XG5cbiAgLy8gRmluZCBhbGwgZXhpc3Rpbmcgb2ZmY2FudmFzXG4gIGNvbnN0IGNhbnZhc2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9mZmNhbnZhcycpO1xuXG4gIGlmICh0cmlnZ2VycyAhPT0gbnVsbCkge1xuICAgIHRyaWdnZXJzLmZvckVhY2goZnVuY3Rpb24odHJpZ2dlciwgaSkge1xuICAgICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZuVHJpZ2dlckNsaWNrLCBmYWxzZSk7XG4gICAgfSk7IC8vIHRyaWdnZXJzLmZvckVhY2goZnVuY3Rpb24odHJpZ2dlciwgaSlcbiAgfSAvLyBpZiAodHJpZ2dlcnMgIT09IG51bGwpXG5cbiAgaWYgKGNhbnZhc2VzICE9PSBudWxsKSB7XG4gICAgY2FudmFzZXMuZm9yRWFjaCgoY2FudmFzLCBpKSA9PiB7XG4gICAgICAvLyBBdHRhY2ggbWV0aG9kIGZvciBvcGVuaW5nXG4gICAgICBjYW52YXMub3BlbiA9ICgpID0+IHtcbiAgICAgICAgZm5Ub2dnbGUoY2FudmFzLmdldEF0dHJpYnV0ZSgnaWQnKSB8fCAnb2ZmY2FudmFzJyk7XG4gICAgICB9OyAvLyBvcGVuXG5cbiAgICAgIC8vIEF0dGFjaCBtZXRob2QgZm9yIGNsb3NpbmdcbiAgICAgIGNhbnZhcy5jbG9zZSA9ICgpID0+IHt9OyAvLyBjbG9zZVxuICAgIH0pOyAvLyBjYW52YXNlcy5mb3JFYWNoKChjYW52YXMsIGkpXG4gIH0gLy8gaWYgKGNhbnZhc2VzICE9PSBudWxsKVxuXG4gIHJldHVybiB7XG4gICAgZ2V0OiAoaWR4KSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGlkeCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgbGV0IGNhbnZhcyA9IGZhbHNlO1xuXG4gICAgICAgIGNhbnZhc2VzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICBpZiAobm9kZS5pZCA9PT0gaWR4LnJlcGxhY2UoL14jLywgJycpKSB7XG4gICAgICAgICAgICBjYW52YXMgPSBub2RlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBjYW52YXNbaWR4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGNhbnZhc1tpZHhdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xufTsgLy8gc2VlZE9mZkNhbnZhc1xuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMuc2VlZE9mZkNhbnZhcyA9IHNlZWRPZmZDYW52YXM7XG59XG5cbi8vIEV4cG9zZSBTZWVkQ1NTIGluIHRoZSBnbG9iYWwgc2NvcGVcbmlmICh0eXBlb2Ygd2luZG93LlNlZWRDU1MgPT09ICd1bmRlZmluZWQnKSB7XG4gIHdpbmRvdy5TZWVkQ1NTID0ge307XG59XG5cbi8vIEV4cG9zZSBvZmZjYW52YXMgbWVudSBpbiB0aGUgZ2xvYmFsIHNjb3BlXG53aW5kb3cuU2VlZENTUy5vZmZDYW52YXMgPSBzZWVkT2ZmQ2FudmFzO1xuIiwiLyoqIVxuICogU2VlZC1DU1MgLSBTY3JvbGwuXG4gKiBAY29weXJpZ2h0IDIwMTksIEFidHogTGFic1xuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuY29uc3Qgc2VlZFNjcm9sbCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGxldCB0cmlnZ2VycyA9IG51bGw7XG5cbiAgbGV0IHJldmVhbGVycyA9IG51bGw7XG5cbiAgbGV0IHNjcm9sbFRhcmdldCA9IDA7XG5cbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgc3B5U2Nyb2xsU2VsZWN0b3I6ICduYXYgYS5zbW9vdGgnLFxuICAgIHJldmVhbEVsZW1lbnRTZWxlY3RvcjogJy5yZXZlYWwnLFxuICAgIHJldmVhbFNwYWNlT2Zmc2V0OiAwLjIsXG4gICAgcmV2ZWFsV2hlblZpc2libGU6ICd2aXNpYmxlJyxcbiAgICByZXZlYWxTaW5nbGVBbmltYXRpb246ICd2aXNpYmxlLW9uY2UnLFxuICAgIHJldmVhbFdoZW5IaWRkZW46ICdoaWRkZW4nLFxuICAgIGd1dHRlcjogNTBcbiAgfTsgLy8gZGVmYXVsdE9wdGlvbnNcblxuICBjb25zdCBmblVwZGF0ZUFjdGl2ZVRyaWdnZXIgPSAoZWxlbSkgPT4ge1xuICAgIHRyaWdnZXJzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIGlmIChlbGVtKSB7XG4gICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH1cbiAgfTsgLy8gZm5VcGRhdGVBY3RpdmVUcmlnZ2VyXG5cbiAgY29uc3QgZm5HZXRPZmZzZXQgPSAoZWxlbSkgPT4ge1xuICAgIGNvbnN0IGJvZHlPZmZzZXQgPSBkb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IG9mZnNldCA9IGVsZW0gPyBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDogMDtcblxuICAgIHJldHVybiB7XG4gICAgICB0b3A6IE1hdGguY2VpbChvZmZzZXQudG9wIC0gYm9keU9mZnNldC50b3ApLFxuICAgICAgbGVmdDogTWF0aC5jZWlsKG9mZnNldC5sZWZ0IC0gYm9keU9mZnNldC5sZWZ0KVxuICAgIH07XG4gIH07IC8vIGZuR2V0T2Zmc2V0XG5cbiAgY29uc3QgZm5TY3JvbGxDb21wbGV0ZSA9IChldnQpID0+IHtcbiAgICBpZiAod2luZG93LnNjcm9sbFkgPT09IHNjcm9sbFRhcmdldCkge1xuICAgICAgY29uc3Qgc2VlZEN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdzY3JvbGwuY29tcGxldGUnKTtcbiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoc2VlZEN1c3RvbUV2ZW50KTtcbiAgICB9XG5cbiAgICBpZiAodHJpZ2dlcnMpIHtcbiAgICAgIGNvbnN0IGZpcnN0RWxlbWVudE9mZnNldCA9IGZuR2V0T2Zmc2V0KHRyaWdnZXJzWzBdKTtcblxuICAgICAgaWYgKHdpbmRvdy5zY3JvbGxZIDwgZmlyc3RFbGVtZW50T2Zmc2V0LnRvcCkge1xuICAgICAgICBmblVwZGF0ZUFjdGl2ZVRyaWdnZXIoKTtcbiAgICAgIH1cblxuICAgICAgdHJpZ2dlcnMuZm9yRWFjaCgoZWwsIGkpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB0YXJnZXRJRCA9XG4gICAgICAgICAgICBlbC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFyZ2V0Jyk7XG5cbiAgICAgICAgICBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldElEKTtcbiAgICAgICAgICBjb25zdCBvZmZzZXQgPSBmbkdldE9mZnNldCh0YXJnZXQpO1xuXG4gICAgICAgICAgaWYgKG9mZnNldC50b3AgLSBvcHRpb25zLmd1dHRlciA8PSB3aW5kb3cuc2Nyb2xsWSkge1xuICAgICAgICAgICAgZm5VcGRhdGVBY3RpdmVUcmlnZ2VyKGVsKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHdpbmRvdy5vbGRPbnNjcm9sbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgd2luZG93Lm9sZE9uc2Nyb2xsKGV2dCk7XG4gICAgfVxuICB9OyAvLyBmblNjcm9sbENvbXBsZXRlXG5cbiAgY29uc3QgZm5UcmlnZ2VyQ2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgY29uc3QgdGFyZ2V0ID1cbiAgICAgIGV2dC5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnaHJlZicpIHx8XG4gICAgICBldnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFyZ2V0Jyk7XG5cbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICBjb25zdCBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xuXG4gICAgICBzY3JvbGxUYXJnZXQgPSBmbkdldE9mZnNldChlbGVtKS50b3AgLSBvcHRpb25zLmd1dHRlcjsgLy8gYWRkIHNvbWUgZ3V0dGVyXG5cbiAgICAgIHdpbmRvdy5zY3JvbGxUbyh7XG4gICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJyxcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgdG9wOiBzY3JvbGxUYXJnZXRcbiAgICAgIH0pO1xuICAgIH1cbiAgfTsgLy8gZm5UcmlnZ2VyQ2xpY2tcblxuICBjb25zdCBmbldhdGNoRWxlbWVudHMgPSAoKSA9PiB7XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3cG9ydCAod2luZG93KSBkaW1lbnNpb25zLlxuICAgICAqIEByZXR1cm4gb2JqZWN0XG4gICAgICovXG4gICAgY29uc3QgZ2V0Vmlld3BvcnRTaXplID0gKCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd2lkdGg6IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsXG4gICAgICAgIGhlaWdodDogd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRcbiAgICAgIH07XG4gICAgfTsgLy8gZ2V0Vmlld3BvcnRTaXplXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgc2NvbGwgcG9zaXRpb24uXG4gICAgICogQHJldHVybiBvYmplY3RcbiAgICAgKi9cbiAgICBjb25zdCBnZXRDdXJyZW50U2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB4OiB3aW5kb3cucGFnZVhPZmZzZXQsXG4gICAgICAgIHk6IHdpbmRvdy5wYWdlWU9mZnNldFxuICAgICAgfTtcbiAgICB9OyAvLyBnZXRDdXJyZW50U2Nyb2xsXG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBlbGVtZW50IGRpbWVuc2lvbiBhbmQgcG9zaXRpb24uXG4gICAgICogQHBhcmFtIEhUTUxFbGVtZW50IGVsXG4gICAgICogQHJldHVybiBvYmplY3RcbiAgICAgKi9cbiAgICBjb25zdCBnZXRFbGVtSW5mbyA9IChlbCkgPT4ge1xuICAgICAgbGV0IGVsZW0gPSBlbDtcbiAgICAgIGxldCBvZmZzZXRUb3AgPSAwO1xuICAgICAgbGV0IG9mZnNldExlZnQgPSAwO1xuICAgICAgY29uc3Qgb2Zmc2V0V2lkdGggPSBlbGVtLm9mZnNldFdpZHRoO1xuICAgICAgY29uc3Qgb2Zmc2V0SGVpZ2h0ID0gZWxlbS5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKCFpc05hTihlbGVtLm9mZnNldFRvcCkpIHtcbiAgICAgICAgICBvZmZzZXRUb3AgKz0gZWxlbS5vZmZzZXRUb3A7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzTmFOKGVsZW0ub2Zmc2V0TGVmdCkpIHtcbiAgICAgICAgICBvZmZzZXRMZWZ0ICs9IGVsZW0ub2Zmc2V0TGVmdDtcbiAgICAgICAgfVxuICAgICAgfSB3aGlsZSAoKGVsZW0gPSBlbGVtLm9mZnNldFBhcmVudCkgIT09IG51bGwpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3A6IG9mZnNldFRvcCxcbiAgICAgICAgbGVmdDogb2Zmc2V0TGVmdCxcbiAgICAgICAgaGVpZ2h0OiBvZmZzZXRIZWlnaHQsXG4gICAgICAgIHdpZHRoOiBvZmZzZXRXaWR0aFxuICAgICAgfTtcbiAgICB9OyAvLyBnZXRFbGVtSW5mb1xuXG4gICAgLyoqXG4gICAgICogSWRlbnRpZmllcyB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIHZpc2libGUgaW4gdGhlIHZpZXdwb3J0LlxuICAgICAqIEBwYXJhbSBIVE1MRWxlbWVudCBlbGVtXG4gICAgICogQHJldHVybiBib29sZWFuXG4gICAgICovXG4gICAgY29uc3QgaXNFbGVtZW50VmlzaWJsZSA9IChlbGVtKSA9PiB7XG4gICAgICBjb25zdCB2aWV3cG9ydFNpemUgPSBnZXRWaWV3cG9ydFNpemUoKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRTY3JvbGwgPSBnZXRDdXJyZW50U2Nyb2xsKCk7XG4gICAgICBjb25zdCBlSW5mID0gZ2V0RWxlbUluZm8oZWxlbSk7XG4gICAgICBjb25zdCBzcGFjZU9mZnNldCA9IG9wdGlvbnMucmV2ZWFsU3BhY2VPZmZzZXQ7XG5cbiAgICAgIGNvbnN0IGNoZWNrQm91bmRhcmllcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBUaGUgZWxlbWVudCBib3VuZGFyaWVzXG4gICAgICAgIGNvbnN0IGVUb3AgPSBlSW5mLnRvcCArIGVJbmYuaGVpZ2h0ICogc3BhY2VPZmZzZXQ7XG4gICAgICAgIGNvbnN0IGVMZWZ0ID0gZUluZi5sZWZ0ICsgZUluZi53aWR0aCAqIHNwYWNlT2Zmc2V0O1xuICAgICAgICBjb25zdCBlUmlnaHQgPSBlSW5mLmxlZnQgKyBlSW5mLndpZHRoIC0gZUluZi53aWR0aCAqIHNwYWNlT2Zmc2V0O1xuICAgICAgICBjb25zdCBlQm90dG9tID0gZUluZi50b3AgKyBlSW5mLmhlaWdodCAtIGVJbmYuaGVpZ2h0ICogc3BhY2VPZmZzZXQ7XG5cbiAgICAgICAgLy8gVGhlIHdpbmRvdyBib3VuZGFyaWVzXG4gICAgICAgIGNvbnN0IHdUb3AgPSBjdXJyZW50U2Nyb2xsLnkgKyAwO1xuICAgICAgICBjb25zdCB3TGVmdCA9IGN1cnJlbnRTY3JvbGwueCArIDA7XG4gICAgICAgIGNvbnN0IHdCb3R0b20gPSBjdXJyZW50U2Nyb2xsLnkgLSAwICsgdmlld3BvcnRTaXplLmhlaWdodDtcbiAgICAgICAgY29uc3Qgd1JpZ2h0ID0gY3VycmVudFNjcm9sbC54IC0gMCArIHZpZXdwb3J0U2l6ZS53aWR0aDtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZWxlbWVudCBpcyB3aXRoaW4gYm91bmRhcnlcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBlVG9wIDwgd0JvdHRvbSAmJiBlQm90dG9tID4gd1RvcCAmJiBlTGVmdCA+IHdMZWZ0ICYmIGVSaWdodCA8IHdSaWdodFxuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIGNoZWNrQm91bmRhcmllcygpO1xuICAgIH07IC8vIGlzRWxlbWVudFZpc2libGVcblxuICAgIC8qKlxuICAgICAqIFdhdGNoIHRoZSB0YXJnZXQgZWxlbWVudHMgd2l0aCBhIGxvb3AgdG8gaWRlbnRpZnkgd2hpY2ggb25lIGlzIGluc2lkZSB0aGUgdmlld3BvcnQuXG4gICAgICogSWYgZm91bmQsIHRoZSBlbGVtZW50IGdldHMgYSBjbGFzcyBkZWZpbmVkIGluIHRoZSBvcHRpb25zLlxuICAgICAqIEByZXR1cm4gdm9pZFxuICAgICAqL1xuICAgIGNvbnN0IHRvZ2dsZUVsZW1lbnQgPSAoKSA9PiB7XG4gICAgICBpZiAoIXJldmVhbGVycykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmV2ZWFsZXJzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGlmIChpc0VsZW1lbnRWaXNpYmxlKHJldmVhbGVyc1tpXSkpIHtcbiAgICAgICAgICBpZiAob3B0aW9ucy5yZXZlYWxXaGVuVmlzaWJsZSkge1xuICAgICAgICAgICAgcmV2ZWFsZXJzW2ldLmNsYXNzTGlzdC5hZGQob3B0aW9ucy5yZXZlYWxXaGVuVmlzaWJsZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKG9wdGlvbnMucmV2ZWFsV2hlbkhpZGRlbikge1xuICAgICAgICAgICAgcmV2ZWFsZXJzW2ldLmNsYXNzTGlzdC5yZW1vdmUob3B0aW9ucy5yZXZlYWxXaGVuSGlkZGVuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgcmV2ZWFsZXJzW2ldLmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25zLnJldmVhbFNpbmdsZUFuaW1hdGlvbikgPT09XG4gICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucmV2ZWFsV2hlbkhpZGRlbikge1xuICAgICAgICAgICAgICByZXZlYWxlcnNbaV0uY2xhc3NMaXN0LmFkZChvcHRpb25zLnJldmVhbFdoZW5IaWRkZW4pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yZXZlYWxXaGVuVmlzaWJsZSkge1xuICAgICAgICAgICAgICByZXZlYWxlcnNbaV0uY2xhc3NMaXN0LnJlbW92ZShvcHRpb25zLnJldmVhbFdoZW5WaXNpYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9OyAvLyB0b2dnbGVFbGVtZW50XG5cbiAgICAvKipcbiAgICAgKiBBIGhhbmRsZXIgZm9yIHNjcm9sbGluZyBhbmQgcmVzaXppbmdcbiAgICAgKiBAcGFyYW0gd2luZG93LkV2ZW50IGV2dFxuICAgICAqIEByZXR1cm4gdm9pZFxuICAgICAqL1xuICAgIGNvbnN0IHNjcm9sbFJlc2l6ZUhhbmRsZXIgPSAoZXZ0KSA9PiB7XG4gICAgICB0b2dnbGVFbGVtZW50KCk7XG4gICAgfTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxSZXNpemVIYW5kbGVyLCBmYWxzZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHNjcm9sbFJlc2l6ZUhhbmRsZXIsIGZhbHNlKTtcbiAgfTsgLy8gZm5XYXRjaEVsZW1lbnRzXG5cbiAgd2luZG93Lm9sZE9uc2Nyb2xsID0gd2luZG93Lm9uc2Nyb2xsO1xuICB3aW5kb3cub25zY3JvbGwgPSBmblNjcm9sbENvbXBsZXRlO1xuXG4gIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XG5cbiAgLy8gRmluZCBhbGwgZXhpc3RpbmcgdHJpZ2dlcnMgZm9yIHNtb290aCBzY3JvbGxpbmdcbiAgdHJpZ2dlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG9wdGlvbnMuc3B5U2Nyb2xsU2VsZWN0b3IpO1xuXG4gIC8vIEZpbmQgYWxsIGV4aXN0aW5nIHRhcmdldHMgZm9yIHdhdGNoaW5nIHRoZSB2aWV3cG9ydFxuICByZXZlYWxlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG9wdGlvbnMucmV2ZWFsRWxlbWVudFNlbGVjdG9yKTtcblxuICBpZiAodHJpZ2dlcnMgIT09IG51bGwpIHtcbiAgICB0cmlnZ2Vycy5mb3JFYWNoKGZ1bmN0aW9uKHRyaWdnZXIsIGkpIHtcbiAgICAgIHRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmblRyaWdnZXJDbGljaywgZmFsc2UpO1xuICAgIH0pOyAvLyB0cmlnZ2Vycy5mb3JFYWNoKGZ1bmN0aW9uKHRyaWdnZXIsIGkpXG4gIH0gLy8gaWYgKHRyaWdnZXJzICE9PSBudWxsKVxuXG4gIGlmIChyZXZlYWxlcnMpIHtcbiAgICBmbldhdGNoRWxlbWVudHMoKTtcbiAgfVxuXG4gIHJldHVybiB7fTtcbn07IC8vIHNlZWRTY3JvbGxcblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gIG1vZHVsZS5leHBvcnRzLnNlZWRTY3JvbGwgPSBzZWVkU2Nyb2xsO1xufVxuXG4vLyBFeHBvc2UgU2VlZENTUyBpbiB0aGUgZ2xvYmFsIHNjb3BlXG5pZiAodHlwZW9mIHdpbmRvdy5TZWVkQ1NTID09PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3cuU2VlZENTUyA9IHt9O1xufVxuXG4vLyBFeHBvc2Ugc2Nyb2xsIGluIHRoZSBnbG9iYWwgc2NvcGVcbndpbmRvdy5TZWVkQ1NTLnNjcm9sbCA9IHNlZWRTY3JvbGw7XG4iLCIvKiohXG4gKiBTZWVkLUNTUyAtIEFkZGl0aW9uYWwgZmVhdHVyZXMgZm9yIEhUTUwgVGV4dGFyZWFzLlxuICogQGNvcHlyaWdodCAyMDE5LCBBYnR6IExhYnNcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmNvbnN0IHNlZWRUZXh0YXJlYSA9IGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gRmluZCBhbGwgc2VlZC1maWxlIGlucHV0cy5cbiAgY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpZWxkID4gdGV4dGFyZWEnKTtcblxuICBpZiAoaW5wdXRzICE9PSBudWxsKSB7XG4gICAgaW5wdXRzLmZvckVhY2goZnVuY3Rpb24oaW5wdXQsIGkpIHtcbiAgICAgIGxldCBtYXhMZW5ndGggPSAwO1xuXG4gICAgICBjb25zdCBwYXJlbnQgPSBpbnB1dC5wYXJlbnROb2RlO1xuICAgICAgY29uc3QgY291bnRlckxhYmVsID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPVwiY291bnRlclwiXScpO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPVxuICAgICAgICBjb3VudGVyTGFiZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXRlbXBsYXRlJykgfHxcbiAgICAgICAgJ1R5cGVkICVhIG91dCBvZiAlYi4gUmVtYWluaW5nICVjLic7XG5cbiAgICAgIGNvbnN0IGZuQ2FsYyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdHlwZWQgPSBpbnB1dC52YWx1ZS5yZXBsYWNlKC9bXFxuXFxyXS9nLCAnJykubGVuZ3RoO1xuICAgICAgICBjb25zdCByZW1haW5pbmcgPSBtYXhMZW5ndGggLSB0eXBlZDtcbiAgICAgICAgY29uc3QgbWluTGVuZ3RoID0gTWF0aC5mbG9vcihtYXhMZW5ndGggKiAwLjEpO1xuXG4gICAgICAgIGNvdW50ZXJMYWJlbC5pbm5lckhUTUwgPSB0ZW1wbGF0ZVxuICAgICAgICAgIC5yZXBsYWNlKCclYScsIHR5cGVkKVxuICAgICAgICAgIC5yZXBsYWNlKCclYicsIG1heExlbmd0aClcbiAgICAgICAgICAucmVwbGFjZShcbiAgICAgICAgICAgICclYycsXG4gICAgICAgICAgICByZW1haW5pbmcgPD0gbWluTGVuZ3RoXG4gICAgICAgICAgICAgID8gYDxzcGFuIGNsYXNzPVwicmVkXCIgPiR7cmVtYWluaW5nfTwvc3Bhbj5gXG4gICAgICAgICAgICAgIDogcmVtYWluaW5nXG4gICAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIG1heExlbmd0aCA9IGlucHV0LmdldEF0dHJpYnV0ZSgnbWF4bGVuZ3RoJyk7XG5cbiAgICAgIC8vIElnbm9yZSBpZiBtYXhsZW5ndGggaXMgbm90IGdpdmVuXG4gICAgICBpZiAoIW1heExlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgbGltaXQgaXMgYW4gaW50ZWdlclxuICAgICAgbWF4TGVuZ3RoID0gcGFyc2VJbnQobWF4TGVuZ3RoKTtcblxuICAgICAgLy8gQXR0YWNoIHRoZSBoYW5kbGVyc1xuICAgICAgJ2tleXByZXNzIGtleWRvd24ga2V5dXAnLnNwbGl0KCcgJykuZm9yRWFjaCgoZXZ0KSA9PiB7XG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoZXZ0LCBmbkNhbGMsIHRydWUpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEluaXRpYWxpemUgdGhlIHV0aWxpdHkgbGFiZWxcbiAgICAgIGZuQ2FsYygpO1xuICAgIH0pOyAvLyBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpbnB1dCwgaSlcbiAgfSAvLyBpZiAoaW5wdXRzICE9PSBudWxsKVxufTsgLy8gc2VlZFRleHRhcmVhXG5cbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICBtb2R1bGUuZXhwb3J0cy5zZWVkVGV4dGFyZWEgPSBzZWVkVGV4dGFyZWE7XG59XG5cbi8vIEV4cG9zZSBTZWVkQ1NTIGluIHRoZSBnbG9iYWwgc2NvcGVcbmlmICh0eXBlb2Ygd2luZG93LlNlZWRDU1MgPT09ICd1bmRlZmluZWQnKSB7XG4gIHdpbmRvdy5TZWVkQ1NTID0ge307XG59XG5cbi8vIEV4cG9zZSB0ZXh0QXJlYSBpbiB0aGUgZ2xvYmFsIHNjb3BlXG53aW5kb3cuU2VlZENTUy50ZXh0QXJlYSA9IHNlZWRUZXh0YXJlYTtcbiIsIi8qKlxuICogU2VlZC1DU1MgLSBMYW5kaW5nIFBhZ2UuXG4gKiBAYXV0aG9yIFJvZ2VyaW8gVGFxdWVzXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9BYnR6TGFicy9zZWVkLWNzc1xuICogQGNvcHlyaWdodCAyMDE5LCBBYnR6IExhYnNcbiAqIEBsaWNlbnNlIHByaXZhdGVcbiAqL1xuXG4oKCkgPT4ge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICAqIEVuYWJsZXMgdGhlIGdyaWQgcGxheWdyb3VuZCB3aGVyZSB1c2VyIGNhbiBhZGQgYW5kIHJlbW92ZVxuICAgKiBjb2xsdW1ucyBpbiB0aGUgc2FtcGxlIHBhZ2UuXG4gICAqL1xuICBjb25zdCBlbmFibGVHcmlkUGxheWdyb3VuZCA9ICgpID0+IHtcbiAgICAvLyBhZGQgY29sdW1uc1xuICAgICQoJyNhZGQtY29sJylcbiAgICAgIC5vZmYoJ2NsaWNrJylcbiAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgaWYgKGV2dCkge1xuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgcm93ID0gJCgnI2ZsZXhpYmxlLWNvbHMnKTtcbiAgICAgICAgY29uc3QgY29scyA9IHJvdy5maW5kKCcuY29sJyk7XG5cbiAgICAgICAgaWYgKGNvbHMubGVuZ3RoIDwgMTIpIHtcbiAgICAgICAgICBjb25zdCBjb3VudCA9IGNvbHMubGVuZ3RoO1xuICAgICAgICAgIGNvbnN0IHJlbWFpbiA9IDEyIC0gY291bnQ7XG4gICAgICAgICAgY29uc3QgbGFzdENsYXNzID0gJ3NtLScgKyByZW1haW47XG5cbiAgICAgICAgICByb3cuZmluZCgnLmNvbCcpLnJlbW92ZUNsYXNzKCdzbS0xIHNtLTIgc20tMyBzbS00IHNtLTUgc20tNiBzbS03IHNtLTggc20tOSBzbS0xMCBzbS0xMSBzbS0xMicpO1xuXG4gICAgICAgICAgcm93LmZpbmQoJy5jb2w6bGFzdCcpLmFmdGVyKCQoJzxkaXYgLz4nLCB7IGNsYXNzOiAnY29sIGFsaWduLWNlbnRlcicgfSkuaHRtbChjb3VudCArIDEpKTtcblxuICAgICAgICAgIHJvdy5maW5kKCcuY29sJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3NtLTEnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJvdy5maW5kKCcuY29sOmxhc3QnKS50b2dnbGVDbGFzcygnc20tMSAnICsgbGFzdENsYXNzKTtcblxuICAgICAgICAgICQoJyNyZW0tY29sJykuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29scy5sZW5ndGggPj0gMTEpIHtcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgLy8gcmVtb3ZlIGNvbHVtbnNcbiAgICAkKCcjcmVtLWNvbCcpXG4gICAgICAub2ZmKCdjbGljaycpXG4gICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgIGlmIChldnQpIHtcbiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJvdyA9ICQoJyNmbGV4aWJsZS1jb2xzJyk7XG4gICAgICAgIGNvbnN0IGNvbHMgPSByb3cuZmluZCgnLmNvbCcpO1xuXG4gICAgICAgIGlmIChjb2xzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBjb25zdCByZW1haW4gPSBjb2xzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgY29uc3QgbGFzdENsYXNzID0gJ3NtLScgKyAoMTIgLSByZW1haW4gKyAxKTtcblxuICAgICAgICAgIHJvdy5maW5kKCcuY29sOmxhc3QnKS5yZW1vdmUoKTtcblxuICAgICAgICAgIHJvd1xuICAgICAgICAgICAgLmZpbmQoJy5jb2w6bGFzdCcpXG4gICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3NtLTEgc20tMiBzbS0zIHNtLTQgc20tNSBzbS02IHNtLTcgc20tOCBzbS05IHNtLTEwIHNtLTExIHNtLTEyJylcbiAgICAgICAgICAgIC5hZGRDbGFzcyhsYXN0Q2xhc3MpO1xuXG4gICAgICAgICAgJCgnI2FkZC1jb2wnKS5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb2xzLmxlbmd0aCA8PSAyKSB7XG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfTtcblxuICAvLyBJbml0IGdyaWQgcGxheWdyb3VuZFxuICBlbmFibGVHcmlkUGxheWdyb3VuZCgpO1xuXG4gIGlmICh0eXBlb2YgU2VlZENTUyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zdCBtID0gU2VlZENTUy5tb2RhbCgpOyAvLyBJbml0IHRoZSBtb2RhbCBoZWxwZXJcbiAgICBjb25zdCBtb2RhbCA9IG0uZ2V0KCcjbW9kYWwnKTtcbiAgICBjb25zdCBjID0gU2VlZENTUy5vZmZDYW52YXMoKTsgLy8gSW5pdCB0aGUgb2ZmQ2FudmFzIGhlbHBlclxuICAgIGNvbnN0IGNhbnZhcyA9IGMuZ2V0KCcjc2lkZW5hdicpO1xuICAgIGNvbnN0IGZ1ID0gU2VlZENTUy5maWxlVXBsb2FkKCk7IC8vIEluaXQgdGhlIGZpbGVVcGxvYWQgaGVscGVyXG4gICAgY29uc3QgdXBsb2FkID0gZnUuZ2V0KCcjZmlsZScpO1xuXG4gICAgLy8gRGVmaW5lcyBhIHNwZWNpYWwgaW5pdGlhbGl6YXRpb24gb3B0aW9ucyBmb3IgdGhlIHNjcm9sbFxuICAgIGNvbnN0IHNjcm9sbE9wdGlvbnMgPSB7XG4gICAgICBzcHlTY3JvbGxTZWxlY3RvcjogJ2Euc21vb3RoJyxcbiAgICAgIHJldmVhbEVsZW1lbnRTZWxlY3RvcjogJy5yZXZlYWwuYW5pbWF0ZWQnLFxuICAgICAgcmV2ZWFsU2luZ2xlQW5pbWF0aW9uOiAnYW5pbWF0ZWQtb25jZScsXG4gICAgICByZXZlYWxXaGVuVmlzaWJsZTogJ2JvdW5jZUluJyxcbiAgICAgIHJldmVhbFdoZW5IaWRkZW46ICdib3VuY2VPdXQnLFxuICAgICAgcmV2ZWFsU3BhY2VPZmZzZXQ6IDIuNSxcbiAgICAgIGd1dHRlcjogMTUwXG4gICAgfTtcblxuICAgIFNlZWRDU1MudGV4dEFyZWEoKTsgLy8gSW5pdCB0aGUgdGV4dEFyZWEgaGVscGVyXG4gICAgU2VlZENTUy5zY3JvbGwoc2Nyb2xsT3B0aW9ucyk7IC8vIEluaXQgdGhlIHNjcm9sbCBoZWxwZXJcblxuICAgIGlmIChtb2RhbCkge1xuICAgICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignbW9kYWwub3BlbmVkJywgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kYWwgT3BlbmVkJyk7XG4gICAgICB9KTtcblxuICAgICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignbW9kYWwuY2xvc2VkJywgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kYWwgQ2xvc2VkJyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoY2FudmFzKSB7XG4gICAgICBsZXQgY2FudmFzU3R5bGVTd2l0Y2hlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNvZmZjYW52YXMtc3R5bGUnKTtcblxuICAgICAgaWYgKGNhbnZhc1N0eWxlU3dpdGNoZXIpIHtcbiAgICAgICAgY2FudmFzU3R5bGVTd2l0Y2hlci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKGNhbnZhc1N0eWxlU3dpdGNoZXIudmFsdWUgPT09ICdvdmVybGF5Jykge1xuICAgICAgICAgICAgY2FudmFzLmNsYXNzTGlzdC5hZGQoJ292ZXJsYXknKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FudmFzLmNsYXNzTGlzdC5yZW1vdmUoJ292ZXJsYXknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY2FudmFzLm9wZW5lZCcsICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1NpZGUgTWVudSBPcGVuZWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY2FudmFzLmNsb3NlZCcsICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1NpZGUgTWVudSBDbG9zZWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwuY29tcGxldGUnLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGaW5pc2hlZCBzbW9vdGggc2Nyb2xsaW5nJyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodXBsb2FkKSB7XG4gICAgICB1cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcignZmlsZS5jaG9zZW4nLCAoZXZ0KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGaWxlKHMpIGFkZGVkIHRvIEZpbGVVcGxvYWQuJyk7XG5cbiAgICAgICAgY29uc3QgZXJyb3IgPSBldnQuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4uZXJyb3InKTtcblxuICAgICAgICAvLyBBZGQgdGhlIHN1Y2Nlc3MgZmVlZGJhY2sgY2xhc3Nlc1xuICAgICAgICBldnQuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2hhcy1mZWVkYmFjaycpO1xuICAgICAgICBldnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdzdWNjZXNzJyk7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIG5vIGVycm9ycyBhcmUgZGlzcGxheWVkXG4gICAgICAgIGV2dC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgZXJyb3IucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB1cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcignZmlsZS5yZW1vdmVkJywgKGV2dCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnRmlsZShzKSByZW1vdmVkIGZyb20gRmlsZVVwbG9hZC4nKTtcblxuICAgICAgICBjb25zdCBsYmwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIGNvbnN0IGVycm9yID0gZXZ0LmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdzcGFuLmVycm9yJyk7XG5cbiAgICAgICAgbGJsLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XG4gICAgICAgIGxibC5pbm5lckhUTUwgPSAnU2VsZWN0IGF0IGxlYXN0IG9uZSBmaWxlLic7XG5cbiAgICAgICAgLy8gQWRkIHRoZSBlcnJvciBmZWVkYmFjayBjbGFzc2VzXG4gICAgICAgIGV2dC5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnaGFzLWZlZWRiYWNrJyk7XG4gICAgICAgIGV2dC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIGl0IGRpc3BsYXllcyB0aGUgZXJyb3IgbGFiZWxcbiAgICAgICAgZXZ0LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnc3VjY2VzcycpO1xuXG4gICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICBldnQuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGxibCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSkoKTtcbiJdfQ==
