"use strict";!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}return"function"!=typeof window.CustomEvent&&(t.prototype=window.Event.prototype,void(window.CustomEvent=t))}();
"use strict";var seedFileUpload=function(){var e,t=function(t){t&&t.preventDefault();var i=!1,n=this,r=n.nextElementSibling;n.files&&n.files.length>1?i=(n.getAttribute("data-multiple")||"{count} files").replace("{count}",n.files.length):n.value.trim().length>0&&(i=n.value.split("\\").pop()),i&&(r.querySelector(".input").innerHTML=i),""!==n.value&&(e=new CustomEvent("file.chosen"),n.parentNode.classList.add("chosen"),n.dispatchEvent(e))},i=document.querySelectorAll('.seed-file > [type="file"]');return null!==i&&i.forEach(function(i,n){var r=i.nextElementSibling,l=r.querySelector(".cancel"),u=i.getAttribute("data-empty")||"No file chosen";r&&(i.getAttribute("id")&&i.getAttribute("id")!==r.getAttribute("for")?r.setAttribute("for",i.getAttribute("id")):r.getAttribute("for")&&!i.getAttribute("id")?i.setAttribute("id",r.getAttribute("for")):r.getAttribute("for")||i.getAttribute("id")||(i.setAttribute("id","file-input-"+n),r.setAttribute("for","file-input-"+n)),l&&l.addEventListener("click",function(t){t&&t.preventDefault();var n=i.getAttribute("data-empty")||"No file chosen";i.value="",i.parentNode.classList.remove("chosen"),r.querySelector(".input").innerHTML=n,e=new CustomEvent("file.removed"),i.dispatchEvent(e)}),r.querySelector(".input").innerHTML=u,i.addEventListener("change",t))}),{get:function(e){if("string"==typeof e){var t=!1;return i.forEach(function(i){if(i.id===e.replace(/^#/,""))return void(t=i)}),t}return"undefined"!=typeof i[e]&&i[e]}}};"undefined"!=typeof module&&(module.exports.fileUpload=fileUpload),"undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.fileUpload=seedFileUpload;
"use strict";var fnOpen,fnClose,fnEsc,seedModal=function(e){var n={trigger:'[role="modal"]',classAnimation:{open:"bounceInDown",close:"bounceOutUp"}};e=Object.assign({},n,e);var o=document.querySelectorAll(".modal"),t=document.querySelectorAll(e.trigger);return fnClose=function(n){if(n){var o,t=document.querySelector("html"),a=n.querySelector(".modal-window");a&&(document.removeEventListener("keydown",fnEsc),a.classList.replace(e.classAnimation.open,e.classAnimation.close),n.classList.add("delay-1s"),n.classList.replace("fadeIn","fadeOut"),setTimeout(function(){o=new CustomEvent("modal.closed"),n.dispatchEvent(o),n.classList.add("hide"),t.style.overflow="",n.classList.remove("delay-1s","fadeOut"),a.classList.replace(e.classAnimation.close,e.classAnimation.open)},600))}},fnOpen=function(n){if(n){var o,t=document.querySelector("html"),a=n.querySelector(".modal-window");fnEsc=function(e){var o=e.keyCode||e.which;27===o&&fnClose(n)},a&&(document.addEventListener("keydown",fnEsc),n.style.display="",n.classList.add("animated","fadeIn","fast"),a.classList.add("animated",e.classAnimation.open),n.classList.remove("hide"),t.style.overflow="hidden",setTimeout(function(){o=new CustomEvent("modal.opened"),n.dispatchEvent(o)},100))}},null!==o&&o.forEach(function(e,n){var o=e.querySelectorAll('[role="modal-dismiss"]');e.addEventListener("click",function(n){for(var o=n.target,t=!1;"html"!==o.nodeName.toLowerCase();){if(o.classList.contains("modal-window")){t=!0;break}o=o.parentNode}t||fnClose(e)}),e.show=function(){fnOpen(e)},e.hide=function(){fnClose(e)},null!==o&&o.forEach(function(n,o){n.addEventListener("click",function(n){n&&(n.preventDefault(),n.stopPropagation()),fnClose(e)})})}),null!==t&&t.forEach(function(e,n){e.addEventListener("click",function(n){n&&n.preventDefault();var o=e.getAttribute("data-modal-id");if(null!==o){var t=document.querySelector("#".concat(o));fnOpen(t)}})}),t=void 0,{get:function(e){if("string"==typeof e){var n=!1;return o.forEach(function(o){if(o.id===e.replace(/^#/,""))return void(n=o)}),n}return"undefined"!=typeof o[e]&&o[e]}}};"undefined"!=typeof module&&(module.exports.seedModal=seedModal),"undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.modal=seedModal;
"use strict";var fnOutsideClickHandler,fnToggle,fnTriggerClick,seedOffCanvas=function(){var e="canvas-opened";fnOutsideClickHandler=function(t){for(var n=t.target,a=!1,c=document.querySelector("html");!a&&n&&n.parentNode;)n.classList&&!n.classList.contains("offcanvas")?n=n.parentNode:n.classList&&(a=!0);!a&&c.classList.contains(e)&&fnToggle(c.getAttribute("data-canvas-id"))},fnToggle=function(t,n){var a,c=document.querySelector("#".concat(t.replace(/^#/,""))),o=n||document.querySelector('[role="offcanvas"][data-id="'.concat(t.replace(/^#/,""),'"]'));if(null!==c){var s=document.querySelector("html");s.classList.contains(e)?(c.classList.remove("open"),document.querySelectorAll('[role="offcanvas"][data-id="'.concat(t.replace(/^#/,""),'"]')).forEach(function(e){e.classList.remove("triggered")}),s.removeEventListener("click",fnOutsideClickHandler),s.style.overflow=""):(c.classList.add("open"),null!==o&&o.classList.add("triggered"),s.addEventListener("click",fnOutsideClickHandler),s.style.overflow="hidden"),setTimeout(function(){c.classList.contains("open")?(s.classList.add(e),s.setAttribute("data-canvas-id",t.replace(/^#/,"")),a=new CustomEvent("canvas.opened")):(s.classList.remove(e),a=new CustomEvent("canvas.closed")),c.dispatchEvent(a)},300)}},fnTriggerClick=function(e){e&&e.preventDefault(),fnToggle(e.currentTarget.getAttribute("data-id")||"offcanvas",e.currentTarget)};var t=document.querySelectorAll('[role="offcanvas"]'),n=document.querySelectorAll(".offcanvas");return null!==t&&t.forEach(function(e,t){e.addEventListener("click",fnTriggerClick,!1)}),null!==n&&n.forEach(function(t,n){t.open=function(){var n=document.querySelector("html");n.classList.contains(e)||fnToggle(t.getAttribute("id")||"offcanvas")},t.close=function(){var n=document.querySelector("html");n.classList.contains(e)&&fnToggle(t.getAttribute("id")||"offcanvas")},t.toggle=function(){fnToggle(t.getAttribute("id")||"offcanvas")}}),{get:function(e){if("string"==typeof e){var t=!1;return n.forEach(function(n){if(n.id===e.replace(/^#/,""))return void(t=n)}),t}return"undefined"!=typeof canvas[e]&&canvas[e]}}};"undefined"!=typeof module&&(module.exports.seedOffCanvas=seedOffCanvas),"undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.offCanvas=seedOffCanvas;
"use strict";var seedScroll=function(e){var t=null,n=null,o=0,i={spyScrollSelector:"nav a.smooth",revealElementSelector:".reveal",revealSpaceOffset:.2,revealWhenVisible:"visible",revealSingleAnimation:"visible-once",revealWhenHidden:"hidden",gutter:50},l=function(e){t.forEach(function(e){e.classList.remove("active")}),e&&e.classList.add("active")},r=function(e){var t=document.body.getBoundingClientRect(),n=e?e.getBoundingClientRect():0;return{top:Math.ceil(n.top-t.top),left:Math.ceil(n.left-t.left)}},c=function(n){if(window.scrollY===o){var i=new CustomEvent("scroll.complete");document.dispatchEvent(i)}if(t){var c=r(t[0]);window.scrollY<c.top&&l(),t.forEach(function(t,n){try{var o=t.getAttribute("href")||t.getAttribute("data-target"),i=document.querySelector(o),c=r(i);if(c.top-e.gutter<=window.scrollY)return void l(t)}catch(d){}})}"function"==typeof window.oldOnscroll&&window.oldOnscroll(n)},d=function(t){t&&t.preventDefault();var n=t.currentTarget.getAttribute("href")||t.currentTarget.getAttribute("data-target");if(n){var i=document.querySelector(n);o=r(i).top-e.gutter,window.scrollTo({behavior:"smooth",left:0,top:o})}},a=function(){var t=function(){return{width:window.document.documentElement.clientWidth,height:window.document.documentElement.clientHeight}},o=function(){return{x:window.pageXOffset,y:window.pageYOffset}},i=function(e){var t=e,n=0,o=0,i=t.offsetWidth,l=t.offsetHeight;do isNaN(t.offsetTop)||(n+=t.offsetTop),isNaN(t.offsetLeft)||(o+=t.offsetLeft);while(null!==(t=t.offsetParent));return{top:n,left:o,height:l,width:i}},l=function(n){var l=t(),r=o(),c=i(n),d=e.revealSpaceOffset,a=function(){var e=c.top+c.height*d,t=c.left+c.width*d,n=c.left+c.width-c.width*d,o=c.top+c.height-c.height*d,i=r.y+0,a=r.x+0,s=r.y-0+l.height,f=r.x-0+l.width;return e<s&&o>i&&t>a&&n<f};return a()},r=function(){if(n)for(var t=0;t<n.length;t+=1)l(n[t])?(e.revealWhenVisible&&n[t].classList.add(e.revealWhenVisible),e.revealWhenHidden&&n[t].classList.remove(e.revealWhenHidden)):n[t].classList.contains(e.revealSingleAnimation)===!1&&(e.revealWhenHidden&&n[t].classList.add(e.revealWhenHidden),e.revealWhenVisible&&n[t].classList.remove(e.revealWhenVisible))},c=function(e){r()};window.addEventListener("scroll",c,!1),window.addEventListener("resize",c,!1)};return window.oldOnscroll=window.onscroll,window.onscroll=c,e=Object.assign({},i,e),t=document.querySelectorAll(e.spyScrollSelector),n=document.querySelectorAll(e.revealElementSelector),null!==t&&t.forEach(function(e,t){e.addEventListener("click",d,!1)}),n&&a(),{}};"undefined"!=typeof module&&(module.exports.seedScroll=seedScroll),"undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.scroll=seedScroll;
"use strict";var seedTextarea=function(){var e=document.querySelectorAll(".field > textarea");null!==e&&e.forEach(function(e,t){var a=0,r=e.parentNode,n=r.querySelector('[role="counter"]'),o=n.getAttribute("data-template")||"Typed %a out of %b. Remaining %c.",d=function(){var t=e.value.replace(/[\n\r]/g,"").length,r=a-t,d=Math.floor(.1*a);n.innerHTML=o.replace("%a",t).replace("%b",a).replace("%c",r<=d?'<span class="red" >'.concat(r,"</span>"):r)};a=e.getAttribute("maxlength"),a&&(a=parseInt(a),"keypress keydown keyup".split(" ").forEach(function(t){e.addEventListener(t,d,!0)}),d())})};"undefined"!=typeof module&&(module.exports.seedTextarea=seedTextarea),"undefined"==typeof window.SeedCSS&&(window.SeedCSS={}),window.SeedCSS.textArea=seedTextarea;
"use strict";!function(){var e=function(){$("#add-col").off("click").on("click",function(e){e&&e.preventDefault();var s=$("#flexible-cols"),l=s.find(".col");if(l.length<12){var n=l.length,t=12-n,a="sm-"+t;s.find(".col").removeClass("sm-1 sm-2 sm-3 sm-4 sm-5 sm-6 sm-7 sm-8 sm-9 sm-10 sm-11 sm-12"),s.find(".col:last").after($("<div />",{"class":"col align-center"}).html(n+1)),s.find(".col").each(function(){$(this).addClass("sm-1")}),s.find(".col:last").toggleClass("sm-1 "+a),$("#rem-col").attr("disabled",!1)}l.length>=11&&$(this).attr("disabled",!0)}),$("#rem-col").off("click").on("click",function(e){e&&e.preventDefault();var s=$("#flexible-cols"),l=s.find(".col");if(l.length>1){var n=l.length-1,t="sm-"+(12-n+1);s.find(".col:last").remove(),s.find(".col:last").removeClass("sm-1 sm-2 sm-3 sm-4 sm-5 sm-6 sm-7 sm-8 sm-9 sm-10 sm-11 sm-12").addClass(t),$("#add-col").attr("disabled",!1)}l.length<=2&&$(this).attr("disabled",!0)})};if(e(),"undefined"!=typeof SeedCSS){var s=SeedCSS.modal(),l=s.get("#modal"),n=SeedCSS.offCanvas(),t=n.get("#sidenav"),a=SeedCSS.fileUpload(),o=a.get("#file"),r={spyScrollSelector:"a.smooth",revealElementSelector:".reveal.animated",revealSingleAnimation:"animated-once",revealWhenVisible:"bounceIn",revealWhenHidden:"bounceOut",revealSpaceOffset:2.5,gutter:150};if(SeedCSS.textArea(),SeedCSS.scroll(r),l&&(l.addEventListener("modal.opened",function(){console.log("Modal Opened")}),l.addEventListener("modal.closed",function(){console.log("Modal Closed")})),t){var d=document.querySelector("#offcanvas-style");d&&d.addEventListener("change",function(){"overlay"===d.value?t.classList.add("overlay"):t.classList.remove("overlay")}),t.addEventListener("canvas.opened",function(){console.log("Side Menu Opened")}),t.addEventListener("canvas.closed",function(){console.log("Side Menu Closed")}),document.addEventListener("scroll.complete",function(){console.log("Finished smooth scrolling")})}o&&(o.addEventListener("file.chosen",function(e){console.log("File(s) added to FileUpload.");var s=e.currentTarget.parentNode.querySelector("span.error");e.currentTarget.parentNode.classList.add("has-feedback"),e.currentTarget.classList.add("success"),e.currentTarget.classList.remove("error"),s&&s.remove()}),o.addEventListener("file.removed",function(e){console.log("File(s) removed from FileUpload.");var s=document.createElement("span"),l=e.currentTarget.parentNode.querySelector("span.error");s.classList.add("error"),s.innerHTML="Select at least one file.",e.currentTarget.parentNode.classList.add("has-feedback"),e.currentTarget.classList.add("error"),e.currentTarget.classList.remove("success"),l||e.currentTarget.parentNode.appendChild(s)}))}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbUV2ZW50UG9seWZpbGwuanMiLCJzZWVkRmlsZVVwbG9hZC5qcyIsInNlZWRNb2RhbC5qcyIsInNlZWRPZmZDYW52YXMuanMiLCJzZWVkU2Nyb2xsLmpzIiwic2VlZFRleHRhcmVhLmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJDdXN0b21FdmVudCIsImV2ZW50IiwicGFyYW1zIiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJkZXRhaWwiLCJ1bmRlZmluZWQiLCJldnQiLCJkb2N1bWVudCIsImNyZWF0ZUV2ZW50IiwiaW5pdEN1c3RvbUV2ZW50Iiwid2luZG93IiwicHJvdG90eXBlIiwiRXZlbnQiLCJzZWVkRmlsZVVwbG9hZCIsInNlZWRDdXN0b21FdmVudCIsImZuQ2hhbmdlIiwicHJldmVudERlZmF1bHQiLCJmaWxlTmFtZSIsImlucHV0IiwidGhpcyIsImxhYmVsIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiZmlsZXMiLCJsZW5ndGgiLCJnZXRBdHRyaWJ1dGUiLCJyZXBsYWNlIiwidmFsdWUiLCJ0cmltIiwic3BsaXQiLCJwb3AiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwicGFyZW50Tm9kZSIsImNsYXNzTGlzdCIsImFkZCIsImRpc3BhdGNoRXZlbnQiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImkiLCJjYW5jZWwiLCJlbXB0eVRleHQiLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwiZ2V0IiwiaWR4IiwiZmlsZVVwbG9hZCIsIm5vZGUiLCJpZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJTZWVkQ1NTIiwiZm5PcGVuIiwiZm5DbG9zZSIsImZuRXNjIiwic2VlZE1vZGFsIiwib3B0aW9ucyIsImRlZmF1bHRPcHRpb25zIiwidHJpZ2dlciIsImNsYXNzQW5pbWF0aW9uIiwib3BlbiIsImNsb3NlIiwiT2JqZWN0IiwiYXNzaWduIiwibW9kYWxzIiwibW9kYWxUcmlnZ2VycyIsIm1vZGFsT2JqZWN0IiwiY3VzdG9tRXZlbnQiLCJodG1sIiwibVdpbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRUaW1lb3V0Iiwic3R5bGUiLCJvdmVyZmxvdyIsImUiLCJrZXkiLCJrZXlDb2RlIiwid2hpY2giLCJkaXNwbGF5IiwibW9kYWwiLCJkaXNtaXNzYWxzIiwidGFyZ2V0IiwiYWJvcnQiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwiY29udGFpbnMiLCJzaG93IiwiaGlkZSIsImRpc21pc3MiLCJqIiwic3RvcFByb3BhZ2F0aW9uIiwicmVmIiwiY29uY2F0IiwiZm5PdXRzaWRlQ2xpY2tIYW5kbGVyIiwiZm5Ub2dnbGUiLCJmblRyaWdnZXJDbGljayIsInNlZWRPZmZDYW52YXMiLCJvcGVuZWRPZmZjYW52YXNDbGFzcyIsImV2IiwiYSIsImZvdW5kIiwiY2FudmFzSUQiLCJ0cmlnZ2VyRWxlbWVudCIsImNhbnZhcyIsInRnciIsImN1cnJlbnRUYXJnZXQiLCJ0cmlnZ2VycyIsImNhbnZhc2VzIiwidG9nZ2xlIiwib2ZmQ2FudmFzIiwic2VlZFNjcm9sbCIsInJldmVhbGVycyIsInNjcm9sbFRhcmdldCIsInNweVNjcm9sbFNlbGVjdG9yIiwicmV2ZWFsRWxlbWVudFNlbGVjdG9yIiwicmV2ZWFsU3BhY2VPZmZzZXQiLCJyZXZlYWxXaGVuVmlzaWJsZSIsInJldmVhbFNpbmdsZUFuaW1hdGlvbiIsInJldmVhbFdoZW5IaWRkZW4iLCJndXR0ZXIiLCJmblVwZGF0ZUFjdGl2ZVRyaWdnZXIiLCJlbGVtIiwiZWwiLCJmbkdldE9mZnNldCIsImJvZHlPZmZzZXQiLCJib2R5IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwib2Zmc2V0IiwidG9wIiwiTWF0aCIsImNlaWwiLCJsZWZ0IiwiZm5TY3JvbGxDb21wbGV0ZSIsInNjcm9sbFkiLCJmaXJzdEVsZW1lbnRPZmZzZXQiLCJ0YXJnZXRJRCIsIm9sZE9uc2Nyb2xsIiwic2Nyb2xsVG8iLCJiZWhhdmlvciIsImZuV2F0Y2hFbGVtZW50cyIsImdldFZpZXdwb3J0U2l6ZSIsIndpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJoZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJnZXRDdXJyZW50U2Nyb2xsIiwieCIsInBhZ2VYT2Zmc2V0IiwieSIsInBhZ2VZT2Zmc2V0IiwiZ2V0RWxlbUluZm8iLCJvZmZzZXRUb3AiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJpc05hTiIsIm9mZnNldFBhcmVudCIsImlzRWxlbWVudFZpc2libGUiLCJ2aWV3cG9ydFNpemUiLCJjdXJyZW50U2Nyb2xsIiwiZUluZiIsInNwYWNlT2Zmc2V0IiwiY2hlY2tCb3VuZGFyaWVzIiwiZVRvcCIsImVMZWZ0IiwiZVJpZ2h0IiwiZUJvdHRvbSIsIndUb3AiLCJ3TGVmdCIsIndCb3R0b20iLCJ3UmlnaHQiLCJ0b2dnbGVFbGVtZW50Iiwic2Nyb2xsUmVzaXplSGFuZGxlciIsIm9uc2Nyb2xsIiwic2Nyb2xsIiwic2VlZFRleHRhcmVhIiwibWF4TGVuZ3RoIiwicGFyZW50IiwiY291bnRlckxhYmVsIiwidGVtcGxhdGUiLCJmbkNhbGMiLCJ0eXBlZCIsInJlbWFpbmluZyIsIm1pbkxlbmd0aCIsImZsb29yIiwicGFyc2VJbnQiLCJ0ZXh0QXJlYSIsImVuYWJsZUdyaWRQbGF5Z3JvdW5kIiwiJCIsIm9mZiIsIm9uIiwicm93IiwiY29scyIsImZpbmQiLCJjb3VudCIsInJlbWFpbiIsImxhc3RDbGFzcyIsInJlbW92ZUNsYXNzIiwiYWZ0ZXIiLCJjbGFzcyIsImVhY2giLCJhZGRDbGFzcyIsInRvZ2dsZUNsYXNzIiwiYXR0ciIsIm0iLCJjIiwiZnUiLCJ1cGxvYWQiLCJzY3JvbGxPcHRpb25zIiwiY29uc29sZSIsImxvZyIsImNhbnZhc1N0eWxlU3dpdGNoZXIiLCJlcnJvciIsImxibCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCJdLCJtYXBwaW5ncyI6IkFBQUEsY0FLQSxXQUdFLFFBQVNBLEdBQVlDLEVBQU9DLEdBQzFC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RUFBT3RLLGlCQUFpQixjQUFlLFNBQUNyQyxHQUN0QzZNLFFBQVFDLElBQUksK0JBRVosSUFBTUUsR0FBUWhOLEVBQUlvRyxjQUFjMUUsV0FBV0YsY0FBYyxhQUd6RHhCLEdBQUlvRyxjQUFjMUUsV0FBV0MsVUFBVUMsSUFBSSxnQkFDM0M1QixFQUFJb0csY0FBY3pFLFVBQVVDLElBQUksV0FHaEM1QixFQUFJb0csY0FBY3pFLFVBQVVXLE9BQU8sU0FFL0IwSyxHQUNGQSxFQUFNMUssV0FJVnFLLEVBQU90SyxpQkFBaUIsZUFBZ0IsU0FBQ3JDLEdBQ3ZDNk0sUUFBUUMsSUFBSSxtQ0FFWixJQUFNRyxHQUFNaE4sU0FBU2lOLGNBQWMsUUFDN0JGLEVBQVFoTixFQUFJb0csY0FBYzFFLFdBQVdGLGNBQWMsYUFFekR5TCxHQUFJdEwsVUFBVUMsSUFBSSxTQUNsQnFMLEVBQUl4TCxVQUFZLDRCQUdoQnpCLEVBQUlvRyxjQUFjMUUsV0FBV0MsVUFBVUMsSUFBSSxnQkFDM0M1QixFQUFJb0csY0FBY3pFLFVBQVVDLElBQUksU0FHaEM1QixFQUFJb0csY0FBY3pFLFVBQVVXLE9BQU8sV0FFOUIwSyxHQUNIaE4sRUFBSW9HLGNBQWMxRSxXQUFXeUwsWUFBWUYiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIVxuICogQSBzaW1wbGUgcG9seWZpbGwgZm9yIEN1c3RvbUV2ZW50XG4gKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DdXN0b21FdmVudC9DdXN0b21FdmVudCNQb2x5ZmlsbFxuICovXG5cbihmdW5jdGlvbiAoKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50ID09PSAnZnVuY3Rpb24nKSByZXR1cm4gZmFsc2U7XG5cbiAgZnVuY3Rpb24gQ3VzdG9tRXZlbnQoZXZlbnQsIHBhcmFtcykge1xuICAgIHBhcmFtcyA9IHBhcmFtcyB8fCB7IGJ1YmJsZXM6IGZhbHNlLCBjYW5jZWxhYmxlOiBmYWxzZSwgZGV0YWlsOiB1bmRlZmluZWQgfTtcbiAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgZXZ0LmluaXRDdXN0b21FdmVudChcbiAgICAgIGV2ZW50LFxuICAgICAgcGFyYW1zLmJ1YmJsZXMsXG4gICAgICBwYXJhbXMuY2FuY2VsYWJsZSxcbiAgICAgIHBhcmFtcy5kZXRhaWxcbiAgICApO1xuICAgIHJldHVybiBldnQ7XG4gIH1cblxuICBDdXN0b21FdmVudC5wcm90b3R5cGUgPSB3aW5kb3cuRXZlbnQucHJvdG90eXBlO1xuXG4gIHdpbmRvdy5DdXN0b21FdmVudCA9IEN1c3RvbUV2ZW50O1xufSkoKTtcbiIsIi8qKiFcbiAqIFNlZWQtQ1NTIC0gQ3VzdG9tIEhUTUwgSW5wdXQgRmlsZS5cbiAqIEBjb3B5cmlnaHQgMjAxOSwgQWJ0eiBMYWJzXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5jb25zdCBzZWVkRmlsZVVwbG9hZCA9IGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgbGV0IHNlZWRDdXN0b21FdmVudDtcblxuICBjb25zdCBmbkNoYW5nZSA9IGZ1bmN0aW9uIGZuQ2hhbmdlKGV2dCkge1xuICAgIGlmIChldnQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIGxldCBmaWxlTmFtZSA9IGZhbHNlO1xuXG4gICAgY29uc3QgaW5wdXQgPSB0aGlzO1xuICAgIGNvbnN0IGxhYmVsID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgLy8gV2hlbiBtdWx0aXBsZSBmaWxlcyBhcmUgc2VsZWN0ZWRcbiAgICBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXMubGVuZ3RoID4gMSkge1xuICAgICAgZmlsZU5hbWUgPSAoaW5wdXQuZ2V0QXR0cmlidXRlKCdkYXRhLW11bHRpcGxlJykgfHwgJ3tjb3VudH0gZmlsZXMnKS5yZXBsYWNlKCd7Y291bnR9JywgaW5wdXQuZmlsZXMubGVuZ3RoKTtcbiAgICB9XG5cbiAgICAvLyBXaGVuIG9ubHkgb25lIGZpbGUgaXMgc2VsZWN0ZWRcbiAgICBlbHNlIGlmIChpbnB1dC52YWx1ZS50cmltKCkubGVuZ3RoID4gMCkge1xuICAgICAgZmlsZU5hbWUgPSBpbnB1dC52YWx1ZS5zcGxpdCgnXFxcXCcpLnBvcCgpO1xuICAgIH1cblxuICAgIGlmIChmaWxlTmFtZSkge1xuICAgICAgbGFiZWwucXVlcnlTZWxlY3RvcignLmlucHV0JykuaW5uZXJIVE1MID0gZmlsZU5hbWU7XG4gICAgfVxuXG4gICAgaWYgKGlucHV0LnZhbHVlICE9PSAnJykge1xuICAgICAgc2VlZEN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdmaWxlLmNob3NlbicpO1xuICAgICAgaW5wdXQucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdjaG9zZW4nKTtcbiAgICAgIGlucHV0LmRpc3BhdGNoRXZlbnQoc2VlZEN1c3RvbUV2ZW50KTtcbiAgICB9XG4gIH07IC8vIGZuQ2hhbmdlXG5cbiAgLy8gRmluZCBhbGwgc2VlZC1maWxlIGlucHV0cy5cbiAgY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlZWQtZmlsZSA+IFt0eXBlPVwiZmlsZVwiXScpO1xuXG4gIGlmIChpbnB1dHMgIT09IG51bGwpIHtcbiAgICBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpbnB1dCwgaSkge1xuICAgICAgLy8gRmluZCB0aGUgZmllbGQgbGFiZWxcbiAgICAgIGNvbnN0IGxhYmVsID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgY29uc3QgY2FuY2VsID0gbGFiZWwucXVlcnlTZWxlY3RvcignLmNhbmNlbCcpO1xuICAgICAgY29uc3QgZW1wdHlUZXh0ID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdkYXRhLWVtcHR5JykgfHwgJ05vIGZpbGUgY2hvc2VuJztcblxuICAgICAgLy8gSWYgbGFiZWwgZG9lcyBub3QgZXhpc3RzLCBzaW1wbHkgZG8gbm90IHNldCBpdCB1cFxuICAgICAgaWYgKCFsYWJlbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSBpbnB1dCBhbmQgbGFiZWwgbWF0Y2hlcyBhbmQgd29ya3MuXG4gICAgICBpZiAoaW5wdXQuZ2V0QXR0cmlidXRlKCdpZCcpICYmIGlucHV0LmdldEF0dHJpYnV0ZSgnaWQnKSAhPT0gbGFiZWwuZ2V0QXR0cmlidXRlKCdmb3InKSkge1xuICAgICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIGlucHV0LmdldEF0dHJpYnV0ZSgnaWQnKSk7XG4gICAgICB9IGVsc2UgaWYgKGxhYmVsLmdldEF0dHJpYnV0ZSgnZm9yJykgJiYgIWlucHV0LmdldEF0dHJpYnV0ZSgnaWQnKSkge1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgbGFiZWwuZ2V0QXR0cmlidXRlKCdmb3InKSk7XG4gICAgICB9IGVsc2UgaWYgKCFsYWJlbC5nZXRBdHRyaWJ1dGUoJ2ZvcicpICYmICFpbnB1dC5nZXRBdHRyaWJ1dGUoJ2lkJykpIHtcbiAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsICdmaWxlLWlucHV0LScgKyBpKTtcbiAgICAgICAgbGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAnZmlsZS1pbnB1dC0nICsgaSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFsd2F5cyB0aGUgY2FuY2VsIGJ1dHRvbiBleGlzdHMsIGFkZHMgYSBoYW5kbGVyXG4gICAgICBpZiAoY2FuY2VsKSB7XG4gICAgICAgIGNhbmNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgICAgICBpZiAoZXZ0KSB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBlbXB0eVRleHQgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZW1wdHknKSB8fCAnTm8gZmlsZSBjaG9zZW4nO1xuXG4gICAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgICBpbnB1dC5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2Nob3NlbicpO1xuICAgICAgICAgIGxhYmVsLnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dCcpLmlubmVySFRNTCA9IGVtcHR5VGV4dDtcblxuICAgICAgICAgIHNlZWRDdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnZmlsZS5yZW1vdmVkJyk7XG4gICAgICAgICAgaW5wdXQuZGlzcGF0Y2hFdmVudChzZWVkQ3VzdG9tRXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgbGFiZWwucXVlcnlTZWxlY3RvcignLmlucHV0JykuaW5uZXJIVE1MID0gZW1wdHlUZXh0O1xuXG4gICAgICAvLyBTdGFydCBsaXN0ZW5pbmcgdGhlIGZpZWxkIGZvciBjaGFuZ2VzXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmbkNoYW5nZSk7XG4gICAgfSk7IC8vIGlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0LCBpKVxuICB9IC8vIGlmIChpbnB1dHMgIT09IG51bGwpXG5cbiAgcmV0dXJuIHtcbiAgICBnZXQ6IChpZHgpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgaWR4ID09PSAnc3RyaW5nJykge1xuICAgICAgICBsZXQgZmlsZVVwbG9hZCA9IGZhbHNlO1xuXG4gICAgICAgIGlucHV0cy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgaWYgKG5vZGUuaWQgPT09IGlkeC5yZXBsYWNlKC9eIy8sICcnKSkge1xuICAgICAgICAgICAgZmlsZVVwbG9hZCA9IG5vZGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZmlsZVVwbG9hZDtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpbnB1dHNbaWR4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0c1tpZHhdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xufTsgLy8gc2VlZEZpbGVVcGxvYWRcblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gIG1vZHVsZS5leHBvcnRzLmZpbGVVcGxvYWQgPSBmaWxlVXBsb2FkO1xufVxuXG4vLyBFeHBvc2UgU2VlZENTUyBpbiB0aGUgZ2xvYmFsIHNjb3BlXG5pZiAodHlwZW9mIHdpbmRvdy5TZWVkQ1NTID09PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3cuU2VlZENTUyA9IHt9O1xufVxuXG4vLyBFeHBvc2UgZmlsZVVwbG9hZCBtZW51IGluIHRoZSBnbG9iYWwgc2NvcGVcbndpbmRvdy5TZWVkQ1NTLmZpbGVVcGxvYWQgPSBzZWVkRmlsZVVwbG9hZDtcbiIsIi8qKiFcbiAqIFNlZWQtQ1NTIC0gTW9kYWxcbiAqIEBjb3B5cmlnaHQgMjAxOSwgQWJ0eiBMYWJzXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5sZXQgZm5PcGVuO1xuXG5sZXQgZm5DbG9zZTtcblxubGV0IGZuRXNjO1xuXG5jb25zdCBzZWVkTW9kYWwgPSAob3B0aW9ucykgPT4ge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gRGVmYXVsdCBzZXR0aW5nc1xuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAvLyB0aGUgZWxlbWVudCB0aGF0IHRyaWdnZXJzIHRoZSBtb2RhbFxuICAgIHRyaWdnZXI6ICdbcm9sZT1cIm1vZGFsXCJdJyxcblxuICAgIC8vIEBzZWU6IGh0dHBzOi8vZGFuZWRlbi5naXRodWIuaW8vYW5pbWF0ZS5jc3MvXG4gICAgLy8gYW5pbWF0ZS5jc3MgY2xhc3NlcyB0byBiZSB1c2VkXG4gICAgY2xhc3NBbmltYXRpb246IHtcbiAgICAgIG9wZW46ICdib3VuY2VJbkRvd24nLFxuICAgICAgY2xvc2U6ICdib3VuY2VPdXRVcCdcbiAgICB9XG4gIH07XG5cbiAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblxuICAvLyBHZXQgZWxlbWVudHNcbiAgbGV0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbCcpO1xuICBsZXQgbW9kYWxUcmlnZ2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwob3B0aW9ucy50cmlnZ2VyKTtcblxuICBmbkNsb3NlID0gKG1vZGFsT2JqZWN0KSA9PiB7XG4gICAgaWYgKCFtb2RhbE9iamVjdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBjdXN0b21FdmVudDtcbiAgICBjb25zdCBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpO1xuICAgIGNvbnN0IG1XaW4gPSBtb2RhbE9iamVjdC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtd2luZG93Jyk7XG5cbiAgICBpZiAoIW1XaW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmVzIHRoZSBFU0MgbGlzdGVuZXJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZm5Fc2MpO1xuXG4gICAgLy8gUmVwbGFjZSBvcGVuIGFuaW1hdGlvbiB0byBjbG9zZSB0aGUgbW9kYWwgd2luZG93XG4gICAgbVdpbi5jbGFzc0xpc3QucmVwbGFjZShvcHRpb25zLmNsYXNzQW5pbWF0aW9uLm9wZW4sIG9wdGlvbnMuY2xhc3NBbmltYXRpb24uY2xvc2UpO1xuXG4gICAgLy8gQWRkIGFuaW1hdGlvbiB0byB0aGUgb3ZlcmxheVxuICAgIG1vZGFsT2JqZWN0LmNsYXNzTGlzdC5hZGQoJ2RlbGF5LTFzJyk7XG4gICAgbW9kYWxPYmplY3QuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhZGVJbicsICdmYWRlT3V0Jyk7XG5cbiAgICAvLyBXYWl0IDIgc2Vjb25kcyBiZWZvcmUgY29tcGxldGUgZGUgcHJvY2Vzcy5cbiAgICAvLyBUaGlzIGlzIHRoZSB0aW1lIHRvIGZpbmlzaGluZyBhbGwgYW5pbWF0ZS5jc3MgYW5pbWF0aW9uc1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgLy8gRGlzcGF0Y2ggdGhlICdtb2RhbC5jbG9zZWQnIGV2ZW50XG4gICAgICBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnbW9kYWwuY2xvc2VkJyk7XG4gICAgICBtb2RhbE9iamVjdC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcblxuICAgICAgLy8gQ29tcGxldGVseSBoaWRlIHRoZSBjb21wb25lbnRcbiAgICAgIG1vZGFsT2JqZWN0LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgIC8vIFJlZW5hYmxlIHNjcm9sbGluZyBmcm9tIHRoZSBIVE1MXG4gICAgICBodG1sLnN0eWxlLm92ZXJmbG93ID0gJyc7XG4gICAgICAvLyBSZW1vdmUgY2xvc2luZyBjbGFzc2VzIGZyb20gb3ZlcmxheVxuICAgICAgbW9kYWxPYmplY3QuY2xhc3NMaXN0LnJlbW92ZSgnZGVsYXktMXMnLCAnZmFkZU91dCcpO1xuICAgICAgLy8gUmVtb3ZlIGNsb3NpbmcgY2xhc3NlcyBmcm9tIG1vZGFsIHdpbmRvd1xuICAgICAgbVdpbi5jbGFzc0xpc3QucmVwbGFjZShvcHRpb25zLmNsYXNzQW5pbWF0aW9uLmNsb3NlLCBvcHRpb25zLmNsYXNzQW5pbWF0aW9uLm9wZW4pO1xuICAgIH0sIDYwMCk7XG4gIH07IC8vIGZuQ2xvc2VcblxuICBmbk9wZW4gPSAobW9kYWxPYmplY3QpID0+IHtcbiAgICBpZiAoIW1vZGFsT2JqZWN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGN1c3RvbUV2ZW50O1xuICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJyk7XG4gICAgY29uc3QgbVdpbiA9IG1vZGFsT2JqZWN0LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC13aW5kb3cnKTtcblxuICAgIC8vIEhhbmRsZSB0aGUgRVNDIGRpc21pc3NcbiAgICBmbkVzYyA9IGZ1bmN0aW9uIGVzY0hhbmRsZXIoZSkge1xuICAgICAgY29uc3Qga2V5ID0gZS5rZXlDb2RlIHx8IGUud2hpY2g7XG5cbiAgICAgIC8vIFdoZW4gdGhlIEVTQyBrZXkgaXMgcHJlc3NlZFxuICAgICAgaWYgKGtleSA9PT0gMjcpIHtcbiAgICAgICAgZm5DbG9zZShtb2RhbE9iamVjdCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmICghbVdpbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFkZCAoYW5kIHJlbW92ZSkgYW4gRVNDIGhhbmRsZXIgZm9yIHRoZSBvdmVybGF5XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZuRXNjKTtcblxuICAgIC8vIENsZWFyIGlubGluZSBkaXNwbGF5IHN0eWxlLCBpZiBhbnlcbiAgICBtb2RhbE9iamVjdC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgLy8gQWRkIGFuaW1hdGlvbiB0byB0aGUgb3ZlcmxheVxuICAgIG1vZGFsT2JqZWN0LmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGVkJywgJ2ZhZGVJbicsICdmYXN0Jyk7XG4gICAgLy8gQWRkIGFuaW1hdGlvbiB0byB0aGUgbW9kYWwgd2luZG93XG4gICAgbVdpbi5jbGFzc0xpc3QuYWRkKCdhbmltYXRlZCcsIG9wdGlvbnMuY2xhc3NBbmltYXRpb24ub3Blbik7XG4gICAgLy8gU2hvdyB0aGUgY29tcG9uZW50XG4gICAgbW9kYWxPYmplY3QuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgIC8vIEZpbmFsbHkgcHJldmVudCBzY3JvbGxpbmdcbiAgICBodG1sLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICAvLyBXYWl0IHRoZSBhbmltYXRpb24gY29tcGxldGUgdG8gZGlzcGF0Y2ggdGhlIGV2ZW50XG4gICAgLy8gRWFjaCBhbmltYXRlLmNzcyBhbmltYXRpb24gdGFrZXMgMXNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIERpc3BhdGNoIHRoZSAnbW9kYWwub3BlbmVkJyBldmVudFxuICAgICAgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ21vZGFsLm9wZW5lZCcpO1xuICAgICAgbW9kYWxPYmplY3QuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudCk7XG4gICAgfSwgMTAwKTtcbiAgfTsgLy8gZm5PcGVuXG5cbiAgaWYgKG1vZGFscyAhPT0gbnVsbCkge1xuICAgIG1vZGFscy5mb3JFYWNoKChtb2RhbCwgaSkgPT4ge1xuICAgICAgLy8gSGFuZGxlIHRoZSBkaXNtaXNzIGJ1dHRvbnNcbiAgICAgIGNvbnN0IGRpc21pc3NhbHMgPSBtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCdbcm9sZT1cIm1vZGFsLWRpc21pc3NcIl0nKTtcblxuICAgICAgLy8gQWRkIChhbmQgcmVtb3ZlKSBhIGNsaWNrIGhhbmRsZXIgb24gdGhlIG92ZXJsYXlcbiAgICAgIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICBsZXQgeyB0YXJnZXQgfSA9IGV2dDtcbiAgICAgICAgbGV0IGFib3J0ID0gZmFsc2U7XG5cbiAgICAgICAgLy8gRG8gbm90IGNsb3NlIHRoZSBtb2RhbCB3aGVuIHRoZSBjbGljayBpcyBpbnNpZGUgbW9kYWwtd2luZG93XG4gICAgICAgIHdoaWxlICh0YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ2h0bWwnKSB7XG4gICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsLXdpbmRvdycpKSB7XG4gICAgICAgICAgICBhYm9ydCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYWJvcnQpIHtcbiAgICAgICAgICBmbkNsb3NlKG1vZGFsKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFkZCBwcm90b3R5cGUgZm9yIHNob3cgKG9wZW4pXG4gICAgICBtb2RhbC5zaG93ID0gKCkgPT4ge1xuICAgICAgICBmbk9wZW4obW9kYWwpO1xuICAgICAgfTtcblxuICAgICAgLy8gQWRkIHByb3RvdHlwZSBmb3IgaGlkZSAoY2xvZGUpXG4gICAgICBtb2RhbC5oaWRlID0gKCkgPT4ge1xuICAgICAgICBmbkNsb3NlKG1vZGFsKTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChkaXNtaXNzYWxzICE9PSBudWxsKSB7XG4gICAgICAgIGRpc21pc3NhbHMuZm9yRWFjaCgoZGlzbWlzcywgaikgPT4ge1xuICAgICAgICAgIGRpc21pc3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZ0KSB7XG4gICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZuQ2xvc2UobW9kYWwpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gLy8gaWYgKGRpc21pc3NhbHMgIT09IG51bGwpXG4gICAgfSk7XG4gIH0gLy8gaWYgKG1vZGFscyAhPT0gbnVsbClcblxuICBpZiAobW9kYWxUcmlnZ2VycyAhPT0gbnVsbCkge1xuICAgIG1vZGFsVHJpZ2dlcnMuZm9yRWFjaCgodHJpZ2dlciwgaSkgPT4ge1xuICAgICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgICAgaWYgKGV2dCkge1xuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVmID0gdHJpZ2dlci5nZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kYWwtaWQnKTtcblxuICAgICAgICBpZiAocmVmICE9PSBudWxsKSB7XG4gICAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtyZWZ9YCk7XG4gICAgICAgICAgZm5PcGVuKG1vZGFsKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0gLy8gaWYgKG1vZGFsVHJpZ2dlcnMgIT09IG51bGwpXG5cbiAgbW9kYWxUcmlnZ2VycyA9IHVuZGVmaW5lZDtcblxuICByZXR1cm4ge1xuICAgIGdldDogKGlkeCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBpZHggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGxldCBtb2RhbCA9IGZhbHNlO1xuXG4gICAgICAgIG1vZGFscy5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgaWYgKG5vZGUuaWQgPT09IGlkeC5yZXBsYWNlKC9eIy8sICcnKSkge1xuICAgICAgICAgICAgbW9kYWwgPSBub2RlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG1vZGFsO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIG1vZGFsc1tpZHhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbW9kYWxzW2lkeF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG59OyAvLyBzZWVkTW9kYWxcblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gIG1vZHVsZS5leHBvcnRzLnNlZWRNb2RhbCA9IHNlZWRNb2RhbDtcbn1cblxuLy8gRXhwb3NlIFNlZWRDU1MgaW4gdGhlIGdsb2JhbCBzY29wZVxuaWYgKHR5cGVvZiB3aW5kb3cuU2VlZENTUyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgd2luZG93LlNlZWRDU1MgPSB7fTtcbn1cblxuLy8gRXhwb3NlIG1vZGFsIG1lbnUgaW4gdGhlIGdsb2JhbCBzY29wZVxud2luZG93LlNlZWRDU1MubW9kYWwgPSBzZWVkTW9kYWw7XG4iLCIvKiohXG4gKiBTZWVkLUNTUyAtIE9mZi1DYW52YXMuXG4gKiBAY29weXJpZ2h0IDIwMTksIEFidHogTGFic1xuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxubGV0IGZuT3V0c2lkZUNsaWNrSGFuZGxlcjtcblxubGV0IGZuVG9nZ2xlO1xuXG5sZXQgZm5UcmlnZ2VyQ2xpY2s7XG5cbmNvbnN0IHNlZWRPZmZDYW52YXMgPSBmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGNvbnN0IG9wZW5lZE9mZmNhbnZhc0NsYXNzID0gJ2NhbnZhcy1vcGVuZWQnO1xuXG4gIGZuT3V0c2lkZUNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgbGV0IGEgPSBldi50YXJnZXQ7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG5cbiAgICBjb25zdCBodG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpO1xuXG4gICAgd2hpbGUgKCFmb3VuZCkge1xuICAgICAgaWYgKCFhIHx8ICFhLnBhcmVudE5vZGUpIHtcbiAgICAgICAgLy8gSXQgc2VlbXMgd2UndmUgcmVhY2hlZCB0aGUgcm9vdCAoaHRtbClcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmIChhLmNsYXNzTGlzdCAmJiAhYS5jbGFzc0xpc3QuY29udGFpbnMoJ29mZmNhbnZhcycpKSB7XG4gICAgICAgIC8vIE5laXRoZXIgZm91bmQgLmNhbnZhcyBub3IgdGhlIHJvb3QgbGV2ZWxcbiAgICAgICAgYSA9IGEucGFyZW50Tm9kZTtcbiAgICAgIH0gZWxzZSBpZiAoYS5jbGFzc0xpc3QpIHtcbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZm91bmQgJiYgaHRtbC5jbGFzc0xpc3QuY29udGFpbnMob3BlbmVkT2ZmY2FudmFzQ2xhc3MpKSB7XG4gICAgICAvLyBJdCBzZWVtcyBoYXMgaGFwcGVuZWQgYW4gb3V0c2lkZXIgY2xpY2tcbiAgICAgIGZuVG9nZ2xlKGh0bWwuZ2V0QXR0cmlidXRlKCdkYXRhLWNhbnZhcy1pZCcpKTtcbiAgICB9XG4gIH07XG5cbiAgZm5Ub2dnbGUgPSAoY2FudmFzSUQsIHRyaWdnZXJFbGVtZW50KSA9PiB7XG4gICAgbGV0IGN1c3RvbUV2ZW50O1xuXG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7Y2FudmFzSUQucmVwbGFjZSgvXiMvLCAnJyl9YCk7XG5cbiAgICBjb25zdCB0cmlnZ2VyID1cbiAgICAgIHRyaWdnZXJFbGVtZW50IHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtyb2xlPVwib2ZmY2FudmFzXCJdW2RhdGEtaWQ9XCIke2NhbnZhc0lELnJlcGxhY2UoL14jLywgJycpfVwiXWApO1xuXG4gICAgaWYgKGNhbnZhcyAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgaHRtbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKTtcblxuICAgICAgaWYgKCFodG1sLmNsYXNzTGlzdC5jb250YWlucyhvcGVuZWRPZmZjYW52YXNDbGFzcykpIHtcbiAgICAgICAgY2FudmFzLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcblxuICAgICAgICBpZiAodHJpZ2dlciAhPT0gbnVsbCkge1xuICAgICAgICAgIC8vIEFkZCB0aGUgJ3RyaWdnZXJlZCcgY2xhc3MgdG8gdGhlIGVsZW1lbnQgd2hpY2ggaGFzIHRyaWdnZXJlZCB0aGUgb2ZmY2FudmFzLlxuICAgICAgICAgIHRyaWdnZXIuY2xhc3NMaXN0LmFkZCgndHJpZ2dlcmVkJyk7XG4gICAgICAgIH0gLy8gaWYgKHRyaWdnZXIgIT09IG51bGwpXG5cbiAgICAgICAgLy8gUHJldmVudHMgbWFpbiB0byBzY3JvbGxcbiAgICAgICAgaHRtbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZuT3V0c2lkZUNsaWNrSGFuZGxlcik7XG4gICAgICAgIGh0bWwuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbnZhcy5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSAndHJpZ2dlcmVkJyBjbGFzcyBmb3IgYW55IGV4aXN0aW5nIHRyaWdnZXIgd2hpY2ggcmVmZXJzIGdpdmVuIG9mZmNhbnZhcy5cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgW3JvbGU9XCJvZmZjYW52YXNcIl1bZGF0YS1pZD1cIiR7Y2FudmFzSUQucmVwbGFjZSgvXiMvLCAnJyl9XCJdYCkuZm9yRWFjaCgodGdyKSA9PiB7XG4gICAgICAgICAgdGdyLmNsYXNzTGlzdC5yZW1vdmUoJ3RyaWdnZXJlZCcpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZS1lbmFibGVzIG1haW4gc2Nyb2xsaW5nXG4gICAgICAgIGh0bWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmbk91dHNpZGVDbGlja0hhbmRsZXIpO1xuICAgICAgICBodG1sLnN0eWxlLm92ZXJmbG93ID0gJyc7XG4gICAgICB9XG5cbiAgICAgIC8vIFdhaXQgdW50aWwgYW5pbWF0aW9uIGlzIGNvbXBsZXRlIHRvIGRpc3BhdGNoIHRoZSBldmVudFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChjYW52YXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykpIHtcbiAgICAgICAgICBodG1sLmNsYXNzTGlzdC5hZGQob3BlbmVkT2ZmY2FudmFzQ2xhc3MpO1xuICAgICAgICAgIGh0bWwuc2V0QXR0cmlidXRlKCdkYXRhLWNhbnZhcy1pZCcsIGNhbnZhc0lELnJlcGxhY2UoL14jLywgJycpKTtcbiAgICAgICAgICBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2FudmFzLm9wZW5lZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGh0bWwuY2xhc3NMaXN0LnJlbW92ZShvcGVuZWRPZmZjYW52YXNDbGFzcyk7XG4gICAgICAgICAgY3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NhbnZhcy5jbG9zZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERpc3BhdGNoIHRoZSAnY2FudmFzLm9wZW5lZCcvICdjYW52YXMuY2xvc2VkJyBldmVudHNcbiAgICAgICAgY2FudmFzLmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpO1xuICAgICAgfSwgMzAwKTtcbiAgICB9IC8vIGlmIChjYW52YXMgIT09IG51bGwpXG4gIH07IC8vIGZuVG9nZ2xlXG5cbiAgZm5UcmlnZ2VyQ2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgZm5Ub2dnbGUoZXZ0LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgfHwgJ29mZmNhbnZhcycsIGV2dC5jdXJyZW50VGFyZ2V0KTtcbiAgfTsgLy8gZm5UcmlnZ2VyQ2xpY2tcblxuICAvLyBGaW5kIGFsbCBleGlzdGluZyB0cmlnZ2Vyc1xuICBjb25zdCB0cmlnZ2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyb2xlPVwib2ZmY2FudmFzXCJdJyk7XG5cbiAgLy8gRmluZCBhbGwgZXhpc3Rpbmcgb2ZmY2FudmFzXG4gIGNvbnN0IGNhbnZhc2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9mZmNhbnZhcycpO1xuXG4gIGlmICh0cmlnZ2VycyAhPT0gbnVsbCkge1xuICAgIHRyaWdnZXJzLmZvckVhY2goZnVuY3Rpb24odHJpZ2dlciwgaSkge1xuICAgICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZuVHJpZ2dlckNsaWNrLCBmYWxzZSk7XG4gICAgfSk7IC8vIHRyaWdnZXJzLmZvckVhY2goZnVuY3Rpb24odHJpZ2dlciwgaSlcbiAgfSAvLyBpZiAodHJpZ2dlcnMgIT09IG51bGwpXG5cbiAgaWYgKGNhbnZhc2VzICE9PSBudWxsKSB7XG4gICAgY2FudmFzZXMuZm9yRWFjaCgoY2FudmFzLCBpKSA9PiB7XG4gICAgICAvLyBBdHRhY2ggbWV0aG9kIGZvciBvcGVuaW5nXG4gICAgICBjYW52YXMub3BlbiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgaHRtbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKTtcblxuICAgICAgICBpZiAoIWh0bWwuY2xhc3NMaXN0LmNvbnRhaW5zKG9wZW5lZE9mZmNhbnZhc0NsYXNzKSkge1xuICAgICAgICAgIGZuVG9nZ2xlKGNhbnZhcy5nZXRBdHRyaWJ1dGUoJ2lkJykgfHwgJ29mZmNhbnZhcycpO1xuICAgICAgICB9XG4gICAgICB9OyAvLyBvcGVuXG5cbiAgICAgIC8vIEF0dGFjaCBtZXRob2QgZm9yIGNsb3NpbmdcbiAgICAgIGNhbnZhcy5jbG9zZSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgaHRtbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKTtcblxuICAgICAgICBpZiAoaHRtbC5jbGFzc0xpc3QuY29udGFpbnMob3BlbmVkT2ZmY2FudmFzQ2xhc3MpKSB7XG4gICAgICAgICAgZm5Ub2dnbGUoY2FudmFzLmdldEF0dHJpYnV0ZSgnaWQnKSB8fCAnb2ZmY2FudmFzJyk7XG4gICAgICAgIH1cbiAgICAgIH07IC8vIGNsb3NlXG5cbiAgICAgIC8vIEF0dGFjaCBtZXRob2QgZm9yIGNsb3NpbmdcbiAgICAgIGNhbnZhcy50b2dnbGUgPSAoKSA9PiB7XG4gICAgICAgIGZuVG9nZ2xlKGNhbnZhcy5nZXRBdHRyaWJ1dGUoJ2lkJykgfHwgJ29mZmNhbnZhcycpO1xuICAgICAgfTsgLy8gdG9nZ2xlXG4gICAgfSk7IC8vIGNhbnZhc2VzLmZvckVhY2goKGNhbnZhcywgaSlcbiAgfSAvLyBpZiAoY2FudmFzZXMgIT09IG51bGwpXG5cbiAgcmV0dXJuIHtcbiAgICBnZXQ6IChpZHgpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgaWR4ID09PSAnc3RyaW5nJykge1xuICAgICAgICBsZXQgY2FudmFzID0gZmFsc2U7XG5cbiAgICAgICAgY2FudmFzZXMuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgIGlmIChub2RlLmlkID09PSBpZHgucmVwbGFjZSgvXiMvLCAnJykpIHtcbiAgICAgICAgICAgIGNhbnZhcyA9IG5vZGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGNhbnZhc1tpZHhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gY2FudmFzW2lkeF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG59OyAvLyBzZWVkT2ZmQ2FudmFzXG5cbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICBtb2R1bGUuZXhwb3J0cy5zZWVkT2ZmQ2FudmFzID0gc2VlZE9mZkNhbnZhcztcbn1cblxuLy8gRXhwb3NlIFNlZWRDU1MgaW4gdGhlIGdsb2JhbCBzY29wZVxuaWYgKHR5cGVvZiB3aW5kb3cuU2VlZENTUyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgd2luZG93LlNlZWRDU1MgPSB7fTtcbn1cblxuLy8gRXhwb3NlIG9mZmNhbnZhcyBtZW51IGluIHRoZSBnbG9iYWwgc2NvcGVcbndpbmRvdy5TZWVkQ1NTLm9mZkNhbnZhcyA9IHNlZWRPZmZDYW52YXM7XG4iLCIvKiohXG4gKiBTZWVkLUNTUyAtIFNjcm9sbC5cbiAqIEBjb3B5cmlnaHQgMjAxOSwgQWJ0eiBMYWJzXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5jb25zdCBzZWVkU2Nyb2xsID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAndXNlIHN0cmljdCc7XG5cbiAgbGV0IHRyaWdnZXJzID0gbnVsbDtcblxuICBsZXQgcmV2ZWFsZXJzID0gbnVsbDtcblxuICBsZXQgc2Nyb2xsVGFyZ2V0ID0gMDtcblxuICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICBzcHlTY3JvbGxTZWxlY3RvcjogJ25hdiBhLnNtb290aCcsXG4gICAgcmV2ZWFsRWxlbWVudFNlbGVjdG9yOiAnLnJldmVhbCcsXG4gICAgcmV2ZWFsU3BhY2VPZmZzZXQ6IDAuMixcbiAgICByZXZlYWxXaGVuVmlzaWJsZTogJ3Zpc2libGUnLFxuICAgIHJldmVhbFNpbmdsZUFuaW1hdGlvbjogJ3Zpc2libGUtb25jZScsXG4gICAgcmV2ZWFsV2hlbkhpZGRlbjogJ2hpZGRlbicsXG4gICAgZ3V0dGVyOiA1MFxuICB9OyAvLyBkZWZhdWx0T3B0aW9uc1xuXG4gIGNvbnN0IGZuVXBkYXRlQWN0aXZlVHJpZ2dlciA9IChlbGVtKSA9PiB7XG4gICAgdHJpZ2dlcnMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgaWYgKGVsZW0pIHtcbiAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgfVxuICB9OyAvLyBmblVwZGF0ZUFjdGl2ZVRyaWdnZXJcblxuICBjb25zdCBmbkdldE9mZnNldCA9IChlbGVtKSA9PiB7XG4gICAgY29uc3QgYm9keU9mZnNldCA9IGRvY3VtZW50LmJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gZWxlbSA/IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiAwO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvcDogTWF0aC5jZWlsKG9mZnNldC50b3AgLSBib2R5T2Zmc2V0LnRvcCksXG4gICAgICBsZWZ0OiBNYXRoLmNlaWwob2Zmc2V0LmxlZnQgLSBib2R5T2Zmc2V0LmxlZnQpXG4gICAgfTtcbiAgfTsgLy8gZm5HZXRPZmZzZXRcblxuICBjb25zdCBmblNjcm9sbENvbXBsZXRlID0gKGV2dCkgPT4ge1xuICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA9PT0gc2Nyb2xsVGFyZ2V0KSB7XG4gICAgICBjb25zdCBzZWVkQ3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ3Njcm9sbC5jb21wbGV0ZScpO1xuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChzZWVkQ3VzdG9tRXZlbnQpO1xuICAgIH1cblxuICAgIGlmICh0cmlnZ2Vycykge1xuICAgICAgY29uc3QgZmlyc3RFbGVtZW50T2Zmc2V0ID0gZm5HZXRPZmZzZXQodHJpZ2dlcnNbMF0pO1xuXG4gICAgICBpZiAod2luZG93LnNjcm9sbFkgPCBmaXJzdEVsZW1lbnRPZmZzZXQudG9wKSB7XG4gICAgICAgIGZuVXBkYXRlQWN0aXZlVHJpZ2dlcigpO1xuICAgICAgfVxuXG4gICAgICB0cmlnZ2Vycy5mb3JFYWNoKChlbCwgaSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHRhcmdldElEID1cbiAgICAgICAgICAgIGVsLmdldEF0dHJpYnV0ZSgnaHJlZicpIHx8IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQnKTtcblxuICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0SUQpO1xuICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGZuR2V0T2Zmc2V0KHRhcmdldCk7XG5cbiAgICAgICAgICBpZiAob2Zmc2V0LnRvcCAtIG9wdGlvbnMuZ3V0dGVyIDw9IHdpbmRvdy5zY3JvbGxZKSB7XG4gICAgICAgICAgICBmblVwZGF0ZUFjdGl2ZVRyaWdnZXIoZWwpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygd2luZG93Lm9sZE9uc2Nyb2xsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB3aW5kb3cub2xkT25zY3JvbGwoZXZ0KTtcbiAgICB9XG4gIH07IC8vIGZuU2Nyb2xsQ29tcGxldGVcblxuICBjb25zdCBmblRyaWdnZXJDbGljayA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXQgPVxuICAgICAgZXZ0LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdocmVmJykgfHxcbiAgICAgIGV2dC5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQnKTtcblxuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG5cbiAgICAgIHNjcm9sbFRhcmdldCA9IGZuR2V0T2Zmc2V0KGVsZW0pLnRvcCAtIG9wdGlvbnMuZ3V0dGVyOyAvLyBhZGQgc29tZSBndXR0ZXJcblxuICAgICAgd2luZG93LnNjcm9sbFRvKHtcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB0b3A6IHNjcm9sbFRhcmdldFxuICAgICAgfSk7XG4gICAgfVxuICB9OyAvLyBmblRyaWdnZXJDbGlja1xuXG4gIGNvbnN0IGZuV2F0Y2hFbGVtZW50cyA9ICgpID0+IHtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXdwb3J0ICh3aW5kb3cpIGRpbWVuc2lvbnMuXG4gICAgICogQHJldHVybiBvYmplY3RcbiAgICAgKi9cbiAgICBjb25zdCBnZXRWaWV3cG9ydFNpemUgPSAoKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3aWR0aDogd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodFxuICAgICAgfTtcbiAgICB9OyAvLyBnZXRWaWV3cG9ydFNpemVcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCBzY29sbCBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJuIG9iamVjdFxuICAgICAqL1xuICAgIGNvbnN0IGdldEN1cnJlbnRTY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHg6IHdpbmRvdy5wYWdlWE9mZnNldCxcbiAgICAgICAgeTogd2luZG93LnBhZ2VZT2Zmc2V0XG4gICAgICB9O1xuICAgIH07IC8vIGdldEN1cnJlbnRTY3JvbGxcblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGVsZW1lbnQgZGltZW5zaW9uIGFuZCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0gSFRNTEVsZW1lbnQgZWxcbiAgICAgKiBAcmV0dXJuIG9iamVjdFxuICAgICAqL1xuICAgIGNvbnN0IGdldEVsZW1JbmZvID0gKGVsKSA9PiB7XG4gICAgICBsZXQgZWxlbSA9IGVsO1xuICAgICAgbGV0IG9mZnNldFRvcCA9IDA7XG4gICAgICBsZXQgb2Zmc2V0TGVmdCA9IDA7XG4gICAgICBjb25zdCBvZmZzZXRXaWR0aCA9IGVsZW0ub2Zmc2V0V2lkdGg7XG4gICAgICBjb25zdCBvZmZzZXRIZWlnaHQgPSBlbGVtLm9mZnNldEhlaWdodDtcblxuICAgICAgZG8ge1xuICAgICAgICBpZiAoIWlzTmFOKGVsZW0ub2Zmc2V0VG9wKSkge1xuICAgICAgICAgIG9mZnNldFRvcCArPSBlbGVtLm9mZnNldFRvcDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNOYU4oZWxlbS5vZmZzZXRMZWZ0KSkge1xuICAgICAgICAgIG9mZnNldExlZnQgKz0gZWxlbS5vZmZzZXRMZWZ0O1xuICAgICAgICB9XG4gICAgICB9IHdoaWxlICgoZWxlbSA9IGVsZW0ub2Zmc2V0UGFyZW50KSAhPT0gbnVsbCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvcDogb2Zmc2V0VG9wLFxuICAgICAgICBsZWZ0OiBvZmZzZXRMZWZ0LFxuICAgICAgICBoZWlnaHQ6IG9mZnNldEhlaWdodCxcbiAgICAgICAgd2lkdGg6IG9mZnNldFdpZHRoXG4gICAgICB9O1xuICAgIH07IC8vIGdldEVsZW1JbmZvXG5cbiAgICAvKipcbiAgICAgKiBJZGVudGlmaWVzIHdoZXRoZXIgdGhlIGVsZW1lbnQgaXMgdmlzaWJsZSBpbiB0aGUgdmlld3BvcnQuXG4gICAgICogQHBhcmFtIEhUTUxFbGVtZW50IGVsZW1cbiAgICAgKiBAcmV0dXJuIGJvb2xlYW5cbiAgICAgKi9cbiAgICBjb25zdCBpc0VsZW1lbnRWaXNpYmxlID0gKGVsZW0pID0+IHtcbiAgICAgIGNvbnN0IHZpZXdwb3J0U2l6ZSA9IGdldFZpZXdwb3J0U2l6ZSgpO1xuICAgICAgY29uc3QgY3VycmVudFNjcm9sbCA9IGdldEN1cnJlbnRTY3JvbGwoKTtcbiAgICAgIGNvbnN0IGVJbmYgPSBnZXRFbGVtSW5mbyhlbGVtKTtcbiAgICAgIGNvbnN0IHNwYWNlT2Zmc2V0ID0gb3B0aW9ucy5yZXZlYWxTcGFjZU9mZnNldDtcblxuICAgICAgY29uc3QgY2hlY2tCb3VuZGFyaWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFRoZSBlbGVtZW50IGJvdW5kYXJpZXNcbiAgICAgICAgY29uc3QgZVRvcCA9IGVJbmYudG9wICsgZUluZi5oZWlnaHQgKiBzcGFjZU9mZnNldDtcbiAgICAgICAgY29uc3QgZUxlZnQgPSBlSW5mLmxlZnQgKyBlSW5mLndpZHRoICogc3BhY2VPZmZzZXQ7XG4gICAgICAgIGNvbnN0IGVSaWdodCA9IGVJbmYubGVmdCArIGVJbmYud2lkdGggLSBlSW5mLndpZHRoICogc3BhY2VPZmZzZXQ7XG4gICAgICAgIGNvbnN0IGVCb3R0b20gPSBlSW5mLnRvcCArIGVJbmYuaGVpZ2h0IC0gZUluZi5oZWlnaHQgKiBzcGFjZU9mZnNldDtcblxuICAgICAgICAvLyBUaGUgd2luZG93IGJvdW5kYXJpZXNcbiAgICAgICAgY29uc3Qgd1RvcCA9IGN1cnJlbnRTY3JvbGwueSArIDA7XG4gICAgICAgIGNvbnN0IHdMZWZ0ID0gY3VycmVudFNjcm9sbC54ICsgMDtcbiAgICAgICAgY29uc3Qgd0JvdHRvbSA9IGN1cnJlbnRTY3JvbGwueSAtIDAgKyB2aWV3cG9ydFNpemUuaGVpZ2h0O1xuICAgICAgICBjb25zdCB3UmlnaHQgPSBjdXJyZW50U2Nyb2xsLnggLSAwICsgdmlld3BvcnRTaXplLndpZHRoO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBlbGVtZW50IGlzIHdpdGhpbiBib3VuZGFyeVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIGVUb3AgPCB3Qm90dG9tICYmIGVCb3R0b20gPiB3VG9wICYmIGVMZWZ0ID4gd0xlZnQgJiYgZVJpZ2h0IDwgd1JpZ2h0XG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gY2hlY2tCb3VuZGFyaWVzKCk7XG4gICAgfTsgLy8gaXNFbGVtZW50VmlzaWJsZVxuXG4gICAgLyoqXG4gICAgICogV2F0Y2ggdGhlIHRhcmdldCBlbGVtZW50cyB3aXRoIGEgbG9vcCB0byBpZGVudGlmeSB3aGljaCBvbmUgaXMgaW5zaWRlIHRoZSB2aWV3cG9ydC5cbiAgICAgKiBJZiBmb3VuZCwgdGhlIGVsZW1lbnQgZ2V0cyBhIGNsYXNzIGRlZmluZWQgaW4gdGhlIG9wdGlvbnMuXG4gICAgICogQHJldHVybiB2b2lkXG4gICAgICovXG4gICAgY29uc3QgdG9nZ2xlRWxlbWVudCA9ICgpID0+IHtcbiAgICAgIGlmICghcmV2ZWFsZXJzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXZlYWxlcnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgaWYgKGlzRWxlbWVudFZpc2libGUocmV2ZWFsZXJzW2ldKSkge1xuICAgICAgICAgIGlmIChvcHRpb25zLnJldmVhbFdoZW5WaXNpYmxlKSB7XG4gICAgICAgICAgICByZXZlYWxlcnNbaV0uY2xhc3NMaXN0LmFkZChvcHRpb25zLnJldmVhbFdoZW5WaXNpYmxlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAob3B0aW9ucy5yZXZlYWxXaGVuSGlkZGVuKSB7XG4gICAgICAgICAgICByZXZlYWxlcnNbaV0uY2xhc3NMaXN0LnJlbW92ZShvcHRpb25zLnJldmVhbFdoZW5IaWRkZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICByZXZlYWxlcnNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKG9wdGlvbnMucmV2ZWFsU2luZ2xlQW5pbWF0aW9uKSA9PT1cbiAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yZXZlYWxXaGVuSGlkZGVuKSB7XG4gICAgICAgICAgICAgIHJldmVhbGVyc1tpXS5jbGFzc0xpc3QuYWRkKG9wdGlvbnMucmV2ZWFsV2hlbkhpZGRlbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnJldmVhbFdoZW5WaXNpYmxlKSB7XG4gICAgICAgICAgICAgIHJldmVhbGVyc1tpXS5jbGFzc0xpc3QucmVtb3ZlKG9wdGlvbnMucmV2ZWFsV2hlblZpc2libGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07IC8vIHRvZ2dsZUVsZW1lbnRcblxuICAgIC8qKlxuICAgICAqIEEgaGFuZGxlciBmb3Igc2Nyb2xsaW5nIGFuZCByZXNpemluZ1xuICAgICAqIEBwYXJhbSB3aW5kb3cuRXZlbnQgZXZ0XG4gICAgICogQHJldHVybiB2b2lkXG4gICAgICovXG4gICAgY29uc3Qgc2Nyb2xsUmVzaXplSGFuZGxlciA9IChldnQpID0+IHtcbiAgICAgIHRvZ2dsZUVsZW1lbnQoKTtcbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjcm9sbFJlc2l6ZUhhbmRsZXIsIGZhbHNlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgc2Nyb2xsUmVzaXplSGFuZGxlciwgZmFsc2UpO1xuICB9OyAvLyBmbldhdGNoRWxlbWVudHNcblxuICB3aW5kb3cub2xkT25zY3JvbGwgPSB3aW5kb3cub25zY3JvbGw7XG4gIHdpbmRvdy5vbnNjcm9sbCA9IGZuU2Nyb2xsQ29tcGxldGU7XG5cbiAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblxuICAvLyBGaW5kIGFsbCBleGlzdGluZyB0cmlnZ2VycyBmb3Igc21vb3RoIHNjcm9sbGluZ1xuICB0cmlnZ2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwob3B0aW9ucy5zcHlTY3JvbGxTZWxlY3Rvcik7XG5cbiAgLy8gRmluZCBhbGwgZXhpc3RpbmcgdGFyZ2V0cyBmb3Igd2F0Y2hpbmcgdGhlIHZpZXdwb3J0XG4gIHJldmVhbGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwob3B0aW9ucy5yZXZlYWxFbGVtZW50U2VsZWN0b3IpO1xuXG4gIGlmICh0cmlnZ2VycyAhPT0gbnVsbCkge1xuICAgIHRyaWdnZXJzLmZvckVhY2goZnVuY3Rpb24odHJpZ2dlciwgaSkge1xuICAgICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZuVHJpZ2dlckNsaWNrLCBmYWxzZSk7XG4gICAgfSk7IC8vIHRyaWdnZXJzLmZvckVhY2goZnVuY3Rpb24odHJpZ2dlciwgaSlcbiAgfSAvLyBpZiAodHJpZ2dlcnMgIT09IG51bGwpXG5cbiAgaWYgKHJldmVhbGVycykge1xuICAgIGZuV2F0Y2hFbGVtZW50cygpO1xuICB9XG5cbiAgcmV0dXJuIHt9O1xufTsgLy8gc2VlZFNjcm9sbFxuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMuc2VlZFNjcm9sbCA9IHNlZWRTY3JvbGw7XG59XG5cbi8vIEV4cG9zZSBTZWVkQ1NTIGluIHRoZSBnbG9iYWwgc2NvcGVcbmlmICh0eXBlb2Ygd2luZG93LlNlZWRDU1MgPT09ICd1bmRlZmluZWQnKSB7XG4gIHdpbmRvdy5TZWVkQ1NTID0ge307XG59XG5cbi8vIEV4cG9zZSBzY3JvbGwgaW4gdGhlIGdsb2JhbCBzY29wZVxud2luZG93LlNlZWRDU1Muc2Nyb2xsID0gc2VlZFNjcm9sbDtcbiIsIi8qKiFcbiAqIFNlZWQtQ1NTIC0gQWRkaXRpb25hbCBmZWF0dXJlcyBmb3IgSFRNTCBUZXh0YXJlYXMuXG4gKiBAY29weXJpZ2h0IDIwMTksIEFidHogTGFic1xuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuY29uc3Qgc2VlZFRleHRhcmVhID0gZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBGaW5kIGFsbCBzZWVkLWZpbGUgaW5wdXRzLlxuICBjb25zdCBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmllbGQgPiB0ZXh0YXJlYScpO1xuXG4gIGlmIChpbnB1dHMgIT09IG51bGwpIHtcbiAgICBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpbnB1dCwgaSkge1xuICAgICAgbGV0IG1heExlbmd0aCA9IDA7XG5cbiAgICAgIGNvbnN0IHBhcmVudCA9IGlucHV0LnBhcmVudE5vZGU7XG4gICAgICBjb25zdCBjb3VudGVyTGFiZWwgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignW3JvbGU9XCJjb3VudGVyXCJdJyk7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9XG4gICAgICAgIGNvdW50ZXJMYWJlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGVtcGxhdGUnKSB8fFxuICAgICAgICAnVHlwZWQgJWEgb3V0IG9mICViLiBSZW1haW5pbmcgJWMuJztcblxuICAgICAgY29uc3QgZm5DYWxjID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0eXBlZCA9IGlucHV0LnZhbHVlLnJlcGxhY2UoL1tcXG5cXHJdL2csICcnKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IG1heExlbmd0aCAtIHR5cGVkO1xuICAgICAgICBjb25zdCBtaW5MZW5ndGggPSBNYXRoLmZsb29yKG1heExlbmd0aCAqIDAuMSk7XG5cbiAgICAgICAgY291bnRlckxhYmVsLmlubmVySFRNTCA9IHRlbXBsYXRlXG4gICAgICAgICAgLnJlcGxhY2UoJyVhJywgdHlwZWQpXG4gICAgICAgICAgLnJlcGxhY2UoJyViJywgbWF4TGVuZ3RoKVxuICAgICAgICAgIC5yZXBsYWNlKFxuICAgICAgICAgICAgJyVjJyxcbiAgICAgICAgICAgIHJlbWFpbmluZyA8PSBtaW5MZW5ndGhcbiAgICAgICAgICAgICAgPyBgPHNwYW4gY2xhc3M9XCJyZWRcIiA+JHtyZW1haW5pbmd9PC9zcGFuPmBcbiAgICAgICAgICAgICAgOiByZW1haW5pbmdcbiAgICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgbWF4TGVuZ3RoID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdtYXhsZW5ndGgnKTtcblxuICAgICAgLy8gSWdub3JlIGlmIG1heGxlbmd0aCBpcyBub3QgZ2l2ZW5cbiAgICAgIGlmICghbWF4TGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHRoZSBsaW1pdCBpcyBhbiBpbnRlZ2VyXG4gICAgICBtYXhMZW5ndGggPSBwYXJzZUludChtYXhMZW5ndGgpO1xuXG4gICAgICAvLyBBdHRhY2ggdGhlIGhhbmRsZXJzXG4gICAgICAna2V5cHJlc3Mga2V5ZG93biBrZXl1cCcuc3BsaXQoJyAnKS5mb3JFYWNoKChldnQpID0+IHtcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihldnQsIGZuQ2FsYywgdHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgdXRpbGl0eSBsYWJlbFxuICAgICAgZm5DYWxjKCk7XG4gICAgfSk7IC8vIGlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0LCBpKVxuICB9IC8vIGlmIChpbnB1dHMgIT09IG51bGwpXG59OyAvLyBzZWVkVGV4dGFyZWFcblxuaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gIG1vZHVsZS5leHBvcnRzLnNlZWRUZXh0YXJlYSA9IHNlZWRUZXh0YXJlYTtcbn1cblxuLy8gRXhwb3NlIFNlZWRDU1MgaW4gdGhlIGdsb2JhbCBzY29wZVxuaWYgKHR5cGVvZiB3aW5kb3cuU2VlZENTUyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgd2luZG93LlNlZWRDU1MgPSB7fTtcbn1cblxuLy8gRXhwb3NlIHRleHRBcmVhIGluIHRoZSBnbG9iYWwgc2NvcGVcbndpbmRvdy5TZWVkQ1NTLnRleHRBcmVhID0gc2VlZFRleHRhcmVhO1xuIiwiLyoqXG4gKiBTZWVkLUNTUyAtIExhbmRpbmcgUGFnZS5cbiAqIEBhdXRob3IgUm9nZXJpbyBUYXF1ZXNcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL0FidHpMYWJzL3NlZWQtY3NzXG4gKiBAY29weXJpZ2h0IDIwMTksIEFidHogTGFic1xuICogQGxpY2Vuc2UgcHJpdmF0ZVxuICovXG5cbigoKSA9PiB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICogRW5hYmxlcyB0aGUgZ3JpZCBwbGF5Z3JvdW5kIHdoZXJlIHVzZXIgY2FuIGFkZCBhbmQgcmVtb3ZlXG4gICAqIGNvbGx1bW5zIGluIHRoZSBzYW1wbGUgcGFnZS5cbiAgICovXG4gIGNvbnN0IGVuYWJsZUdyaWRQbGF5Z3JvdW5kID0gKCkgPT4ge1xuICAgIC8vIGFkZCBjb2x1bW5zXG4gICAgJCgnI2FkZC1jb2wnKVxuICAgICAgLm9mZignY2xpY2snKVxuICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICBpZiAoZXZ0KSB7XG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByb3cgPSAkKCcjZmxleGlibGUtY29scycpO1xuICAgICAgICBjb25zdCBjb2xzID0gcm93LmZpbmQoJy5jb2wnKTtcblxuICAgICAgICBpZiAoY29scy5sZW5ndGggPCAxMikge1xuICAgICAgICAgIGNvbnN0IGNvdW50ID0gY29scy5sZW5ndGg7XG4gICAgICAgICAgY29uc3QgcmVtYWluID0gMTIgLSBjb3VudDtcbiAgICAgICAgICBjb25zdCBsYXN0Q2xhc3MgPSAnc20tJyArIHJlbWFpbjtcblxuICAgICAgICAgIHJvdy5maW5kKCcuY29sJykucmVtb3ZlQ2xhc3MoJ3NtLTEgc20tMiBzbS0zIHNtLTQgc20tNSBzbS02IHNtLTcgc20tOCBzbS05IHNtLTEwIHNtLTExIHNtLTEyJyk7XG5cbiAgICAgICAgICByb3cuZmluZCgnLmNvbDpsYXN0JykuYWZ0ZXIoJCgnPGRpdiAvPicsIHsgY2xhc3M6ICdjb2wgYWxpZ24tY2VudGVyJyB9KS5odG1sKGNvdW50ICsgMSkpO1xuXG4gICAgICAgICAgcm93LmZpbmQoJy5jb2wnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnc20tMScpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcm93LmZpbmQoJy5jb2w6bGFzdCcpLnRvZ2dsZUNsYXNzKCdzbS0xICcgKyBsYXN0Q2xhc3MpO1xuXG4gICAgICAgICAgJCgnI3JlbS1jb2wnKS5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb2xzLmxlbmd0aCA+PSAxMSkge1xuICAgICAgICAgICQodGhpcykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAvLyByZW1vdmUgY29sdW1uc1xuICAgICQoJyNyZW0tY29sJylcbiAgICAgIC5vZmYoJ2NsaWNrJylcbiAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgaWYgKGV2dCkge1xuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgcm93ID0gJCgnI2ZsZXhpYmxlLWNvbHMnKTtcbiAgICAgICAgY29uc3QgY29scyA9IHJvdy5maW5kKCcuY29sJyk7XG5cbiAgICAgICAgaWYgKGNvbHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIGNvbnN0IHJlbWFpbiA9IGNvbHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICBjb25zdCBsYXN0Q2xhc3MgPSAnc20tJyArICgxMiAtIHJlbWFpbiArIDEpO1xuXG4gICAgICAgICAgcm93LmZpbmQoJy5jb2w6bGFzdCcpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgcm93XG4gICAgICAgICAgICAuZmluZCgnLmNvbDpsYXN0JylcbiAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc20tMSBzbS0yIHNtLTMgc20tNCBzbS01IHNtLTYgc20tNyBzbS04IHNtLTkgc20tMTAgc20tMTEgc20tMTInKVxuICAgICAgICAgICAgLmFkZENsYXNzKGxhc3RDbGFzcyk7XG5cbiAgICAgICAgICAkKCcjYWRkLWNvbCcpLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbHMubGVuZ3RoIDw9IDIpIHtcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vIEluaXQgZ3JpZCBwbGF5Z3JvdW5kXG4gIGVuYWJsZUdyaWRQbGF5Z3JvdW5kKCk7XG5cbiAgaWYgKHR5cGVvZiBTZWVkQ1NTICE9PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnN0IG0gPSBTZWVkQ1NTLm1vZGFsKCk7IC8vIEluaXQgdGhlIG1vZGFsIGhlbHBlclxuICAgIGNvbnN0IG1vZGFsID0gbS5nZXQoJyNtb2RhbCcpO1xuICAgIGNvbnN0IGMgPSBTZWVkQ1NTLm9mZkNhbnZhcygpOyAvLyBJbml0IHRoZSBvZmZDYW52YXMgaGVscGVyXG4gICAgY29uc3QgY2FudmFzID0gYy5nZXQoJyNzaWRlbmF2Jyk7XG4gICAgY29uc3QgZnUgPSBTZWVkQ1NTLmZpbGVVcGxvYWQoKTsgLy8gSW5pdCB0aGUgZmlsZVVwbG9hZCBoZWxwZXJcbiAgICBjb25zdCB1cGxvYWQgPSBmdS5nZXQoJyNmaWxlJyk7XG5cbiAgICAvLyBEZWZpbmVzIGEgc3BlY2lhbCBpbml0aWFsaXphdGlvbiBvcHRpb25zIGZvciB0aGUgc2Nyb2xsXG4gICAgY29uc3Qgc2Nyb2xsT3B0aW9ucyA9IHtcbiAgICAgIHNweVNjcm9sbFNlbGVjdG9yOiAnYS5zbW9vdGgnLFxuICAgICAgcmV2ZWFsRWxlbWVudFNlbGVjdG9yOiAnLnJldmVhbC5hbmltYXRlZCcsXG4gICAgICByZXZlYWxTaW5nbGVBbmltYXRpb246ICdhbmltYXRlZC1vbmNlJyxcbiAgICAgIHJldmVhbFdoZW5WaXNpYmxlOiAnYm91bmNlSW4nLFxuICAgICAgcmV2ZWFsV2hlbkhpZGRlbjogJ2JvdW5jZU91dCcsXG4gICAgICByZXZlYWxTcGFjZU9mZnNldDogMi41LFxuICAgICAgZ3V0dGVyOiAxNTBcbiAgICB9O1xuXG4gICAgU2VlZENTUy50ZXh0QXJlYSgpOyAvLyBJbml0IHRoZSB0ZXh0QXJlYSBoZWxwZXJcbiAgICBTZWVkQ1NTLnNjcm9sbChzY3JvbGxPcHRpb25zKTsgLy8gSW5pdCB0aGUgc2Nyb2xsIGhlbHBlclxuXG4gICAgaWYgKG1vZGFsKSB7XG4gICAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdtb2RhbC5vcGVuZWQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2RhbCBPcGVuZWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdtb2RhbC5jbG9zZWQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2RhbCBDbG9zZWQnKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjYW52YXMpIHtcbiAgICAgIGxldCBjYW52YXNTdHlsZVN3aXRjaGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29mZmNhbnZhcy1zdHlsZScpO1xuXG4gICAgICBpZiAoY2FudmFzU3R5bGVTd2l0Y2hlcikge1xuICAgICAgICBjYW52YXNTdHlsZVN3aXRjaGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICBpZiAoY2FudmFzU3R5bGVTd2l0Y2hlci52YWx1ZSA9PT0gJ292ZXJsYXknKSB7XG4gICAgICAgICAgICBjYW52YXMuY2xhc3NMaXN0LmFkZCgnb3ZlcmxheScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYW52YXMuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmxheScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjYW52YXMub3BlbmVkJywgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnU2lkZSBNZW51IE9wZW5lZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjYW52YXMuY2xvc2VkJywgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnU2lkZSBNZW51IENsb3NlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbC5jb21wbGV0ZScsICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ZpbmlzaGVkIHNtb290aCBzY3JvbGxpbmcnKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh1cGxvYWQpIHtcbiAgICAgIHVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdmaWxlLmNob3NlbicsIChldnQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ZpbGUocykgYWRkZWQgdG8gRmlsZVVwbG9hZC4nKTtcblxuICAgICAgICBjb25zdCBlcnJvciA9IGV2dC5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcignc3Bhbi5lcnJvcicpO1xuXG4gICAgICAgIC8vIEFkZCB0aGUgc3VjY2VzcyBmZWVkYmFjayBjbGFzc2VzXG4gICAgICAgIGV2dC5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnaGFzLWZlZWRiYWNrJyk7XG4gICAgICAgIGV2dC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3N1Y2Nlc3MnKTtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgbm8gZXJyb3JzIGFyZSBkaXNwbGF5ZWRcbiAgICAgICAgZXZ0LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBlcnJvci5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdmaWxlLnJlbW92ZWQnLCAoZXZ0KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGaWxlKHMpIHJlbW92ZWQgZnJvbSBGaWxlVXBsb2FkLicpO1xuXG4gICAgICAgIGNvbnN0IGxibCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBldnQuY3VycmVudFRhcmdldC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4uZXJyb3InKTtcblxuICAgICAgICBsYmwuY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcbiAgICAgICAgbGJsLmlubmVySFRNTCA9ICdTZWxlY3QgYXQgbGVhc3Qgb25lIGZpbGUuJztcblxuICAgICAgICAvLyBBZGQgdGhlIGVycm9yIGZlZWRiYWNrIGNsYXNzZXNcbiAgICAgICAgZXZ0LmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdoYXMtZmVlZGJhY2snKTtcbiAgICAgICAgZXZ0LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgaXQgZGlzcGxheWVzIHRoZSBlcnJvciBsYWJlbFxuICAgICAgICBldnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdzdWNjZXNzJyk7XG5cbiAgICAgICAgaWYgKCFlcnJvcikge1xuICAgICAgICAgIGV2dC5jdXJyZW50VGFyZ2V0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQobGJsKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59KSgpO1xuIl19
